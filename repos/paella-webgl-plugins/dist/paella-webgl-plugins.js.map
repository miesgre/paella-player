{"version":3,"file":"paella-webgl-plugins.js","sources":["../node_modules/@asicupv/paella-core/dist/paella-core.js","../src/js/WebGLCanvas.js","../src/js/Shader.js","../src/js/SceneObject.js","../src/js/VideoTexture.js","../src/js/primitives.js","../src/js/math/constants.js","../src/js/math/functions.js","../src/js/math/Vec.js","../src/js/math/Mat3.js","../src/js/math/Mat4.js","../src/plugins/WebGLPluginModule.js","../src/plugins/es.upv.paella.video360Canvas.js","../src/index.js"],"sourcesContent":["var dt = (n) => {\n  throw TypeError(n);\n};\nvar ht = (n, e, t) => e.has(n) || dt(\"Cannot \" + t);\nvar d = (n, e, t) => (ht(n, e, \"read from private field\"), t ? t.call(n) : e.get(n)), T = (n, e, t) => e.has(n) ? dt(\"Cannot add the same private member more than once\") : e instanceof WeakSet ? e.add(n) : e.set(n, t), I = (n, e, t, i) => (ht(n, e, \"write to private field\"), i ? i.call(n, t) : e.set(n, t), t);\nconst m = Object.freeze({\n  PLAY: \"paella:play\",\n  PAUSE: \"paella:pause\",\n  STOP: \"paella:stop\",\n  ENDED: \"paella:ended\",\n  SEEK: \"paella:seek\",\n  FULLSCREEN_CHANGED: \"paella:fullscreenchanged\",\n  ENTER_FULLSCREEN: \"paella:enterfullscreen\",\n  EXIT_FULLSCREEN: \"paella:exitfullscreen\",\n  VOLUME_CHANGED: \"paella:volumeChanged\",\n  TIMEUPDATE: \"paella:timeupdate\",\n  TRIMMING_CHANGED: \"paella:trimmingChanged\",\n  CAPTIONS_CHANGED: \"paella:captionsChanged\",\n  CAPTIONS_ENABLED: \"paella:captionsEnabled\",\n  CAPTIONS_DISABLED: \"paella:captionsDisabled\",\n  BUTTON_PRESS: \"paella:buttonPress\",\n  SHOW_POPUP: \"paella:showPopUp\",\n  HIDE_POPUP: \"paella:hidePopUp\",\n  MANIFEST_LOADED: \"paella:manifestLoaded\",\n  STREAM_LOADED: \"paella:streamLoaded\",\n  PLAYER_LOADED: \"paella:playerLoaded\",\n  PLAYER_UNLOADED: \"paella:playerUnloaded\",\n  RESIZE: \"paella:resize\",\n  RESIZE_END: \"paella:resizeEnd\",\n  LAYOUT_CHANGED: \"paella:layoutChanged\",\n  PLAYBACK_RATE_CHANGED: \"paella:playbackRateChanged\",\n  VIDEO_QUALITY_CHANGED: \"paella:videoQualityChanged\",\n  HIDE_UI: \"paella:hideUI\",\n  SHOW_UI: \"paella:showUI\",\n  COOKIE_CONSENT_CHANGED: \"paella:cookieConsentChanged\",\n  LOG: \"paella:log\"\n});\nfunction A(n, e, t, i = !0) {\n  return n.__eventListeners__ = n.__eventListeners__ || {}, Array.isArray(e) || (e = [e]), e.forEach((s) => {\n    n.__eventListeners__[s] = n.__eventListeners__[s] || [], n.__eventListeners__[s].push({\n      callback: t,\n      unregisterOnUnload: i\n    });\n  }), t;\n}\nfunction E(n, e, t = {}) {\n  n.__eventListeners__ && n.__eventListeners__[e] && n.__eventListeners__[e].forEach((i) => i.callback(t));\n}\nfunction se(n, e, t = {}) {\n  n.ready && E(n, e, t);\n}\nfunction Li(n) {\n  if (n.__eventListeners__)\n    for (const e in n.__eventListeners__)\n      n.__eventListeners__[e] = n.__eventListeners__[e].filter((t) => t.unregisterOnUnload == !1), n.log.debug(\"Unregister event: \" + n.__eventListeners__[e]);\n}\nfunction Et(n) {\n  return new Promise((e, t) => {\n    fetch(n).then((i) => i.text()).then((i) => {\n      e(i);\n    }).catch((i) => t(i));\n  });\n}\nfunction St(n) {\n  const e = new URLSearchParams(window.location.search);\n  return e.has(n) ? e.get(n) : null;\n}\nfunction Tt(n) {\n  const e = window.location.hash.replace(\"#\", \"?\"), t = new URLSearchParams(e);\n  return t.has(n) ? t.get(n) : null;\n}\nfunction B(n, e) {\n  const t = e || \"/\";\n  return n = n.map((i, s) => (s && (i = i.replace(new RegExp(\"^\" + t), \"\")), s !== n.length - 1 && (i = i.replace(new RegExp(t + \"$\"), \"\")), i)), n.join(t);\n}\nfunction It(n) {\n  return new RegExp(\"^([a-z]+://|//)\", \"i\").test(n) || /^\\//.test(n);\n}\nfunction Ae(n) {\n  try {\n    return new URL(n).pathname.split(\"/\").pop();\n  } catch {\n    return n.split(\"/\").pop();\n  }\n}\nfunction kt(n) {\n  return n.split(\".\").reduce((e, t, i, s) => i < s.length - 1 ? e !== \"\" ? `${e}.${t}` : t : e, \"\");\n}\nfunction Ke(n) {\n  const e = (t) => {\n    const i = t.split(\"/\").reduce((s, a, r, o) => r < o.length - 1 ? s !== \"\" ? `${s}/${a}` : a : s, \"\");\n    return (t[0] === \"/\" ? `/${i}` : i) + \"/\";\n  };\n  try {\n    const t = new URL(n);\n    return t.origin + e(t.pathname);\n  } catch {\n    return e(n);\n  }\n}\nfunction Je(n) {\n  return Ae(n).split(\".\").pop();\n}\nfunction Z(n, e) {\n  return It(e) ? e : B([n.manifestUrl, e]);\n}\nfunction Dt(n) {\n  n.__hideTimerPaused__ = !0;\n}\nfunction xt(n) {\n  n.__hideTimerPaused__ = !1;\n}\nfunction At(n, e = \"hideUiTime\") {\n  var a;\n  n.__hideTimer__ = null;\n  const t = async () => n.__hideTimerPaused__ ? (n.log.debug(\"UI not hidden because the auto hide timer is paused\"), !1) : i() ? (n.log.debug(\"UI not hidden because there is a focused element\"), !1) : (await n.hideUserInterface(), !0);\n  (a = n.config.ui) != null && a.hideOnMouseLeave && n.containerElement.addEventListener(\"mouseleave\", () => {\n    t();\n  });\n  const i = () => {\n    const r = document.activeElement;\n    return (n.playbackBar.element.contains(r) || n.videoContainer.element.contains(r)) && [\n      \"input\",\n      \"textarea\",\n      \"button\"\n    ].find((o) => r.tagName.toLowerCase(o)) !== -1;\n  }, s = async () => {\n    n.__hideTimer__ && clearTimeout(n.__hideTimer__), await n.showUserInterface(), n.__hideTimer__ = setTimeout(async () => {\n      n.__hideTimer__ = null, t() || s();\n    }, n[e]);\n  };\n  n.containerElement.addEventListener(\"mousemove\", async (r) => {\n    s();\n  }), A(n, m.PLAY, async () => {\n    s();\n  }), A(n, m.PAUSE, async () => {\n    await n.showUserInterface();\n  }), A(n, m.ENDED, async () => {\n    await n.showUserInterface();\n  }), document.addEventListener(\"keydown\", async () => {\n    s();\n  });\n}\nfunction Mt(n) {\n  n.__hideTimer__ && (clearTimeout(n.__hideTimer__), delete n.__hideTimer__);\n}\nfunction ie(n) {\n  const e = Math.floor(n / 60 / 60), t = Math.floor(n / 60) - e * 60, i = Math.floor(n % 60);\n  return (e > 0 ? e.toString().padStart(2, \"0\") + \":\" : \"\") + t.toString().padStart(2, \"0\") + \":\" + i.toString().padStart(2, \"0\");\n}\nfunction xe(n) {\n  const t = /^(?:(\\d+):){0,1}(\\d+):(\\d+)(\\.\\d+)?$/.exec(n);\n  if (t) {\n    const i = t[1] !== void 0 ? Number(t[1]) : 0, s = Number(t[2]), a = Number(t[3]);\n    return i * 3600 + s * 60 + a;\n  }\n  return null;\n}\nfunction qe(n) {\n  const t = /^(?:(\\d+):){0,1}(\\d+):(\\d+)\\.(\\d+)?$/.exec(n);\n  if (t) {\n    const i = t[1] !== void 0 ? Number(t[1]) : 0, s = Number(t[2]), a = Number(t[3]), r = t[4] && Number(t[4]) || 0;\n    return i * 36e5 + s * 6e4 + a * 1e3 + r;\n  }\n  return null;\n}\nfunction ne(n, e, t = 365) {\n  let i = /* @__PURE__ */ new Date();\n  i.setTime(i.getTime() + t * 24 * 60 * 60 * 1e3);\n  let s = `expires=${i.toUTCString()}`;\n  document.cookie = `${n}=${e};${s};path=/;SameSite=None;` + (/Apple/.test(navigator.vendor) ? \"\" : \"Secure;\");\n}\nfunction Rt(n, e, t, i, s = 365) {\n  n.cookieConsent.getConsentForType(e) && ne(t, i, s);\n}\nfunction Y(n) {\n  let e = n + \"=\", i = decodeURIComponent(document.cookie).split(\";\");\n  for (let s = 0; s < i.length; ++s) {\n    let a = i[s];\n    for (; a.charAt(0) == \" \"; )\n      a = a.substring(1);\n    if (a.indexOf(e) == 0)\n      return a.substring(e.length, a.length);\n  }\n  return \"\";\n}\nfunction Pi(n) {\n  const e = Y(n), t = Number(e);\n  return e !== \"\" && !isNaN(t) ? t : null;\n}\nfunction Ei(n) {\n  try {\n    return JSON.parse(Y(n));\n  } catch {\n    return null;\n  }\n}\nfunction Xe(n, e = !0) {\n  return new Promise((t) => {\n    const i = document.createElement(\"link\");\n    i.setAttribute(\"rel\", \"stylesheet\"), i.setAttribute(\"href\", n), i.onload = () => t(i);\n    const s = document.getElementsByTagName(\"head\")[0];\n    e && s.appendChild(i), t();\n  });\n}\nfunction Vt(n) {\n  document.getElementsByTagName(\"head\")[0].removeChild(n);\n}\nfunction we(n, e, t = !0) {\n  for (const i in e) {\n    const s = n[i];\n    let a = e[i];\n    t && Array.isArray(s) && Array.isArray(a) ? (s.forEach((r) => {\n      a = a.filter((o) => typeof r == \"object\" && typeof o == \"object\" && r.id === o.id ? (we(r, o, t), !1) : !0);\n    }), a.forEach((r) => {\n      s.push(r);\n    })) : typeof s == \"object\" && a ? we(s, a, t) : n[i] = e[i];\n  }\n}\nfunction Nt(n, { excludedTags: e = null } = {}) {\n  const t = document.createElement(\"div\");\n  t.innerHTML = n;\n  const i = [\"script\"];\n  return e && i.push(...e), i.flatMap((s) => Array.from(t.getElementsByTagName(s))).forEach((s) => {\n    s.parentElement.removeChild(s);\n  }), t.innerHTML;\n}\nlet De = null;\nfunction et(n) {\n  if (!n) return !1;\n  De || (De = document.createElement(\"video\"));\n  let e = De.canPlayType(n);\n  if (e === \"maybe\" || e === \"probably\")\n    return !0;\n  if (/video\\/mp4/i.test(n))\n    return e = De.canPlayType(\"video/mp4\"), e === \"maybe\" || e === \"probably\";\n}\nconst oa = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  clearAutoHideTimer: Mt,\n  getCookie: Y,\n  getFileExtension: Je,\n  getHashParameter: Tt,\n  getJSONCookie: Ei,\n  getNumericCookie: Pi,\n  getUrlFileName: Ae,\n  getUrlParameter: St,\n  isAbsoluteUrl: It,\n  joinPath: B,\n  loadStyle: Xe,\n  loadSvgIcon: Et,\n  mergeObjects: we,\n  pauseAutoHideUiTimer: Dt,\n  removeExtension: kt,\n  removeFileName: Ke,\n  resolveResourcePath: Z,\n  resumeAutoHideUiTimer: xt,\n  sanitizeHTML: Nt,\n  secondsToTime: ie,\n  setCookie: ne,\n  setCookieIfAllowed: Rt,\n  setupAutoHideUiTimer: At,\n  supportsVideoType: et,\n  timeToMilliseconds: qe,\n  timeToSeconds: xe,\n  unloadStyle: Vt\n}, Symbol.toStringTag, { value: \"Module\" }));\nasync function Si(n, e) {\n  return e.log.debug(\"Using default configuration loading function.\"), (await fetch(n)).json();\n}\nasync function Ti(n, e) {\n  return e.log.debug(\"Using default getVideoId function\"), Tt(\"id\") || St(\"id\") || n.fallbackId;\n}\nasync function Ii(n, e, t, i) {\n  return i.log.debug(\"Using default getManifestUrl function\"), B([n, e]);\n}\nasync function ki(n, e, t, i) {\n  return i.log.debug(\"Using default getManifestFileUrl function\"), B([n, e]);\n}\nasync function Di(n, e, t) {\n  t.log.debug(\"Using default loadVideoManifest function\");\n  const i = await fetch(n);\n  if (i.ok)\n    return await i.json();\n  throw new Error(t.translate(\"Error loading video manifest: $1 $2\", [i.status, i.statusText]));\n}\nvar be;\nclass de {\n  constructor(e) {\n    T(this, be, null);\n    I(this, be, e);\n  }\n  get player() {\n    return d(this, be);\n  }\n}\nbe = new WeakMap();\nfunction Ut({ tag: n = \"div\", attributes: e = {}, children: t = \"\", innerText: i = \"\", parent: s = null }) {\n  const a = document.createElement(n);\n  a.innerText = i;\n  for (let r in e)\n    a.setAttribute(r, e[r]);\n  return a.innerHTML = t, s && s.appendChild(a), a;\n}\nfunction L(n, e = null) {\n  const t = document.createElement(\"div\");\n  t.innerHTML = n;\n  const i = t.children[0];\n  return e && e.appendChild(i), i;\n}\nvar R;\nclass G extends de {\n  constructor(t, { tag: i = \"div\", attributes: s = [], children: a = \"\", parent: r = null }) {\n    super(t);\n    T(this, R, null);\n    I(this, R, Ut({ tag: i, attributes: s, children: a, parent: r })), Object.defineProperty(this, i, {\n      get: () => d(this, R)\n    });\n  }\n  get element() {\n    return d(this, R);\n  }\n  get parent() {\n    return d(this, R).parentElement;\n  }\n  hide() {\n    this.element.style.display = \"none\";\n  }\n  show(t = \"block\") {\n    this.element.style.display = null;\n  }\n  get isVisible() {\n    const t = window.getComputedStyle(this.element);\n    return t.display !== \"none\" && t.display !== \"\";\n  }\n  setAttribute(t, i) {\n    d(this, R).setAttribute(t, i);\n  }\n  removeFromParent() {\n    var t;\n    (t = d(this, R).parentElement) == null || t.removeChild(d(this, R));\n  }\n  setParent(t) {\n    this.removeFromParent(), t.appendChild(d(this, R));\n  }\n}\nR = new WeakMap();\nconst xi = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(1,0,0,1,3,-3.88857)\">\n        <path d=\"M128,35.819C65.633,35.819 14.999,86.453 14.999,148.82C14.999,163.127 17.663,176.817 22.549,189.403L22.475,189.447C11.612,170.791 5.889,149.588 5.889,128C5.889,60.56 60.56,5.889 128,5.889L128,35.819Z\" style=\"fill:url(#_Linear1);\"/>\n    </g>\n    <g transform=\"matrix(-1,1.22465e-16,-1.22465e-16,-1,258,251.914)\">\n        <path d=\"M128,35.819C65.633,35.819 14.999,86.453 14.999,148.82C14.999,163.127 17.663,176.817 22.549,189.403L22.475,189.447C11.612,170.791 5.889,149.588 5.889,128C5.889,60.56 60.56,5.889 128,5.889L128,35.819Z\" style=\"fill:url(#_Linear2);\"/>\n    </g>\n    <defs>\n        <linearGradient id=\"_Linear1\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(-89.3028,140.734,-140.734,-89.3028,144.417,48.7125)\"><stop offset=\"0\" style=\"stop-color:rgb(13,13,13);stop-opacity:1\"/><stop offset=\"1\" style=\"stop-color:rgb(175,175,175);stop-opacity:0.5\"/></linearGradient>\n        <linearGradient id=\"_Linear2\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(-89.3028,140.734,-140.734,-89.3028,144.417,48.7125)\"><stop offset=\"0\" style=\"stop-color:rgb(13,13,13);stop-opacity:1\"/><stop offset=\"1\" style=\"stop-color:rgb(175,175,175);stop-opacity:0.5\"/></linearGradient>\n    </defs>\n</svg>\n`;\nclass Ai extends G {\n  constructor(e) {\n    super(e, { parent: e.containerElement }), this.element.className = \"loader-container\";\n  }\n  async create() {\n    L(`<i>${xi}</i>`, this.element);\n  }\n  get debug() {\n    return !1;\n  }\n}\nconst Mi = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g id=\"Cancel\" transform=\"matrix(5.54545,6.8353e-32,6.8353e-32,5.54545,-2567.37,-10735.5)\">\n        <path d=\"M486.05,1937C498.192,1937 508.05,1946.86 508.05,1959C508.05,1971.14 498.192,1981 486.05,1981C473.908,1981 464.05,1971.14 464.05,1959C464.05,1946.86 473.908,1937 486.05,1937ZM478.979,1950.52L477.565,1951.93L484.636,1959L477.565,1966.07L478.979,1967.49L486.05,1960.41L493.121,1967.49L494.535,1966.07L487.464,1959L494.535,1951.93L493.121,1950.52L486.05,1957.59L478.979,1950.52Z\" style=\"fill:rgb(210,0,0);\"/>\n    </g>\n</svg>\n`;\nclass $e extends G {\n  constructor(e, t = \"\") {\n    super(e, { parent: e.containerElement }), this.element.className = \"error-container\", L(`\n            <div>\n                <i>${Mi}</i>\n                <p>${t}</p>\n            </div>`, this.element);\n  }\n}\nclass he extends de {\n  constructor(e, t) {\n    super(e), this._name = t;\n  }\n  getPluginModuleInstance() {\n    return null;\n  }\n  get config() {\n    return this._config;\n  }\n  get type() {\n    return \"none\";\n  }\n  get order() {\n    var e;\n    return ((e = this._config) == null ? void 0 : e.order) || 0;\n  }\n  get description() {\n    var e;\n    return ((e = this._config) == null ? void 0 : e.description) || \"\";\n  }\n  get name() {\n    return this._name;\n  }\n  async isEnabled() {\n    var e;\n    return (e = this.config) == null ? void 0 : e.enabled;\n  }\n  async load() {\n  }\n  async unload() {\n  }\n}\nclass Ne extends he {\n  get type() {\n    return \"video\";\n  }\n  get streamType() {\n    return \"mp4\";\n  }\n  async isCompatible() {\n    return !1;\n  }\n  async getVideoInstance() {\n    return null;\n  }\n  getCompatibleFileExtensions() {\n    return [];\n  }\n  getManifestData(e) {\n  }\n}\nconst Me = [];\nasync function Ri(n) {\n  await O(n, \"video\", (e) => {\n    Me.push(e);\n  });\n}\nasync function Vi(n) {\n  Me.slice(0);\n}\nfunction Ft(n) {\n  if (Me.length === 0)\n    throw Error(\"No video plugins loaded. Note that `loadVideoPlugins()` must to be called before using `getVideoPlugins()`.\");\n  return Me;\n}\nfunction Ni(n, e) {\n  const t = Je(e);\n  return Ft().find((s) => s.getCompatibleFileExtensions().indexOf(t) !== -1);\n}\nasync function Ui(n, e) {\n  const t = Ft();\n  let i = null;\n  for (const s of t)\n    if (await s.isCompatible(e)) {\n      i = s;\n      break;\n    }\n  return i;\n}\nasync function Fi() {\n  return await new Promise((e) => {\n    const t = document.createElement(\"audio\"), i = setTimeout(() => e(!1), 100);\n    t.addEventListener(\"volumechange\", (s) => {\n      clearTimeout(i), e(!0);\n    }), t.volume = 0.5;\n  });\n}\nclass tt extends G {\n  constructor(e, t, i) {\n    const s = {\n      class: \"video-player\"\n    };\n    super(t, { tag: e, attributes: s, parent: i }), this._streamProvider = null, this._streamData = null, this._ready = !1;\n  }\n  async isVolumeApiAvailable() {\n    return await Fi();\n  }\n  get streamData() {\n    return this._streamData;\n  }\n  get ready() {\n    return this._ready;\n  }\n  async load(e, t) {\n    return this._streamProvider = t, this._streamData = e, await this.loadStreamData(e);\n  }\n  get isMainAudioPlayer() {\n    return this._streamProvider.mainAudioPlayer === this;\n  }\n  // The player must call _videoEndedCallback when the video is ended\n  onVideoEnded(e) {\n    this._videoEndedCallback = e;\n  }\n  // The video instance must implement the following functions and properties\n  async play() {\n    return !1;\n  }\n  async pause() {\n    return !1;\n  }\n  async duration() {\n    return -1;\n  }\n  get currentTimeSync() {\n    return -1;\n  }\n  async currentTime() {\n    return -1;\n  }\n  async setCurrentTime() {\n    return !1;\n  }\n  async volume() {\n    return -1;\n  }\n  async setVolume() {\n    return !1;\n  }\n  initVolume(e) {\n    this._initialVolume = e;\n  }\n  async paused() {\n    return !0;\n  }\n  async playbackRate() {\n    return -1;\n  }\n  async setPlaybackRate() {\n    return !1;\n  }\n  async getQualities() {\n    return null;\n  }\n  async setQuality() {\n    return !1;\n  }\n  get currentQuality() {\n    return null;\n  }\n  async getDimensions() {\n    return null;\n  }\n  async supportsMultiaudio() {\n    return !1;\n  }\n  async getAudioTracks() {\n    return null;\n  }\n  async setCurrentAudioTrack() {\n  }\n  get currentAudioTrack() {\n    return null;\n  }\n  async loadStreamData(e) {\n    return !1;\n  }\n  get isEnabled() {\n    return this._enabled;\n  }\n  async enable() {\n    this._enabled = !0;\n  }\n  async disable() {\n    this._enabled = !1;\n  }\n}\nclass Ue extends de {\n  get moduleName() {\n    return this.player.log.warn(`Incomplete player module definition: '${__filename}.moduleName'`), \"-\";\n  }\n  get moduleVersion() {\n    return this.player.log.warn(`Incomplete player module definition: '${__filename}.moduleVersion'`), \"0.0.0\";\n  }\n  async getDictionaries() {\n    return null;\n  }\n}\nconst Oi = \"@asicupv/paella-core\", $i = { \".\": \"./dist/paella-core.js\", \"./paella-core.css\": \"./dist/paella-core.css\" }, Bi = \"2.0.0-beta.5\", Gi = \"Multi stream HTML video player\", zi = \"./dist/paella-core.js\", Hi = [\"dist/paella-core.css\", \"dist/paella-core.js\", \"dist/paella-core.umd.cjs\", \"dist/paella-core.js.map\", \"dist/paella-core.umd.cjs.map\"], ji = \"./dist/paella-core.js\", Wi = \"module\", qi = { dev: \"vite\", build: \"vite build --emptyOutDir\" }, Qi = { type: \"git\", url: \"git+https://github.com/polimediaupv/paella-player.git\" }, Yi = [\"html\", \"player\", \"video\", \"hls\"], Zi = \"Fernando Serrano Carpena <ferserc1@gmail.com>\", Ki = \"ECL-2.0\", Ji = { url: \"https://github.com/polimediaupv/paella-player/issues\" }, Xi = \"https://github.com/polimediaupv/paella-player#readme\", en = { vite: \"^6.0.11\" }, tn = { \"@ferserc1/input-style-unifier\": \"^0.0.2\" }, Te = {\n  name: Oi,\n  exports: $i,\n  version: Bi,\n  description: Gi,\n  main: zi,\n  files: Hi,\n  module: ji,\n  type: Wi,\n  scripts: qi,\n  repository: Qi,\n  keywords: Yi,\n  author: Zi,\n  license: Ki,\n  bugs: Ji,\n  homepage: Xi,\n  devDependencies: en,\n  dependencies: tn\n};\nlet Be = null;\nclass pe extends Ue {\n  static Get() {\n    return Be || (Be = new pe()), Be;\n  }\n  get moduleName() {\n    return \"paella-core default video formats\";\n  }\n  get moduleVersion() {\n    return Te.version;\n  }\n}\nfunction nn(n) {\n  return new Promise((e, t) => {\n    const i = new Image();\n    i.addEventListener(\"load\", (s) => {\n      e(i);\n    }), i.addEventListener(\"error\", (s) => {\n      t(new Error(\"Could not load preview image. The preview image is required in audio only streams\"));\n    }), i.src = n;\n  });\n}\nfunction sn(n, e, t) {\n  return new Promise((i, s) => {\n    e.oncanplay = () => i(), e.onerror = () => s(new Error(n.translate(\"Error loading audio: $1\", [t]))), e.src = Z(n, t), i();\n  });\n}\nclass an extends tt {\n  constructor(e, t, i) {\n    super(\"audio\", e, t), this.isMainAudio = i, this._ready = !1;\n  }\n  get streamType() {\n    return \"audio\";\n  }\n  waitForLoaded() {\n    return new Promise((e) => {\n      const t = () => {\n        this._ready ? e() : setTimeout(t, 100);\n      };\n      t();\n    });\n  }\n  async play() {\n    await this.waitForLoaded(), this.audio.play();\n  }\n  async pause() {\n    await this.waitForLoaded(), this.audio.pause();\n  }\n  async duration() {\n    return await this.waitForLoaded(), this.audio.duration;\n  }\n  get currentTimeSync() {\n    var e;\n    return ((e = this.audio) == null ? void 0 : e.currentTime) || 0;\n  }\n  async currentTime() {\n    return await this.waitForLoaded(), this.audio.currentTime;\n  }\n  async setCurrentTime(e) {\n    await this.waitForLoaded(), this.audio.currentTime = e;\n  }\n  async volume() {\n    return await this.waitForLoaded(), this.audio.volume;\n  }\n  async setVolume(e) {\n    await this.waitForLoaded(), this.audio.volume = e;\n  }\n  async paused() {\n    return await this.waitForLoaded(), this.audio.paused;\n  }\n  async playbackRate() {\n    return await this.waitForLoaded(), this.audio.playbackRate;\n  }\n  async setPlaybackRate(e) {\n    await this.waitForLoaded(), this.audio.playbackRate = e;\n  }\n  // getQualities(), setQuality(q), get currentQuality(): audio format does not support multiquality\n  async getDimensions() {\n    return {\n      w: this._previewImage.width,\n      h: this._previewImage.height\n    };\n  }\n  async loadStreamData(e = null) {\n    this._streamData = this._streamData || e, this.player.log.debug(\"es.upv.paella.audioVideoFormat: loadStreamData\");\n    const t = this.player.videoManifest.metadata.preview;\n    if (!t || t == null)\n      throw new Error(\"Invalid video manifest data: preview image is required\");\n    if (this._previewImage = await nn(t), this._imageContainer = document.createElement(\"div\"), this._imageContainer.className = \"image-container\", this.parent.appendChild(this._imageContainer), this._imageContainer.appendChild(this._previewImage), this._source = e.sources.audio && e.sources.audio[0], !this._source)\n      throw new Error(\"Invalid source in audio only video stream\");\n    if (!this.isMainAudioPlayer)\n      throw new Error(\"Audio only video stream must be main audio player. Check the role property at video manifest\");\n    await sn(this.player, this.audio, this._source.src);\n    const i = () => {\n      const s = this.player.videoContainer.baseVideoRect.offsetWidth / this.player.videoContainer.baseVideoRect.offsetHeight, a = this._previewImage.width / this._previewImage.height;\n      s > a ? (this._previewImage.classList.add(\"landscape\"), this._previewImage.classList.remove(\"portrait\")) : (this._previewImage.classList.add(\"portrait\"), this._previewImage.classList.remove(\"landscape\"));\n    };\n    this.player.frameList.frames.length > 0 && this.audio.addEventListener(\"timeupdate\", (s) => {\n      const a = this.player.frameList.getImage(s.target.currentTime, !0);\n      this._previewImage.src != a.url && (this._previewImage.src = a.url, this._previewImage.onload = () => i());\n    }), window.addEventListener(\"resize\", (s) => i()), i(), this._ready = !0;\n  }\n}\nclass rn extends Ne {\n  getPluginModuleInstance() {\n    return pe.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.audioVideoFormat\";\n  }\n  get streamType() {\n    return \"audio\";\n  }\n  async isCompatible(e) {\n    return e.sources.audio != null;\n  }\n  async getVideoInstance(e, t) {\n    return new an(this.player, e, t);\n  }\n  getCompatibleFileExtensions() {\n    return [\"m4a\", \"mp3\"];\n  }\n  getManifestData(e) {\n    return {\n      audio: e.map((t) => ({\n        src: t\n      }))\n    };\n  }\n}\nclass Ot extends tt {\n  constructor(e, t, i, s) {\n    super(\"video\", e, t), this._config = s || {};\n    const a = this._config.crossOrigin ?? \"\";\n    this.element.setAttribute(\"playsinline\", \"\"), a !== !1 && this.element.setAttribute(\"crossorigin\", a), this.isMainAudio = i, this.element.setAttribute(\"autoplay\", \"\"), this.element.autoplay = !0, i || (this.element.muted = !0), this._videoEnabled = !0;\n  }\n  async play() {\n    if (this._videoEnabled)\n      try {\n        return await this.waitForLoaded(), this.video.play();\n      } catch {\n      }\n    else\n      this._disabledProperties.paused = !1;\n  }\n  async pause() {\n    if (this._videoEnabled)\n      return await this.waitForLoaded(), this.video.pause();\n    this._disabledProperties.paused = !0;\n  }\n  async duration() {\n    return this._videoEnabled ? (await this.waitForLoaded(), this.video.duration) : this._disabledProperties.duration;\n  }\n  get currentTimeSync() {\n    return this._videoEnabled ? this.ready ? this.video.currentTime : -1 : this._disabledProperties.currentTime;\n  }\n  async currentTime() {\n    return this._videoEnabled ? (await this.waitForLoaded(), this.currentTimeSync) : this._disabledProperties.currentTime;\n  }\n  async setCurrentTime(e) {\n    return this._videoEnabled ? (await this.waitForLoaded(), this.video.currentTime = e) : (this._disabledProperties.currentTime = e, e);\n  }\n  async volume() {\n    return this._videoEnabled ? (await this.waitForLoaded(), this.video.volume) : this._disabledProperties.volume;\n  }\n  async setVolume(e) {\n    return this._videoEnabled ? (await this.waitForLoaded(), e === 0 ? this.video.setAttribute(\"muted\", \"\") : this.video.removeAttribute(\"muted\"), this.video.volume = e) : (this._disabledProperties.volume = e, e);\n  }\n  async paused() {\n    return this._videoEnabled ? (await this.waitForLoaded(), this.video.paused) : this._disabledProperties.paused;\n  }\n  async playbackRate() {\n    return this._videoEnabled ? (await this.waitForLoaded(), await this.video.playbackRate) : this._disabledProperties.playbackRate;\n  }\n  async setPlaybackRate(e) {\n    return this._videoEnabled ? (await this.waitForLoaded(), this.video.playbackRate = e) : (this._disabledProperties.playbackRate = e, e);\n  }\n  async getQualities() {\n  }\n  async setQuality() {\n  }\n  get currentQuality() {\n    return 0;\n  }\n  async getDimensions() {\n    return this._videoEnabled ? (await this.waitForLoaded(), { w: this.video.videoWidth, h: this.video.videoHeight }) : { w: this._disabledProperties.videoWidth, h: this._disabledProperties.videoHeight };\n  }\n  saveDisabledProperties(e) {\n    this._disabledProperties = {\n      duration: e.duration,\n      volume: e.volume,\n      videoWidth: e.videoWidth,\n      videoHeight: e.videoHeight,\n      playbackRate: e.playbackRate,\n      paused: e.paused,\n      currentTime: e.currentTime\n    };\n  }\n  async loadStreamData(e = null) {\n    this._streamData = this._streamData || e, this.player.log.debug(\"es.upv.paella.htmlVideoFormat: loadStreamData\"), this._sources = e.sources.html, this._currentQuality = 0, this.isMainAudioPlayer || (this.video.muted = !0), this._sources.forEach(({ src: t, mimetype: i }) => {\n      t = Z(this.player, t);\n      const s = document.createElement(\"source\");\n      s.src = t, s.type = i, this.video.appendChild(s);\n    }), this._endedCallback = this._endedCallback || (() => {\n      typeof this._videoEndedCallback == \"function\" && this._videoEndedCallback();\n    }), this.video.addEventListener(\"ended\", this._endedCallback);\n    try {\n      await this.video.play();\n    } catch {\n    }\n    await this.waitForLoaded(), this.player.log.debug(`es.upv.paella.htmlVideoFormat (${this.streamData.content}): video loaded and ready.`), this.saveDisabledProperties(this.video);\n  }\n  async clearStreamData() {\n    this.video.src = \"\", this.video.removeEventListener(\"ended\", this._endedCallback), this.video.removeEventListener(\"loadeddata\", this._handleLoadedCallback), this._ready = !1;\n  }\n  get isEnabled() {\n    return this._videoEnabled;\n  }\n  async enable() {\n    this._videoEnabled = !0;\n  }\n  async disable() {\n    return this.isMainAudio ? this.player.log.debug(\"video.disable() - the video is not disabled because it is the main audio source.\") : this._videoEnabled = !1, this._videoEnabled;\n  }\n  waitForLoaded() {\n    return new Promise((e, t) => {\n      this.video.readyState >= 2 && (this._ready = !0), this.ready ? e() : (this._handleLoadedCallback = (i) => {\n        this.video.readyState >= 2 && (this.video.pause(), this._ready = !0, e());\n      }, this.video.addEventListener(\"loadeddata\", this._handleLoadedCallback));\n    });\n  }\n}\nclass on extends Ne {\n  getPluginModuleInstance() {\n    return pe.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.htmlVideoFormat\";\n  }\n  get streamType() {\n    return \"html\";\n  }\n  async isCompatible(e) {\n    const { html: t } = e.sources;\n    return t && t.some((i) => et(i.mimetype));\n  }\n  async getVideoInstance(e, t) {\n    return new Ot(this.player, e, t, this.config);\n  }\n  getCompatibleFileExtensions() {\n    return [\"m4v\", \"mp4\", \"ogg\", \"webm\", \"ogv\"];\n  }\n  getManifestData(e) {\n    const t = (i) => {\n      switch (Je(i)) {\n        case \"mp4\":\n        case \"m4v\":\n          return \"video/mp4\";\n        case \"webm\":\n          return \"video/webm\";\n        case \"ogg\":\n        case \"ogv\":\n          return \"video/ogg\";\n        default:\n          return null;\n      }\n    };\n    return {\n      html: e.map((i) => ({\n        src: i,\n        mimetype: t(i)\n      }))\n    };\n  }\n}\nclass ln {\n  constructor({ label: e, shortLabel: t, isAuto: i = !1, index: s = 0, src: a = \"\", width: r = -1, height: o = -1, bitrate: l = -1 }) {\n    this._label = e, this._shortLabel = t, this._index = s, this._src = a, this._res = {\n      w: r,\n      h: o\n    }, this._bitrate = l, this._isAuto = i;\n  }\n  get label() {\n    return this._label;\n  }\n  get shortLabel() {\n    return this._shortLabel;\n  }\n  get index() {\n    return this._index;\n  }\n  get src() {\n    return this._src;\n  }\n  get res() {\n    return this._res;\n  }\n  get bitrate() {\n    return this._bitrate;\n  }\n  get isAuto() {\n    return this._isAuto;\n  }\n  get quality() {\n    return this._res.w !== -1 && this._res.h !== -1 ? this._res.w * this._res.h : this._bitrate;\n  }\n  compare(e) {\n    return e.quality - this.quality;\n  }\n}\nfunction $t(n) {\n  let e = this._currentSource.frames[0];\n  this._currentSource.frames.some((t) => {\n    if (t.time <= this._currentTime)\n      e = t;\n    else\n      return !0;\n  }), this.img.src = e.src;\n}\nfunction cn() {\n  this._startTimestamp = Date.now();\n  const n = () => {\n    this._timer = setTimeout(n, 250);\n    const e = Date.now(), t = e - this._startTimestamp;\n    this._currentTime += t / 1e3, this._startTimestamp = e, $t.apply(this, [this._currentTime]);\n  };\n  n();\n}\nfunction un() {\n  this._timer && (clearTimeout(this._timer), this._timer = null);\n}\nclass dn extends tt {\n  constructor(e, t) {\n    super(\"img\", e, t), this._currentTime = 0, this._startTimesamp = 0, this._playbackRate = 1, this._timer = null, this.video = this.domElement;\n  }\n  async play() {\n    cn.apply(this);\n  }\n  async pause() {\n    un.apply(this);\n  }\n  async duration() {\n    return this._currentSource.duration;\n  }\n  get currentTimeSync() {\n    return this._currentTime;\n  }\n  async currentTime() {\n    return this._currentTime;\n  }\n  async setCurrentTime(e) {\n    this._currentTime = e, $t.apply(this, [e]);\n  }\n  async volume() {\n    return 0;\n  }\n  async setVolume(e) {\n  }\n  async paused() {\n    return this._timer === null;\n  }\n  async playbackRate() {\n    return this._playbackRate;\n  }\n  async setPlaybackRate(e) {\n    this._playbackRate = e;\n  }\n  async getQualities() {\n    return this._qualities;\n  }\n  async setQuality() {\n  }\n  get currentQuality() {\n    return this._currentQuality;\n  }\n  async getDimensions() {\n    return this._currentSource.res;\n  }\n  async loadStreamData(e) {\n    return this._sources = e.sources.image, this._qualities = this._sources.map((t) => new ln({\n      src: t.frames[0].src,\n      label: `${t.res.w}x${t.res.h}`,\n      shortLabel: `${t.res.h}p`,\n      width: t.res.w,\n      height: t.res.h\n    })), this._currentQuality = this._qualities.length - 1, this._qualities.forEach((t, i) => {\n      this._qualities[this._currentQuality].compare(t) > 0 && (this._currentQuality = i);\n    }), this._currentSource = this._sources[this._currentQuality], this._sources.forEach((t) => {\n      t.frames.sort((i, s) => i.time - s.time);\n    }), !0;\n  }\n}\nclass hn extends Ne {\n  getPluginModuleInstance() {\n    return pe.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.imageVideoFormat\";\n  }\n  get streamType() {\n    return \"image\";\n  }\n  async isCompatible(e) {\n    return e.sources.image != null;\n  }\n  async getVideoInstance(e, t) {\n    return new dn(this.player, e, this.config, t);\n  }\n}\nclass pn extends Ot {\n  constructor(e, t, i, s) {\n    super(e, t, i, s);\n  }\n  // This function is called when the player loads, and it should\n  // make everything ready for video playback to begin.\n  async loadStreamData(e = null) {\n    this._streamData = this._streamData || e, this.player.log.debug(\"es.upv.paella.mp4VideoFormat: loadStreamData\"), this._currentSource || (this._sources = null, this._currentQuality = 0, this._sources = e.sources.mp4, this._sources.sort((t, i) => Number(t.res.w) - Number(i.res.w)), this._currentQuality = this._sources.length - 1, this._currentSource = this._sources[this._currentQuality]), this.isMainAudioPlayer || (this.video.muted = !0), this._initialVolume && (this.video.volume = this._initialVolume, this._initialVolume === 0 && (this.video.muted = !0)), this.video.src = Z(this.player, this._currentSource.src), this._endedCallback = this._endedCallback || (() => {\n      typeof this._videoEndedCallback == \"function\" && this._videoEndedCallback();\n    }), this.video.addEventListener(\"ended\", this._endedCallback);\n    try {\n      await this.video.play();\n    } catch {\n    }\n    await this.waitForLoaded(), this.player.log.debug(`es.upv.paella.mp4VideoFormat (${this.streamData.content}): video loaded and ready.`), this.saveDisabledProperties(this.video);\n  }\n}\nclass gn extends Ne {\n  getPluginModuleInstance() {\n    return pe.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.mp4VideoFormat\";\n  }\n  get streamType() {\n    return \"mp4\";\n  }\n  isCompatible(e) {\n    var i;\n    const { mp4: t } = e.sources;\n    return t && et((i = t[0]) == null ? void 0 : i.mimetype);\n  }\n  async getVideoInstance(e, t) {\n    return new pn(this.player, e, t, this.config);\n  }\n  getCompatibleFileExtensions() {\n    return [\"m4v\", \"mp4\"];\n  }\n  getManifestData(e) {\n    return {\n      mp4: e.map((t) => ({\n        src: t,\n        mimetype: \"video/mp4\"\n      }))\n    };\n  }\n}\nasync function mn(n) {\n  const e = [];\n  await O(n, \"captions\", async (t) => {\n    e.push(t);\n  });\n  for (let t in e) {\n    const s = await e[t].getCaptions(), a = n.captionsCanvas;\n    s.forEach((r) => a.addCaptions(r));\n  }\n}\nclass Bt extends he {\n  get type() {\n    return \"captions\";\n  }\n  async load() {\n    this.player.log.debug(\"load captions plugin\");\n  }\n  async getCaptions() {\n    return this.player.log.warn(`CaptionsPlugin ${this.name}: getCaptions() is not implemented.`), [];\n  }\n}\nclass Gt {\n  get cues() {\n    return this._cues;\n  }\n  get label() {\n    return this._label;\n  }\n  get language() {\n    return this._lang;\n  }\n  set label(e) {\n    this._label = e;\n  }\n  set language(e) {\n    this._lang = e;\n  }\n  constructor(e = \"\", t = \"\") {\n    this._cues = [], this._label = e, this._lang = t;\n  }\n  addCue({ label: e = \"\", start: t, end: i, captions: s }) {\n    const a = {\n      label: e\n    };\n    if (typeof s == \"string\")\n      a.captions = [s];\n    else if (Array.isArray(s))\n      a.captions = s;\n    else\n      throw Error(\"Invalid cue caption format: must be an array of strings or a string\");\n    if (typeof t == \"string\")\n      a.start = xe(t), a.startString = t;\n    else if (typeof t == \"number\")\n      a.start = t, a.startString = ie(t);\n    else\n      throw Error(\"Invalid cue timestamp format: must be a valid time string or a number of seconds\");\n    if (typeof i == \"string\")\n      a.end = xe(i), a.endString = i;\n    else if (typeof i == \"number\")\n      a.end = i, a.endString = ie(i);\n    else\n      throw Error(\"Invalid cue timestamp format: must be a valid time string or a number of seconds\");\n    return this._cues.push(a), a;\n  }\n  getCue(e) {\n    if (typeof e == \"string\")\n      e = xe(e);\n    else if (typeof e != \"number\")\n      throw Error(\"Invalid time instant format getting cue\");\n    let t = null;\n    return this._cues.some((i) => {\n      if (e >= i.start && e <= i.end)\n        return t = i, !0;\n    }), t;\n  }\n}\nfunction pt(n, e) {\n  const t = {}, s = new DOMParser().parseFromString(e, \"text/xml\");\n  return Array.from(s.getElementsByTagName(\"div\")).forEach((a) => {\n    const r = a.getAttribute(\"xml:lang\") || \"unknonw\";\n    t[r] = t[r] || new Gt(n.translate(r), r), Array.from(a.getElementsByTagName(\"p\")).forEach((o) => {\n      const l = qe(o.getAttribute(\"begin\"));\n      t[r].addCue({\n        label: `caption_${o.getAttribute(\"xml:id\") || l}`,\n        start: l / 1e3,\n        end: qe(o.getAttribute(\"end\")) / 1e3,\n        captions: o.innerHTML\n      });\n    });\n  }), t;\n}\nclass fn {\n  constructor(e, t = \"\") {\n    this.player = e, this._text = t, this._captions = pt(this.player, t);\n  }\n  get text() {\n    return this._text;\n  }\n  set text(e) {\n    this._text = e, this._captions = pt(e);\n  }\n  get captions() {\n    return this._captions;\n  }\n}\nlet Ge = null;\nclass ge extends Ue {\n  static Get() {\n    return Ge || (Ge = new ge()), Ge;\n  }\n  get moduleName() {\n    return \"paella-core default plugins\";\n  }\n  get moduleVersion() {\n    return Te.version;\n  }\n}\nclass yn extends Bt {\n  getPluginModuleInstance() {\n    return ge.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.dfxpManifestCaptionsPlugin\";\n  }\n  async isEnabled() {\n    return await super.isEnabled() && this.player.videoManifest.captions && this.player.videoManifest.captions.length > 0;\n  }\n  async getCaptions() {\n    const e = [], t = [];\n    return this.player.videoManifest.captions.forEach((i) => {\n      t.push(new Promise(async (s, a) => {\n        if (/dfxp/i.test(i.format)) {\n          const r = Z(this.player, i.url), o = await fetch(r);\n          if (o.ok) {\n            let l = await o.text();\n            l = l.replace(/[^\\x09\\x0A\\x0D\\x20-\\xFF\\x85\\xA0-\\uD7FF\\uE000-\\uFDCF\\uFDE0-\\uFFFD]/gm, \"\"), l = l.replace(/&\\w+;/gmi, \"\"), l = l.replaceAll(\"<br>\", \"\");\n            const u = new fn(this.player, l);\n            Object.entries(u.captions).forEach(([f, h]) => {\n              e.push(h);\n            }), s();\n          } else\n            a();\n        } else\n          a();\n      }));\n    }), await Promise.allSettled(t), e;\n  }\n}\nclass it extends he {\n  constructor(e, t, i) {\n    super(e, t, i), this.__uiPlugin = !0;\n  }\n  async getDictionaries() {\n    return null;\n  }\n}\nlet nt = \"en\", zt = \"\";\nconst ae = {};\nfunction Ht(n) {\n  const e = ae[nt] || {}, t = ae[zt] || {};\n  return e[n] || t[n] || n;\n}\nfunction jt(n) {\n  nt = n;\n}\nfunction Wt() {\n  return nt;\n}\nfunction qt(n, e) {\n  ae[n] = ae[n] || {};\n  for (const t in e) {\n    const i = e[t];\n    ae[n][t] = i;\n  }\n}\nfunction Qt() {\n  return ae;\n}\nfunction Yt(n) {\n  return n.config.defaultLanguage || navigator.language;\n}\nlet Zt = Ht, Kt = jt, Jt = Wt, Xt = qt, ei = Qt, ti = Yt;\nfunction Ce(n, e = null) {\n  const t = Zt(n);\n  if (Array.isArray(e)) {\n    let i = t;\n    return e.forEach((s, a) => {\n      const r = `$${a + 1}`;\n      i = i.replace(r, s);\n    }), i;\n  } else\n    return t;\n}\nfunction gt(n) {\n  Kt(n);\n}\nfunction _n() {\n  return Jt();\n}\nfunction _e(n, e) {\n  Xt(n, e);\n}\nfunction vn() {\n  return ei();\n}\nfunction ii(n) {\n  return ti(n);\n}\nfunction wn(n) {\n  Zt = n;\n}\nfunction Cn(n) {\n  Kt = n;\n}\nfunction bn(n) {\n  Jt = n;\n}\nfunction Ln(n) {\n  Xt = n;\n}\nfunction Pn(n) {\n  ei = n;\n}\nfunction En(n) {\n  ti = n;\n}\nfunction Sn(n) {\n  zt = ii(n);\n}\nasync function Re(n, e) {\n  var u, f;\n  const t = L(\"<li></li>\", e);\n  t.plugin = n;\n  const i = Ce(n.ariaLabel), s = Ce(n.description), a = n.dynamicWidth ? \"dynamic-width\" : \"fixed-width\", r = n.id ? `id=\"${n.id}\" ` : \"\", o = n.buttonName ? `name=\"${n.buttonName}\" ` : \"\", l = n.tabIndex ? ` tabindex=\"${n.tabIndex}\" ` : \"\";\n  if (n.interactive) {\n    const h = L(`\n\t\t\t<button type=\"button\" ${r}${o}class=\"${a}\"${l}aria-label=\"${i}\" title=\"${s}\">\n\t\t\t</button>\n\t\t`, t);\n    n.className !== \"\" && h.classList.add(n.className), n._button = h, n._container = t, h._pluginData = n, t._pluginData = n, h.addEventListener(\"click\", (c) => {\n      const y = h._pluginData;\n      E(y.player, m.BUTTON_PRESS, {\n        plugin: y\n      }), y.action(c, null), c.stopPropagation(), c.pageX !== 0 && c.pageY !== 0 && document.activeElement.blur();\n    });\n    let p = null;\n    const _ = () => {\n      p && (clearTimeout(p), p = null);\n    }, C = () => {\n      _(), p = setTimeout(() => {\n        n.leftSideContainerPresent && n.leftSideContainer.classList.add(\"hidden\"), n.rightSideContainerPresent && n.rightSideContainer.classList.add(\"hidden\"), p = null;\n      }, 300);\n    }, b = () => {\n      _(), n.leftSideContainerPresent && n.leftSideContainer.classList.remove(\"hidden\"), n.rightSideContainerPresent && n.rightSideContainer.classList.remove(\"hidden\");\n    };\n    h.addEventListener(\"focus\", b), h.addEventListener(\"mouseover\", b), h.addEventListener(\"mouseout\", C), h.addEventListener(\"blur\", C), (((u = n.player.config.accessibility) == null ? void 0 : u.clickWithSpacebar) !== void 0 ? (f = n.player.config.accessibility) == null ? void 0 : f.clickWithSpacebar : !0) || (h.addEventListener(\"keyup\", (c) => {\n      c.keyCode == 32 && c.preventDefault();\n    }), h.addEventListener(\"keydown\", (c) => {\n      c.keyCode == 32 && c.preventDefault();\n    })), n.className !== \"\" && h.classList.add(n.className);\n  } else {\n    const h = L(`\n\t\t\t<div ${r}${o} class=\"non-interactive ${a}\" title=\"${s}\">\n\t\t\t</div>\n\t\t`, t);\n    n._button = h, n._container = t, h._pluginData = n, t._pluginData = n, n.className !== \"\" && h.classList.add(n.className);\n  }\n}\nconst mt = () => {\n  const n = document.createElement(\"span\");\n  return n.classList.add(\"side-container\"), n.classList.add(\"hidden\"), n;\n};\nclass Tn {\n  onIconChanged(e, t, i) {\n  }\n  onTitleChanged(e, t, i) {\n  }\n  onStateChanged(e, t, i, s, a) {\n  }\n}\nvar W, q, Le;\nclass st extends it {\n  constructor() {\n    super(...arguments);\n    T(this, W, null);\n    T(this, q, null);\n    T(this, Le, []);\n  }\n  get type() {\n    return \"button\";\n  }\n  // _container and _button are loaded in PlaybackBar\n  get container() {\n    return this._container;\n  }\n  get button() {\n    return this._button;\n  }\n  get interactive() {\n    return !0;\n  }\n  get dynamicWidth() {\n    return !1;\n  }\n  getId() {\n    return null;\n  }\n  get id() {\n    return this.config.id || this.getId();\n  }\n  getButtonName() {\n    return null;\n  }\n  get buttonName() {\n    return this.config.name || this.getButtonName() || this.name;\n  }\n  get ariaLabel() {\n    return this.config.ariaLabel || this.getAriaLabel();\n  }\n  getAriaLabel() {\n    return \"\";\n  }\n  get tabIndex() {\n    return this.config.tabIndex || this.getTabIndex();\n  }\n  getTabIndex() {\n    return null;\n  }\n  getDescription() {\n    return \"\";\n  }\n  get description() {\n    return this.config.description || this.getDescription();\n  }\n  get minContainerSize() {\n    return this.config.minContainerSize || this.getMinContainerSize();\n  }\n  getMinContainerSize() {\n    return 0;\n  }\n  setObserver(t) {\n    if (t instanceof Tn)\n      this._observer = t;\n    else if (typeof t.onIconChanged == \"function\" || typeof t.onTitleChanged == \"function\" || typeof t.onStateChanged == \"function\")\n      this._observer = t;\n    else\n      throw new Error(\"Invalid observer for ButtonPlugin\");\n  }\n  get icon() {\n    return this._icon || (this._icon = \"\"), this._icon;\n  }\n  set icon(t) {\n    var i;\n    if (typeof t == \"string\" && (t = Nt(t)), this._icon = t, t && this._button instanceof HTMLElement) {\n      const s = this._button.querySelector(\"i\") || L(\"<i></i>\", this._button);\n      s.innerHTML = t;\n    } else if (this._button instanceof HTMLElement) {\n      const s = this._button.querySelector(\"i\");\n      s && this._button.removeChild(s);\n    }\n    (i = this._observer) != null && i.onIconChanged && this._observer.onIconChanged(this, this._icon, t);\n  }\n  get title() {\n    return this._title || \"\";\n  }\n  set title(t) {\n    var i;\n    if (this._title = t, t && this._button instanceof HTMLElement) {\n      const s = this._button.querySelector(\"span\") || L(`<span class=\"button-title-${this.titleSize}\"></span>`, this._button);\n      s.innerHTML = t;\n    } else if (this._button instanceof HTMLElement) {\n      const s = this._button.querySelector(\"span\");\n      s && this._button.removeChild(s);\n    }\n    (i = this._observer) != null && i.onTitleChanged && this._observer.onTitleChanged(this, this._title, t);\n  }\n  // \"small\", \"medium\", \"large\"\n  get titleSize() {\n    return \"medium\";\n  }\n  // \"left\" or \"right\"\n  get side() {\n    var i;\n    return ((i = this.config) == null ? void 0 : i.side) || \"left\";\n  }\n  get closePopUps() {\n    return this.config.closePopUps || this.getClosePopUps();\n  }\n  getClosePopUps() {\n    return !0;\n  }\n  // \"playbackBar\" or \"videoContainer\"\n  get parentContainer() {\n    var i;\n    return ((i = this.config) == null ? void 0 : i.parentContainer) || \"playbackBar\";\n  }\n  get className() {\n    return \"\";\n  }\n  enable() {\n    this._enabled = !0, this.show();\n  }\n  disable() {\n    this._enabled = !1, this.hide();\n  }\n  hide() {\n    this._button && (this._button.style.display = \"none\");\n  }\n  show() {\n    if (this._enabled === !1)\n      return;\n    const { width: t } = this.player.playbackBar.containerSize;\n    this._button && (t > this.minContainerSize || this.parentContainer !== \"playbackBar\") && (this._button.style.display = null);\n  }\n  get leftSideContainer() {\n    return d(this, W) || (I(this, W, mt()), this.container.appendChild(d(this, W))), d(this, W);\n  }\n  get leftSideContainerPresent() {\n    return d(this, W) !== null;\n  }\n  get rightSideContainer() {\n    return d(this, q) || (I(this, q, mt()), this.container.appendChild(d(this, q))), d(this, q);\n  }\n  get rightSideContainerPresent() {\n    return d(this, q) !== null;\n  }\n  get stateText() {\n    return null;\n  }\n  get stateIcon() {\n    return null;\n  }\n  setState({ text: t = null, icon: i = null } = {}) {\n    var r, o;\n    const s = this._statusText, a = this._statusIcon;\n    this._statusText = t, this._statusIcon = i, d(this, Le).forEach((l) => l(this)), this._statusIcon && (this.icon = this._statusIcon), this._statusText && (this.title = this._statusText), (o = (r = this._observer) == null ? void 0 : r.onStateChanged) == null || o.call(r, this, s, t, a, i);\n  }\n  onStateChange(t) {\n    typeof t == \"function\" ? d(this, Le).push(t) : this.player.log.warn(\"Invalid callback for ButtonPlugin.onStateChange\");\n  }\n  async action(t, i = null) {\n  }\n  onResize({ width: t, height: i }) {\n    t < this.minContainerSize ? this.hide() : this.show();\n  }\n  focus() {\n    var t;\n    (t = this.button) == null || t.focus();\n  }\n  blur() {\n    var t;\n    (t = this.button) == null || t.blur();\n  }\n  isFocus() {\n    return this.button === document.activeElement;\n  }\n}\nW = new WeakMap(), q = new WeakMap(), Le = new WeakMap();\nconst In = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 23 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;\">\n    <g id=\"play\" transform=\"matrix(1.36051e-16,0.480277,-0.550439,1.55927e-16,74.9184,-144.269)\">\n        <path d=\"M325.373,94.327L350.358,136.107L300.387,136.107L325.373,94.327Z\"/>\n    </g>\n</svg>\n`, kn = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 24 22\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;\">\n    <g id=\"pause\" transform=\"matrix(1,0,0,0.956522,-48,-7.65217)\">\n        <path d=\"M64,8L72,8L72,31L64,31L64,8ZM48,8L56,8L56,31L48,31L48,8Z\"/>\n    </g>\n</svg>\n`, Dn = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 42\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(1.94013e-16,0.689169,-0.784942,2.23746e-16,110.436,-203.562)\">\n        <g id=\"play\">\n            <path d=\"M304.588,115.214C304.588,105.205 313.901,97.079 325.373,97.079C336.844,97.079 346.157,105.205 346.157,115.214C346.157,125.223 336.844,133.349 325.373,133.349L325.373,128.287C333.642,128.287 340.356,122.43 340.356,115.214C340.356,107.999 333.642,102.141 325.373,102.141C317.103,102.141 310.39,107.999 310.39,115.214L304.588,115.214Z\"/>\n            <g transform=\"matrix(-2.33361,-6.00363e-16,1.21708e-15,-2.59724,320.246,134.358)\">\n                <path d=\"M5.454,3.35L9.398,7.505L1.511,7.505L5.454,3.35Z\"/>\n            </g>\n        </g>\n    </g>\n</svg>\n`;\nclass xn extends st {\n  getPluginModuleInstance() {\n    return ge.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.playPauseButton\";\n  }\n  async load() {\n    const e = this.player.getCustomPluginIcon(this.name, \"play\") || In, t = this.player.getCustomPluginIcon(this.name, \"pause\") || kn, i = this.player.getCustomPluginIcon(this.name, \"replay\") || Dn;\n    this.icon = e, this.player.translate(this.config.ariaLabelPause || \"pause\");\n    const s = this.player.translate(this.config.ariaLabelPlay || \"play\");\n    A(this.player, m.PLAY, () => {\n      this.icon = t, this.button.ariaLabel = s, this.button.title = this.config.ariaLabelPause || s;\n    }), A(this.player, m.PAUSE, () => {\n      this.icon = e, this.button.ariaLabel = s, this.button.title = this.config.ariaLabelPause || s;\n    }), A(this.player, m.ENDED, () => {\n      this.icon = i, this.button.ariaLabel = s, this.button.title = this.config.ariaLabelPause || s;\n    }), A(this.player, m.STOP, () => {\n      this.icon = e, this.button.ariaLabel = s, this.button.title = this.config.ariaLabelPause || s;\n    });\n  }\n  async action() {\n    await this.player.paused() ? await this.player.videoContainer.play() : await this.player.videoContainer.pause();\n  }\n}\nconst ft = \"(?:\\\\d*:){1,2}\\\\d*(?:\\\\.\\\\d+)?\", An = `(${ft})\\\\s*\\\\-\\\\->\\\\s*(${ft})`, Mn = {\n  cueTiming: new RegExp(An)\n}, Rn = (n, e, t, i) => {\n  const s = Mn.cueTiming.exec(e);\n  if (s) {\n    const a = i[t - 1], r = [];\n    for (let o = 1; t + o < i.length && i[t + o] !== \"\"; ++o)\n      r.push(i[t + o]);\n    n.addCue({\n      label: a,\n      start: s[1],\n      end: s[2],\n      captions: r\n    });\n  }\n};\nfunction yt(n) {\n  const e = new Gt();\n  return n !== \"\" && (n = n.replace(/\\r\\n/gm, `\n`), n = n.replace(/\\r/gm, `\n`), n.split(/\\n/).forEach((t, i, s) => {\n    Rn(e, t, i, s);\n  })), e;\n}\nclass Vn {\n  constructor(e = \"\") {\n    this._text = e, this._captions = yt(e);\n  }\n  get text() {\n    return this._text;\n  }\n  set text(e) {\n    this._text = e, this._captions = yt(e);\n  }\n  get captions() {\n    return this._captions;\n  }\n}\nclass Nn extends Bt {\n  getPluginModuleInstance() {\n    return ge.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.vttManifestCaptionsPlugin\";\n  }\n  async isEnabled() {\n    return await super.isEnabled() && this.player.videoManifest.captions && this.player.videoManifest.captions.length > 0;\n  }\n  async getCaptions() {\n    const e = [], t = [];\n    return this.player.videoManifest.captions.forEach((i) => {\n      t.push(new Promise(async (s, a) => {\n        if (/vtt/i.test(i.format)) {\n          const r = Z(this.player, i.url), o = await fetch(r);\n          if (o.ok) {\n            const l = await o.text(), u = new Vn(l);\n            u.captions.label = i.text, u.captions.language = i.lang, e.push(u.captions), s();\n          } else\n            a();\n        } else\n          a();\n      }));\n    }), await Promise.allSettled(t), e;\n  }\n}\nclass Un extends st {\n  getPluginModuleInstance() {\n    return ge.Get();\n  }\n  get name() {\n    return \"es.upv.paella.currentTimeLabel\";\n  }\n  async load() {\n    this.title = ie(0);\n    const e = async () => {\n      const t = await this.player.videoContainer.currentTime();\n      let i = ie(t);\n      if (this.config.showTotalTime) {\n        const s = await this.player.videoContainer.duration();\n        i += ` / ${ie(s)}`;\n      }\n      this.title = i;\n    };\n    this.player.bindEvent(m.TIMEUPDATE, () => e()), this.player.bindEvent(m.TRIMMING_CHANGED, () => e()), this.player.bindEvent(m.SEEK, () => e());\n  }\n  get interactive() {\n    return !1;\n  }\n  get dynamicWidth() {\n    return !0;\n  }\n}\nfunction Fe(n, e) {\n  return ui(n, \"layout\").filter((i) => i.config && i.config.enabled && i.canApply(e));\n}\nfunction ni(n, e) {\n  const t = Fe(n, e), i = [];\n  return t.forEach((s) => {\n    i.push(...s.getValidContentIds(e));\n  }), i;\n}\nfunction Fn(n, e) {\n  const t = [];\n  return ui(n, \"layout\").filter((i) => {\n    var s, a;\n    if ((s = i.config) != null && s.enabled && ((a = i.config) != null && a.validContent))\n      return i.config.validContent.every((r) => r.content.length === e);\n  }).forEach((i) => i.config.validContent.forEach((s) => t.push(s.content))), t;\n}\nfunction si(n, e, t) {\n  const i = Fe(n, e);\n  let s = null;\n  return i.some((a) => {\n    if (a.getValidContentIds(e).indexOf(t) !== -1)\n      return s = a, !0;\n  }), s;\n}\nfunction On(n, e) {\n  const t = Fe(n, e), i = ni(n, e);\n  let s = [];\n  return t.forEach((a) => {\n    s = [...s, ...a.config.validContent];\n  }), s.filter((a) => i.indexOf(a.id) !== -1);\n}\nfunction ai(n, e, t, i = null) {\n  const s = si(n, e, t);\n  if (s) {\n    const a = s.getLayoutStructure(e, t, i);\n    return a.plugin = s, a;\n  }\n  return null;\n}\nclass me extends it {\n  get type() {\n    return \"layout\";\n  }\n  get layoutType() {\n    return \"static\";\n  }\n  getTabIndexStart() {\n    return 10;\n  }\n  get tabIndexStart() {\n    var e;\n    return ((e = this.config) == null ? void 0 : e.tabIndexStart) || this.getTabIndexStart();\n  }\n  // Return the layout identifier, for example, presenter-presentation\n  get identifier() {\n    return \"default\";\n  }\n  get icon() {\n    return \"icon.png\";\n  }\n  // Return the array of valid content in the configuration of the plugin\n  get validContent() {\n    var e;\n    return ((e = this.config) == null ? void 0 : e.validContent) || [];\n  }\n  get validContentIds() {\n    const e = [];\n    return this.validContent.forEach((t) => e.push(t.id)), e;\n  }\n  // Gets the valid content ids that matches the streamData\n  getValidContentIds(e) {\n    const t = [];\n    return this.validContent.forEach((i) => {\n      i.content.every((s) => e.some((a) => s === a.content)) && t.push(i.id);\n    }), t;\n  }\n  // Get the valid stream data combination, according to the plugin configuration\n  // The result of this function must be an array of arrays with all the possible\n  // combinations. For example, for a dual stream layout and three elements in\n  // streamData that matches the valid content, the resulting valid streams must be:\n  // [\n  //      [streamA, streamB],\n  //      [streamA, streamC],\n  //      [streamC, streamB]   \n  // ]\n  getValidStreams(e) {\n    const t = [];\n    return this.validContent.forEach((i) => {\n      let s = [];\n      i.content.every((a) => e.some((r) => {\n        if (a === r.content)\n          return s.push(r), !0;\n      })) && t.push(s);\n    }), t;\n  }\n  canApply(e) {\n    return this.getValidStreams(e).length > 0;\n  }\n  getLayoutStructure() {\n    return {};\n  }\n  // Add buttons to videos\n  // [\n  //      icon    (required)\n  //      click   (required)\n  //      tabIndex\n  //      ariaLabel\n  //      title\n  //      className\n  //      position (CanvasButtonPosition.LEFT, CanvasButtonPosition.CENTER, CanvasButtonPosition.RIGHT)\n  //]\n  getVideoCanvasButtons(e, t, i) {\n    return [];\n  }\n}\nfunction $n(n) {\n  return {\n    icon: n.icon,\n    position: n.position,\n    title: n.description,\n    ariaLabel: n.ariaLabel,\n    name: n.buttonName,\n    click: async (e) => {\n      const t = n.player.videoContainer.streamProvider.streams[e];\n      await n.action(e, t == null ? void 0 : t.player, t == null ? void 0 : t.canvas, t == null ? void 0 : t.canvasPlugin);\n    }\n  };\n}\nasync function Bn(n, e) {\n  const t = [];\n  return await O(\n    n,\n    \"canvasButton\",\n    async (i) => {\n      n.log.debug(` Canvas button plugin: ${i.name}`), t.push(i);\n    }\n  ), t.filter((i) => i.content.indexOf(e.content) !== -1).map((i) => $n(i));\n}\nclass la extends it {\n  get type() {\n    return \"canvasButton\";\n  }\n  get content() {\n    return this._config.content || [\"presenter\"];\n  }\n  get ariaLabel() {\n    return this._config.ariaLabel || this.getAriaLabel();\n  }\n  getAriaLabel() {\n    return \"\";\n  }\n  get tabIndex() {\n    return this.config.tabIndex;\n  }\n  get description() {\n    return this.config.description || this.getDescription();\n  }\n  getDescription() {\n    return \"\";\n  }\n  get icon() {\n    return this._icon;\n  }\n  set icon(e) {\n    this._icon = e;\n  }\n  get side() {\n    var e;\n    return ((e = this.config) == null ? void 0 : e.side) || \"left\";\n  }\n  get buttonName() {\n    return this.name;\n  }\n  get position() {\n    switch (this.side) {\n      case \"left\":\n        return S.LEFT;\n      case \"center\":\n        return S.CENTER;\n      case \"right\":\n        return S.RIGHT;\n      default:\n        throw new Error(`Invalid CanvasButtonPlugin side set: ${this.side}`);\n    }\n  }\n  async action(e) {\n    this.player.log.warn(`Action not implemented in canvas button plugin ${this.name}`);\n  }\n}\nconst Qe = [];\nasync function Gn(n) {\n  await O(n, \"canvas\", (e) => {\n    Qe.push(e);\n  });\n}\nasync function zn(n) {\n}\nfunction Hn(n, e) {\n  if (Qe.length === 0)\n    throw Error(\"No canvas plugins loaded. Note that `loadCanvasPlugins()` must to be called before use `getCanvasPlugins()`\");\n  let t = null;\n  return Qe.some((i) => {\n    if (i.isCompatible(e))\n      return t = i, !0;\n  }), t;\n}\nconst S = Object.freeze({\n  LEFT: \"left\",\n  CENTER: \"center\",\n  RIGHT: \"right\"\n}), jn = function({\n  icon: n,\n  tabIndex: e,\n  ariaLabel: t,\n  title: i,\n  className: s,\n  position: a = S.CENTER,\n  click: r,\n  content: o,\n  name: l\n}) {\n  if (!n)\n    throw new Error(\"Error in video layout definition. getVideoCanvasButtons(): missing 'icon' attribute.\");\n  if (!r)\n    throw new Error(\"Error in video layout definition. getVideoCanvasButtons(): missing 'click' function.\");\n  let u = `class=\"align-${a}${s ? \" \" + s : \"\"}\"`;\n  t && (u += ` aria-label=\"${t}\"`), i && (u += ` title=\"${i}\"`), e !== void 0 && (u += ` tabindex=\"${e}\"`), l !== void 0 && (u += ` name=\"${l}\"`);\n  const f = L(`\n        <button ${u}><i class=\"button-icon\" style=\"pointer-events: none\">${n}</i></button>\n    `);\n  return this.buttonsArea.appendChild(f), f.addEventListener(\"click\", async (h) => (h.stopPropagation(), await r(o), !1)), f;\n}, Ye = async (n, e, t, i, s) => {\n  const a = e.plugin;\n  let r = a.tabIndexStart;\n  const o = await Bn(n, i), l = [];\n  return [\n    ...o,\n    ...a.getVideoCanvasButtons(e, i.content, i, t)\n  ].forEach((f) => {\n    f.tabIndex = r++, f.content = s;\n    const h = jn.apply(t, [f]);\n    l.push(h);\n  }), l;\n}, Ze = (n, e, t) => {\n  let { tabIndexStart: i } = e.plugin;\n  t.sort((s, a) => {\n    const r = s.getBoundingClientRect().left, o = a.getBoundingClientRect().left;\n    return r - o;\n  }).forEach((s) => {\n    s.setAttribute(\"tabindex\", i++);\n  });\n};\nclass ri extends G {\n  constructor(e, t, i) {\n    super(t, { tag: e, parent: i }), this.element.className = \"video-canvas\", this._userArea = null, this._buttonsArea = L(`\n        <div class=\"button-area\">\n        </div>\n        `, this.element);\n  }\n  async loadCanvas(e) {\n    throw Error(`${this.name}: loadCanvas() not implemented`);\n  }\n  get userArea() {\n    return this._userArea || (this._userArea = document.createElement(\"div\"), this._userArea.className = \"user-area\", this.element.appendChild(this._userArea)), this._userArea;\n  }\n  get buttonsArea() {\n    return this._buttonsArea;\n  }\n  showButtons() {\n    this.buttonsArea.style.display = null;\n  }\n  hideButtons() {\n    this.buttonsArea.style.display = \"none\";\n  }\n}\nclass oi extends he {\n  get type() {\n    return \"canvas\";\n  }\n  get canvasType() {\n    return \"\";\n  }\n  isCompatible(e) {\n    return Array.isArray(e == null ? void 0 : e.canvas) ? e.canvas.indexOf(this.canvasType) !== -1 : e.canvas === this.canvasType;\n  }\n  getCanvasInstance(e) {\n    throw Error(`${this.name} canvas plugin: getCanvasInstance() not implemented`);\n  }\n}\nlet ze = null;\nclass K extends Ue {\n  static Get() {\n    return ze || (ze = new K()), ze;\n  }\n  get moduleName() {\n    return \"paella-core default video layouts\";\n  }\n  get moduleVersion() {\n    return Te.version;\n  }\n}\nconst at = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(0.920758,0,0,0.920758,2.50561,1.21236)\">\n        <path d=\"M11.937,17.699L11.937,21.044C11.937,21.656 11.573,22.209 11.012,22.451C10.45,22.693 9.798,22.578 9.354,22.158L1.874,15.1C1.568,14.811 1.394,14.408 1.394,13.986C1.394,13.564 1.568,13.161 1.874,12.872L9.354,5.814C9.798,5.394 10.45,5.279 11.012,5.521C11.573,5.763 11.937,6.316 11.937,6.928L11.937,10.272L22.937,10.272C23.783,10.272 24.469,10.958 24.469,11.804L24.469,16.168C24.469,17.014 23.783,17.699 22.937,17.699L11.937,17.699ZM26.063,23.11L26.063,19.765C26.063,19.153 26.427,18.6 26.988,18.358C27.55,18.116 28.201,18.231 28.646,18.651L36.126,25.709C36.432,25.999 36.606,26.402 36.606,26.823C36.606,27.245 36.432,27.648 36.126,27.937L28.646,34.996C28.201,35.415 27.55,35.53 26.988,35.288C26.427,35.046 26.063,34.493 26.063,33.882L26.063,30.537L15.063,30.537C14.217,30.537 13.531,29.851 13.531,29.005L13.531,24.641C13.531,23.795 14.217,23.11 15.063,23.11L26.063,23.11Z\"/>\n    </g>\n</svg>\n`, Ve = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(-0.620305,0,0,0.839332,25.2077,0.462208)\">\n        <path d=\"M-20.625,8.591C-20.625,6.174 -17.975,4.215 -14.704,4.215L31.492,4.215C34.763,4.215 37.413,6.174 37.413,8.591L37.413,35.582C37.413,37.998 34.763,39.957 31.492,39.957L-14.704,39.957C-17.975,39.957 -20.625,37.998 -20.625,35.582L-20.625,8.591ZM1.285,12.825L8.1,7.789L-15.786,7.789L-15.786,25.442L-8.972,20.406L6.737,32.016L16.994,24.435L1.285,12.825Z\" />\n    </g>\n</svg>\n`, ve = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(0.707107,0.707107,-0.707107,0.707107,20,-8.28427)\">\n        <path d=\"M23,17L23,4.998C23,4.203 22.684,3.44 22.122,2.878C21.56,2.316 20.797,2 20.002,2C20.001,2 19.999,2 19.998,2C19.203,2 18.44,2.316 17.878,2.878C17.316,3.44 17,4.203 17,4.998C17,9.375 17,17 17,17L4.998,17C4.203,17 3.44,17.316 2.878,17.878C2.316,18.44 2,19.203 2,19.998C2,19.999 2,20.001 2,20.002C2,20.797 2.316,21.56 2.878,22.122C3.44,22.684 4.203,23 4.998,23C9.375,23 17,23 17,23L17,35.002C17,35.797 17.316,36.56 17.878,37.122C18.44,37.684 19.203,38 19.998,38C19.999,38 20.001,38 20.002,38C20.797,38 21.56,37.684 22.122,37.122C22.684,36.56 23,35.797 23,35.002C23,30.625 23,23 23,23L35.002,23C35.797,23 36.56,22.684 37.122,22.122C37.684,21.56 38,20.797 38,20.002C38,20.001 38,19.999 38,19.998C38,19.203 37.684,18.44 37.122,17.878C36.56,17.316 35.797,17 35.002,17C30.625,17 23,17 23,17Z\"/>\n    </g>\n</svg>`, Ie = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g>\n        <path d=\"M18,13.029L18,26.971C18,27.509 17.786,28.025 17.406,28.406C17.025,28.786 16.509,29 15.971,29L3.029,29C2.491,29 1.975,28.786 1.594,28.406C1.214,28.025 1,27.509 1,26.971L1,13.029C1,12.491 1.214,11.975 1.594,11.594C1.975,11.214 2.491,11 3.029,11L15.971,11C16.509,11 17.025,11.214 17.406,11.594C17.786,11.975 18,12.491 18,13.029ZM39,13.029L39,26.971C39,27.509 38.786,28.025 38.406,28.406C38.025,28.786 37.509,29 36.971,29L24.029,29C23.491,29 22.975,28.786 22.594,28.406C22.214,28.025 22,27.509 22,26.971L22,13.029C22,12.491 22.214,11.975 22.594,11.594C22.975,11.214 23.491,11 24.029,11L36.971,11C37.509,11 38.025,11.214 38.406,11.594C38.786,11.975 39,12.491 39,13.029ZM21,7L21,33L19,33L19,7L21,7Z\"/>\n    </g>\n</svg>\n`, Wn = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(-0.620305,0,0,0.839332,25.2077,0.462208)\">\n        <g transform=\"matrix(-1.61211,0,0,1.19142,40.6376,-0.550686)\">\n            <path d=\"M38.001,14.89L16.256,14.89C15.767,14.89 15.297,15.084 14.951,15.43C14.605,15.776 14.41,16.246 14.41,16.735C14.41,21.528 14.41,33.999 14.41,33.999L5.673,33.999C3.644,33.999 2,32.355 2,30.327L2,7.673C2,5.644 3.644,4 5.673,4L34.329,4C36.358,4 38.001,5.644 38.001,7.673L38.001,14.89Z\"/>\n        </g>\n        <g transform=\"matrix(-1.62701,0,0,1.19712,41.1319,-0.602464)\">\n            <path d=\"M39.174,17.858C39.174,17.501 39.032,17.158 38.781,16.906C38.529,16.653 38.188,16.511 37.833,16.511C33.587,16.511 20.516,16.511 17.043,16.511C16.816,16.511 16.598,16.602 16.438,16.763C16.278,16.924 16.188,17.142 16.188,17.37C16.188,20.366 16.188,30.369 16.188,34.019C16.188,34.376 16.329,34.719 16.581,34.971C16.832,35.224 17.173,35.366 17.529,35.366C21.597,35.366 33.765,35.366 37.833,35.366C38.188,35.366 38.529,35.224 38.781,34.971C39.032,34.719 39.174,34.376 39.174,34.019C39.174,30.548 39.174,21.329 39.174,17.858Z\"/>\n        </g>\n    </g>\n</svg>\n`;\nclass _t extends me {\n  getPluginModuleInstance() {\n    return K.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.dualVideoDynamic\";\n  }\n  get layoutType() {\n    return \"dynamic\";\n  }\n  async load() {\n    this.pipContentIds = this.config.pipContentIds || [], this.allowSwitchSide = this.config.allowSwitchSide !== void 0 ? this.config.allowSwitchSide : !0;\n  }\n  getVideoCanvasButtons(e, t, i, s) {\n    const a = this.player.getCustomPluginIcon(this.name, \"iconMaximize\") || Ve, r = this.player.getCustomPluginIcon(this.name, \"iconSideBySide\") || Ie, o = this.player.getCustomPluginIcon(this.name, \"iconSwitchSide\") || at, l = this.player.getCustomPluginIcon(this.name, \"iconClose\") || ve, u = this.player.getCustomPluginIcon(this.name, \"iconPiP\") || Wn, f = () => this._currentContent.find((C) => C.id === t), h = () => f().size === 25, p = () => f().size > 50, _ = [];\n    return h() || p() ? _.push({\n      icon: r,\n      position: S.LEFT,\n      title: this.player.translate(\"Dual stream 50%\"),\n      ariaLabel: this.player.translate(\"Dual stream 50%\"),\n      name: this.name + \":iconSideBySide\",\n      click: async () => {\n        this._currentContent.forEach((C) => {\n          C.size = 50;\n        }), await this.player.videoContainer.updateLayout();\n      }\n    }) : _.push({\n      icon: a,\n      position: S.LEFT,\n      title: this.player.translate(\"Maximize video\"),\n      ariaLabel: this.player.translate(\"Maximize video\"),\n      name: this.name + \":iconMaximize\",\n      click: async () => {\n        this._currentContent.forEach((C) => {\n          C.size = C.id === t ? 75 : 25;\n        }), await this.player.videoContainer.updateLayout();\n      }\n    }), this.allowSwitchSide && _.push({\n      icon: o,\n      position: S.LEFT,\n      title: this.player.translate(\"Switch side\"),\n      ariaLabel: this.player.translate(\"Switch side\"),\n      name: this.name + \":iconSwitchSide\",\n      click: async () => {\n        const C = this._currentContent[0].id, b = this._currentContent[1].id, v = this._currentContent[0].size, c = this._currentContent[1].size;\n        this._currentContent[0].id = b, this._currentContent[0].size = c, this._currentContent[1].id = C, this._currentContent[1].size = v, await this.player.videoContainer.updateLayout();\n      }\n    }), _.push({\n      icon: l,\n      position: S.RIGHT,\n      title: this.player.translate(\"Close video\"),\n      ariaLabel: this.player.translate(\"Close video\"),\n      name: this.name + \":iconClose\",\n      click: async () => {\n        const b = this.player.videoContainer.validContentIds.filter((v) => v.indexOf(\"-\") === -1).find((v) => v != t);\n        await this.player.videoContainer.setLayout(b);\n      }\n    }), this.pipContentIds.length > 0 && _.push({\n      icon: u,\n      position: S.LEFT,\n      title: this.player.translate(\"Picture-in-picture\"),\n      ariaLabel: this.player.translate(\"Picture-in-picture\"),\n      name: this.name + \":iconPiP\",\n      click: async () => {\n        const C = this.player.videoContainer.validContentIds.find((b) => this.pipContentIds.indexOf(b) !== -1);\n        await this.player.videoContainer.setLayout(C, t);\n      }\n    }), _;\n  }\n  getLayoutStructure(e, t, i) {\n    if (!this._currentContent) {\n      const { content: s } = this.validContent.find((a) => a.id === t);\n      this._currentContent = s.map((a) => ({\n        id: a,\n        size: 50\n      }));\n    }\n    return {\n      id: \"dual-dynamic\",\n      videos: [\n        {\n          content: this._currentContent[0].id,\n          visible: !0,\n          size: this._currentContent[0].size\n        },\n        {\n          content: this._currentContent[1].id,\n          visible: !0,\n          size: this._currentContent[1].size\n        }\n      ]\n    };\n  }\n}\nconst li = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(-0.620305,0,0,0.839332,25.2077,0.462208)\">\n        <g transform=\"matrix(-1.50139,0,0,1.10483,39.8625,1.72153)\">\n            <path d=\"M22.034,28.802C22.58,28.752 23.089,28.64 23.626,28.496C28.793,27.112 31.864,21.792 30.48,16.625C30.189,15.54 29.715,14.525 29.088,13.619L31.915,8.722C33.663,10.535 34.942,12.776 35.606,15.251C37.748,23.248 32.996,31.48 24.999,33.622C24.011,33.887 23.04,34.063 22.034,34.123L22.034,40.015L13,31.5L22.034,23.015L22.034,28.802Z\" />\n        </g>\n        <g transform=\"matrix(1.50139,1.35303e-16,1.83867e-16,-1.10483,-24.8768,44.5033)\">\n            <path d=\"M22.161,28.786C22.706,28.736 23.089,28.64 23.626,28.496C28.793,27.112 31.864,21.792 30.48,16.625C30.189,15.54 29.715,14.525 29.088,13.619L31.915,8.722C33.663,10.535 34.942,12.776 35.606,15.251C37.748,23.248 32.996,31.48 24.999,33.622C24.011,33.887 23.167,34.048 22.161,34.107L22.161,40L13,31.5L22.161,23L22.161,28.786Z\" />\n        </g>\n    </g>\n</svg>\n`, qn = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 40 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <g transform=\"matrix(-0.620305,0,0,0.839332,25.2077,0.462208)\">\n        <g transform=\"matrix(-1.61211,0,0,1.25099,40.6376,0.938594)\">\n            <path d=\"M26,18.498C26,16.566 24.356,15 22.327,15C17.811,15 10.189,15 5.673,15C3.644,15 2,16.566 2,18.498C2,22.151 2,27.849 2,31.502C2,33.434 3.644,35 5.673,35C10.189,35 17.811,35 22.327,35C24.356,35 26,33.434 26,31.502C26,27.849 26,22.151 26,18.498Z\" />\n        </g>\n        <path d=\"M-2.889,42.341L-16.002,42.341C-17.664,42.341 -19.01,41.345 -19.01,40.117L-19.01,11.346L-15.787,13.728L-15.787,36.879C-15.787,37.695 -15.348,38.478 -14.567,39.056C-13.785,39.633 -12.726,39.958 -11.621,39.958L-2.889,39.958L-2.889,42.341ZM30.962,18.512L30.962,8.485C30.962,7.669 30.523,6.886 29.741,6.308C28.96,5.731 27.9,5.406 26.795,5.406L-4.721,5.406L-7.945,3.024L31.181,3.024C32.842,3.024 34.189,4.019 34.189,5.247L34.189,18.512L30.962,18.512Z\" />\n        <g transform=\"matrix(-0.595969,-0.440448,-1.13993,0.842464,17.4661,11.4472)\">\n            <path d=\"M18.389,14.006L18.389,18L5,11L18.389,4L18.389,7.994L36,7.994L36,14.006L18.389,14.006Z\" />\n        </g>\n    </g>\n</svg>\n`;\nlet F = 0;\nconst rt = [\n  // First layout: side by side\n  {\n    id: \"side-by-side\",\n    videos: [\n      {\n        content: null,\n        rect: [\n          { aspectRatio: \"16/9\", width: 560, height: 315, top: 218, left: 712 },\n          { aspectRatio: \"16/10\", width: 560, height: 350, top: 206, left: 712 },\n          { aspectRatio: \"4/3\", width: 560, height: 420, top: 173, left: 712 },\n          { aspectRatio: \"5/3\", width: 560, height: 336, top: 206, left: 712 },\n          { aspectRatio: \"5/4\", width: 560, height: 448, top: 160, left: 712 }\n        ],\n        visible: !0,\n        layer: 1\n      },\n      {\n        content: null,\n        rect: [\n          { aspectRatio: \"16/9\", width: 688, height: 387, top: 166, left: 10 },\n          { aspectRatio: \"16/10\", width: 688, height: 430, top: 148, left: 10 },\n          { aspectRatio: \"4/3\", width: 688, height: 516, top: 111, left: 10 },\n          { aspectRatio: \"5/3\", width: 690, height: 414, top: 154, left: 10 },\n          { aspectRatio: \"5/4\", width: 690, height: 552, top: 96, left: 10 }\n        ],\n        visible: !0,\n        layer: \"1\"\n      }\n    ],\n    buttons: []\n  },\n  // Second layout: PIP left\n  {\n    id: \"pip-left\",\n    videos: [\n      {\n        content: null,\n        rect: [\n          { aspectRatio: \"16/9\", left: 0, top: 0, width: 1280, height: 720 },\n          { aspectRatio: \"16/10\", left: 64, top: 0, width: 1152, height: 720 },\n          { aspectRatio: \"5/3\", left: 40, top: 0, width: 1200, height: 720 },\n          { aspectRatio: \"5/4\", left: 190, top: 0, width: 900, height: 720 },\n          { aspectRatio: \"4/3\", left: 160, top: 0, width: 960, height: 720 }\n        ],\n        visible: !0,\n        layer: 1\n      },\n      {\n        content: null,\n        rect: [\n          { aspectRatio: \"16/9\", left: 50, top: 470, width: 350, height: 197 },\n          { aspectRatio: \"16/10\", left: 50, top: 448, width: 350, height: 219 },\n          { aspectRatio: \"5/3\", left: 50, top: 457, width: 350, height: 210 },\n          { aspectRatio: \"5/4\", left: 50, top: 387, width: 350, height: 280 },\n          { aspectRatio: \"4/3\", left: 50, top: 404, width: 350, height: 262 }\n        ],\n        visible: !0,\n        layer: 2\n      }\n    ],\n    buttons: []\n  },\n  // Third layout: PIP right\n  {\n    id: \"pip-right\",\n    videos: [\n      {\n        content: null,\n        rect: [\n          { aspectRatio: \"16/9\", left: 0, top: 0, width: 1280, height: 720 },\n          { aspectRatio: \"16/10\", left: 64, top: 0, width: 1152, height: 720 },\n          { aspectRatio: \"5/3\", left: 40, top: 0, width: 1200, height: 720 },\n          { aspectRatio: \"5/4\", left: 190, top: 0, width: 900, height: 720 },\n          { aspectRatio: \"4/3\", left: 160, top: 0, width: 960, height: 720 }\n        ],\n        visible: !0,\n        layer: 1\n      },\n      {\n        content: null,\n        rect: [\n          { aspectRatio: \"16/9\", left: 880, top: 470, width: 350, height: 197 },\n          { aspectRatio: \"16/10\", left: 880, top: 448, width: 350, height: 219 },\n          { aspectRatio: \"5/3\", left: 880, top: 457, width: 350, height: 210 },\n          { aspectRatio: \"5/4\", left: 880, top: 387, width: 350, height: 280 },\n          { aspectRatio: \"4/3\", left: 880, top: 404, width: 350, height: 262 }\n        ],\n        visible: !0,\n        layer: 2\n      }\n    ],\n    buttons: []\n  }\n];\nfunction Qn(n) {\n  return F = (F + 1) % rt.length, ot(n);\n}\nfunction fe(n, e) {\n  return F = e < rt.length ? e : F, ot(n);\n}\nfunction ot(n) {\n  let e = JSON.parse(JSON.stringify(rt[F]));\n  return e.videos[0].content = n[0], e.videos[1].content = n[1], e;\n}\nclass Yn extends me {\n  getPluginModuleInstance() {\n    return K.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.dualVideo\";\n  }\n  get identifier() {\n    return \"dual-video\";\n  }\n  async load() {\n    let e = Y(\"dualVideoLayoutIndex\");\n    e !== \"\" && (F = Number(e)), this.player.log.debug(\"Dual video layout loaded\");\n  }\n  getValidStreams(e) {\n    return super.getValidStreams(e).filter((t) => t.length === 2);\n  }\n  switchContent() {\n    const e = this._currentContent[0], t = this._currentContent[1];\n    this._currentContent[0] = t, this._currentContent[1] = e, this.player.videoContainer.updateLayout();\n  }\n  async switchMinimized() {\n    Qn(this._currentContent), await this.player.videoContainer.updateLayout();\n  }\n  async minimizeVideo(e) {\n    let t = !0;\n    if (e === this._currentContent[0]) {\n      const i = this._currentContent[0], s = this._currentContent[1];\n      this._currentContent[0] = s, this._currentContent[1] = i, t = !1;\n    }\n    F === 1 && t ? fe(this._currentContent, 2) : fe(this._currentContent, 1), await this.player.videoContainer.updateLayout();\n  }\n  async maximizeVideo(e) {\n    let t = !0;\n    if (e === this._currentContent[1]) {\n      const i = this._currentContent[0], s = this._currentContent[1];\n      this._currentContent[0] = s, this._currentContent[1] = i, t = !1;\n    }\n    F === 1 && t ? fe(this._currentContent, 2) : fe(this._currentContent, 1), await this.player.videoContainer.updateLayout();\n  }\n  async setSideBySide() {\n    fe(this._currentContent, 0), await this.player.videoContainer.updateLayout();\n  }\n  get minimizedContent() {\n    return F === 0 ? \"\" : this._currentContent[1];\n  }\n  async closeVideo(e) {\n    const i = this.player.videoContainer.validContentIds.filter((s) => s.indexOf(\"-\") === -1).find((s) => s != e);\n    await this.player.videoContainer.setLayout(i);\n  }\n  getVideoCanvasButtons(e, t, i, s) {\n    if (e.id === \"side-by-side\")\n      return [\n        // Swap\n        {\n          icon: this.player.getCustomPluginIcon(this.name, \"iconRotate\") || li,\n          position: S.LEFT,\n          title: this.player.translate(\"Swap position of the videos\"),\n          ariaLabel: this.player.translate(\"Swap position of the videos\"),\n          name: this.name + \":iconRotate\",\n          click: async () => {\n            await this.switchContent();\n          }\n        },\n        // Minimize\n        {\n          icon: this.player.getCustomPluginIcon(this.name, \"iconMaximize\") || Ve,\n          position: S.LEFT,\n          title: this.player.translate(\"Maximize video\"),\n          ariaLabel: this.player.translate(\"Maximize video\"),\n          name: this.name + \":iconMaximize\",\n          click: async () => {\n            await this.maximizeVideo(t);\n          }\n        },\n        // Close\n        {\n          icon: this.player.getCustomPluginIcon(this.name, \"iconClose\") || ve,\n          position: S.RIGHT,\n          title: this.player.translate(\"Close video\"),\n          ariaLabel: this.player.translate(\"Close video\"),\n          name: this.name + \":iconClose\",\n          click: async () => {\n            await this.closeVideo(t);\n          }\n        }\n      ];\n    {\n      const a = [];\n      return t === this.minimizedContent ? (a.push({\n        icon: this.player.getCustomPluginIcon(this.name, \"iconMaximize\") || Ve,\n        position: S.LEFT,\n        title: this.player.translate(\"Maximize video\"),\n        ariaLabel: this.player.translate(\"Maximize video\"),\n        name: this.name + \":iconMaximize\",\n        click: async () => {\n          await this.switchContent();\n        }\n      }), a.push({\n        icon: this.player.getCustomPluginIcon(this.name, \"iconSwitchSide\") || at,\n        position: S.LEFT,\n        title: this.player.translate(\"Place the video on the other side of the screen\"),\n        ariaLabel: this.player.translate(\"Place the video on the other side of the screen\"),\n        name: this.name + \":iconSwitchSide\",\n        click: async () => {\n          await this.minimizeVideo(t);\n        }\n      }), a.push({\n        icon: this.player.getCustomPluginIcon(this.name, \"iconClose\") || ve,\n        position: S.RIGHT,\n        title: this.player.translate(\"Close video\"),\n        ariaLabel: this.player.translate(\"Close video\"),\n        name: this.name + \":iconClose\",\n        click: async () => {\n          await this.closeVideo(t);\n        }\n      })) : (a.push({\n        icon: this.player.getCustomPluginIcon(this.name, \"iconMinimize\") || qn,\n        position: S.LEFT,\n        title: this.player.translate(\"Minimize video\"),\n        ariaLabel: this.player.translate(\"Minimize video\"),\n        name: this.name + \":iconMinimize\",\n        click: async () => {\n          await this.switchContent();\n        }\n      }), a.push({\n        icon: this.player.getCustomPluginIcon(this.name, \"iconSideBySide\") || Ie,\n        position: S.LEFT,\n        title: this.player.translate(\"Put the videos side by side\"),\n        ariaLabel: this.player.translate(\"Put the videos side by side\"),\n        name: this.name + \":iconSideBySide\",\n        click: async () => {\n          await this.setSideBySide();\n        }\n      }), a.push({\n        icon: this.player.getCustomPluginIcon(this.name, \"iconClose\") || ve,\n        position: S.RIGHT,\n        title: this.player.translate(\"Close video\"),\n        ariaLabel: this.player.translate(\"Close video\"),\n        name: this.name + \":iconClose\",\n        click: async () => {\n          await this.closeVideo(t);\n        }\n      })), a;\n    }\n  }\n  getLayoutStructure(e, t) {\n    if (!this._currentContent || this._currentContentId !== t) {\n      const { content: a } = this.validContent.find((l) => l.id === t);\n      this._currentContent = a, this._currentContentId = t;\n      const r = Y(\"dualVideoLayoutContent0\"), o = Y(\"dualVideoLayoutContent1\");\n      r !== \"\" && o !== \"\" && this._currentContent.indexOf(r) !== -1 && this._currentContent.indexOf(o) !== -1 && (this._currentContent[0] = r, this._currentContent[1] = o);\n    }\n    const i = ot(this._currentContent), s = {\n      id: i.id,\n      player: this.player,\n      name: { es: \"Dos streams con posición dinámica\" },\n      hidden: !1,\n      videos: i.videos,\n      buttons: []\n    };\n    return ne(\"dualVideoLayoutIndex\", F), ne(\"dualVideoLayoutContent0\", this._currentContent[0]), ne(\"dualVideoLayoutContent1\", this._currentContent[1]), s;\n  }\n}\nconst vt = {\n  id: \"pip-left\",\n  name: { es: \"Dos streams imagen dentro de imagen\" },\n  hidden: !1,\n  videos: [\n    {\n      content: null,\n      rect: [\n        { aspectRatio: \"16/9\", left: 0, top: 0, width: 1280, height: 720 },\n        { aspectRatio: \"16/10\", left: 64, top: 0, width: 1152, height: 720 },\n        { aspectRatio: \"5/3\", left: 40, top: 0, width: 1200, height: 720 },\n        { aspectRatio: \"5/4\", left: 190, top: 0, width: 900, height: 720 },\n        { aspectRatio: \"4/3\", left: 160, top: 0, width: 960, height: 720 },\n        { aspectRatio: \"9/16\", left: 617, top: 17, width: 386, height: 687 }\n      ],\n      visible: !0,\n      layer: 1\n    },\n    {\n      content: null,\n      rect: [\n        { aspectRatio: \"16/9\", left: 50, top: 470, width: 350, height: 197 },\n        { aspectRatio: \"16/10\", left: 50, top: 448, width: 350, height: 219 },\n        { aspectRatio: \"5/3\", left: 50, top: 457, width: 350, height: 210 },\n        { aspectRatio: \"5/4\", left: 50, top: 387, width: 350, height: 280 },\n        { aspectRatio: \"4/3\", left: 50, top: 404, width: 350, height: 262 },\n        { aspectRatio: \"9/16\", left: 224, top: 301, width: 224, height: 400 }\n      ],\n      visible: !0,\n      layer: 2\n    }\n  ],\n  buttons: []\n}, Zn = {\n  id: \"pip-right\",\n  name: { es: \"Dos streams imagen dentro de imagen a la derecha\" },\n  hidden: !1,\n  videos: [\n    {\n      content: null,\n      rect: [\n        { aspectRatio: \"16/9\", left: 0, top: 0, width: 1280, height: 720 },\n        { aspectRatio: \"16/10\", left: 64, top: 0, width: 1152, height: 720 },\n        { aspectRatio: \"5/3\", left: 40, top: 0, width: 1200, height: 720 },\n        { aspectRatio: \"5/4\", left: 190, top: 0, width: 900, height: 720 },\n        { aspectRatio: \"4/3\", left: 160, top: 0, width: 960, height: 720 },\n        { aspectRatio: \"9/16\", left: 242, top: 17, width: 386, height: 687 }\n      ],\n      visible: !0,\n      layer: 1\n    },\n    {\n      content: null,\n      rect: [\n        { aspectRatio: \"16/9\", left: 880, top: 470, width: 350, height: 197 },\n        { aspectRatio: \"16/10\", left: 880, top: 448, width: 350, height: 219 },\n        { aspectRatio: \"5/3\", left: 880, top: 457, width: 350, height: 210 },\n        { aspectRatio: \"5/4\", left: 880, top: 387, width: 350, height: 280 },\n        { aspectRatio: \"4/3\", left: 880, top: 404, width: 350, height: 262 },\n        { aspectRatio: \"9/16\", left: 887, top: 304, width: 224, height: 400 }\n      ],\n      visible: !0,\n      layer: 2\n    }\n  ],\n  buttons: []\n};\nclass Kn extends me {\n  getPluginModuleInstance() {\n    return K.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.dualVideoPiP\";\n  }\n  get identifier() {\n    return \"dual-video-pip\";\n  }\n  async load() {\n    this._currentLayout = vt, this.dualVideoContentIds = this.config.dualVideoContentIds || [];\n  }\n  getValidStreams(e) {\n    return super.getValidStreams(e).filter((t) => t.length === 2);\n  }\n  getVideoCanvasButtons(e, t, i, s) {\n    const a = this.player.getCustomPluginIcon(this.name, \"iconClose\") || ve, r = this.player.getCustomPluginIcon(this.name, \"iconSwitchSide\") || at, o = this.player.getCustomPluginIcon(this.name, \"iconMaximize\") || Ve, l = this.player.getCustomPluginIcon(this.name, \"iconSideBySide\") || Ie, u = [\n      {\n        icon: a,\n        position: S.RIGHT,\n        title: this.player.translate(\"Close video\"),\n        ariaLabel: this.player.translate(\"Close video\"),\n        name: this.name + \":iconClose\",\n        click: async () => {\n          const h = this.player.videoContainer.validContentIds.filter((p) => p.indexOf(\"-\") === -1).find((p) => p !== t);\n          await this.player.videoContainer.setLayout(h);\n        }\n      }\n    ];\n    return t === this._pipVideo ? (u.push({\n      icon: r,\n      position: S.LEFT,\n      title: this.player.translate(\"Switch side\"),\n      ariaLabel: this.player.translate(\"Switch side\"),\n      name: this.name + \":iconSwitchSide\",\n      click: async () => {\n        this.switchSide(), await this.player.videoContainer.updateLayout(this._fullVideo);\n      }\n    }), u.push({\n      icon: o,\n      position: S.LEFT,\n      title: this.player.translate(\"Maximize video\"),\n      ariaLabel: this.player.translate(\"Maximize video\"),\n      name: this.name + \":iconMaximize\",\n      click: async () => {\n        this.switchSources(), await this.player.videoContainer.updateLayout(this._fullVideo);\n      }\n    })) : this.dualVideoContentIds.length > 0 && u.push({\n      icon: l,\n      position: S.LEFT,\n      title: this.player.translate(\"Set side by side\"),\n      ariaLabel: this.player.translate(\"Set side by side\"),\n      name: this.name + \":iconSideBySide\",\n      click: async () => {\n        const f = this.player.videoContainer.validContentIds, h = this.dualVideoContentIds.find((p) => f.indexOf(p) !== -1);\n        h && this.player.videoContainer.setLayout(h);\n      }\n    }), u;\n  }\n  switchSide() {\n    this._currentLayout.id === \"pip-left\" ? this._currentLayout = Zn : this._currentLayout = vt;\n  }\n  switchSources() {\n    const e = this._pipVideo;\n    this._pipVideo = this._fullVideo, this._fullVideo = e;\n  }\n  getLayoutStructure(e, t, i) {\n    const { content: s } = this.validContent.find((r) => r.id === t);\n    i && s.find((r) => r === i) ? (this._fullVideo = i, this._pipVideo = s.find((r) => r !== i)) : (!this._pipVideo || !this._fullVideo) && (this._pipVideo = s[0], this._fullVideo = s[1]);\n    const a = JSON.parse(JSON.stringify(this._currentLayout));\n    return a.player = this.player, a.videos[0].content = this._fullVideo, a.videos[1].content = this._pipVideo, a;\n  }\n}\nclass Jn extends me {\n  getPluginModuleInstance() {\n    return K.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.singleVideo\";\n  }\n  get identifier() {\n    return \"single-video\";\n  }\n  async load() {\n    this.player.log.debug(\"Single video layout loaded\"), this.dualVideoContentIds = this.config.dualVideoContentIds || [\n      \"presenter-presentation-dynamic\",\n      \"presenter-2-presentation-dynamic\",\n      \"presenter-presenter-2-dynamic\",\n      \"presenter-presentation\",\n      \"presenter-2-presentation\",\n      \"presenter-presenter-2\"\n    ];\n  }\n  getValidStreams(e) {\n    return super.getValidStreams(e).filter((t) => t.length === 1);\n  }\n  getVideoCanvasButtons(e, t, i, s) {\n    return this._multiStream ? [\n      {\n        icon: this.player.getCustomPluginIcon(this.name, \"iconSideBySide\") || Ie,\n        position: S.LEFT,\n        title: this.player.translate(\"Two videos 50%\"),\n        ariaLabel: this.player.translate(\"Two videos 50%\"),\n        name: this.name + \":iconSideBySide\",\n        click: () => {\n          const a = this.player.videoContainer.validContentIds, r = this.dualVideoContentIds.find((o) => a.indexOf(o) !== -1);\n          r && this.player.videoContainer.setLayout(r);\n        }\n      }\n    ] : [];\n  }\n  getLayoutStructure(e, t) {\n    const i = this.validContent.find((a) => a.id === t), s = {\n      player: this.player,\n      name: { es: \"One stream\" },\n      hidden: !1,\n      videos: [\n        {\n          content: i.content[0],\n          rect: [\n            { aspectRatio: \"1/1\", left: 280, top: 0, width: 720, height: 720 },\n            { aspectRatio: \"6/5\", left: 208, top: 0, width: 864, height: 720 },\n            { aspectRatio: \"5/4\", left: 190, top: 0, width: 900, height: 720 },\n            { aspectRatio: \"4/3\", left: 160, top: 0, width: 960, height: 720 },\n            { aspectRatio: \"11/8\", left: 145, top: 0, width: 990, height: 720 },\n            { aspectRatio: \"1.41/1\", left: 132, top: 0, width: 1015, height: 720 },\n            { aspectRatio: \"1.43/1\", left: 125, top: 0, width: 1029, height: 720 },\n            { aspectRatio: \"3/2\", left: 100, top: 0, width: 1080, height: 720 },\n            { aspectRatio: \"16/10\", left: 64, top: 0, width: 1152, height: 720 },\n            { aspectRatio: \"5/3\", left: 40, top: 0, width: 1200, height: 720 },\n            { aspectRatio: \"16/9\", left: 0, top: 0, width: 1280, height: 720 },\n            { aspectRatio: \"1.85/1\", left: 0, top: 14, width: 1280, height: 692 },\n            { aspectRatio: \"2.35/1\", left: 0, top: 87, width: 1280, height: 544 },\n            { aspectRatio: \"2.41/1\", left: 0, top: 94, width: 1280, height: 531 },\n            { aspectRatio: \"2.76/1\", left: 0, top: 128, width: 1280, height: 463 }\n          ],\n          visible: !0,\n          layer: 1\n        }\n      ],\n      background: { content: \"slide_professor_paella.jpg\", zIndex: 5, rect: { left: 0, top: 0, width: 1280, height: 720 }, visible: !0, layer: 0 },\n      logos: [{ content: \"paella_logo.png\", zIndex: 5, rect: { top: 10, left: 10, width: 49, height: 42 } }],\n      buttons: [],\n      onApply: function() {\n      }\n    };\n    return e.length > 1 && (this._multiStream = !0), s;\n  }\n}\nclass Xn extends me {\n  getPluginModuleInstance() {\n    return K.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.singleVideoDynamic\";\n  }\n  get layoutType() {\n    return \"dynamic\";\n  }\n  async load() {\n    this.player.log.debug(\"Single video dynamic layout loaded\"), this.dualVideoContentIds = this.config.dualVideoContentIds || [\n      \"presenter-presentation-dynamic\",\n      \"presenter-2-presentation-dynamic\",\n      \"presenter-presenter-2-dynamic\",\n      \"presenter-presentation\",\n      \"presenter-2-presentation\",\n      \"presenter-presenter-2\"\n    ];\n  }\n  getVideoCanvasButtons(e, t, i, s) {\n    const a = this.player.getCustomPluginIcon(this.name, \"iconSideBySide\") || Ie, r = [];\n    return this._multiStream && r.push({\n      icon: a,\n      position: S.LEFT,\n      title: this.player.translate(\"Dual stream 50%\"),\n      ariaLabel: this.player.translate(\"Dual stream 50%\"),\n      name: this.name + \":iconSideBySide\",\n      click: async () => {\n        const o = this.player.videoContainer.validContentIds, l = this.dualVideoContentIds.find((u) => o.indexOf(u) !== -1);\n        l && this.player.videoContainer.setLayout(l);\n      }\n    }), r;\n  }\n  getLayoutStructure(e, t, i) {\n    e.length > 1 && (this._multiStream = !0);\n    const { content: s } = this.validContent.find((a) => a.id === t);\n    return this._currentContent = s.map((a) => ({\n      id: a,\n      size: 50\n    })), {\n      id: \"single-dynamic\",\n      videos: [\n        {\n          content: this._currentContent[0].id,\n          visible: !0,\n          size: this._currentContent[0].size\n        }\n      ]\n    };\n  }\n}\nconst es = {\n  videos: [\n    {\n      content: {},\n      rect: [\n        { aspectRatio: \"16/9\", left: 239, top: 17, width: 803, height: 451 }\n      ],\n      visible: !0,\n      layer: 1\n    },\n    {\n      content: {},\n      rect: [\n        { aspectRatio: \"16/9\", left: 44, top: 482, width: 389, height: 218 }\n      ],\n      visible: !0,\n      layer: 1\n    },\n    {\n      content: {},\n      rect: [\n        { aspectRatio: \"16/9\", left: 847, top: 482, width: 389, height: 218 }\n      ],\n      visible: !0,\n      layer: 1\n    }\n  ],\n  buttons: [\n    {\n      rect: { left: 618, top: 495, width: 45, height: 45 },\n      onClick: function(n) {\n        this.rotate();\n      },\n      label: \"Rotate\",\n      icon: \"icon_rotate.svg\",\n      layer: 2\n    }\n  ]\n};\nfunction ts(n) {\n  let e = JSON.parse(JSON.stringify(es));\n  return e.videos[0].content = n[0], e.videos[1].content = n[1], e.videos[2].content = n[2], e;\n}\nclass is extends me {\n  getPluginModuleInstance() {\n    return K.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.tripleVideo\";\n  }\n  get identifier() {\n    return \"triple-video\";\n  }\n  async load() {\n    this.player.log.debug(\"Triple video layout loaded\");\n  }\n  getValidStreams(e) {\n    return super.getValidStreams(e).filter((t) => t.length === 3);\n  }\n  switchContent() {\n    const e = this._currentContent[0], t = this._currentContent[1], i = this._currentContent[2];\n    this._currentContent[0] = i, this._currentContent[1] = e, this._currentContent[2] = t, this.player.videoContainer.updateLayout();\n  }\n  getLayoutStructure(e, t) {\n    if (!this._currentContent || this._currentContentId !== t) {\n      this._currentContentId = t;\n      const { content: a } = this.validContent.find((r) => r.id === t);\n      this._currentContent = a;\n    }\n    const i = ts(this._currentContent);\n    return {\n      player: this.player,\n      name: { es: \"Three streams with dynamic position\" },\n      hidden: !1,\n      videos: i.videos,\n      buttons: [\n        {\n          rect: i.buttons[0].rect,\n          onClick: () => {\n            this.switchContent();\n          },\n          label: \"Switch\",\n          icon: li,\n          layer: 2,\n          ariaLabel: \"Swap the position of the videos\",\n          title: \"Swap the position of the videos\"\n        }\n      ]\n    };\n  }\n}\nclass ns extends ri {\n  constructor(e, t) {\n    super(\"div\", e, t), this.element.classList.add(\"image-canvas\");\n  }\n  async loadCanvas(e) {\n    e.element.style.width = \"100%\", e.element.style.height = \"100%\";\n  }\n}\nclass ss extends oi {\n  get name() {\n    return super.name || \"es.upv.paella.audioCanvas\";\n  }\n  get canvasType() {\n    return \"audio\";\n  }\n  getCanvasInstance(e) {\n    return new ns(this.player, e);\n  }\n}\nclass as extends ri {\n  constructor(e, t) {\n    super(\"div\", e, t);\n  }\n  async loadCanvas(e) {\n    e.element.style.width = \"100%\", e.element.style.height = \"100%\";\n  }\n}\nclass rs extends oi {\n  get name() {\n    return super.name || \"es.upv.paella.videoCanvas\";\n  }\n  get canvasType() {\n    return \"video\";\n  }\n  async isCompatible(e) {\n    return !Array.isArray(e.canvas) || e.canvas.length === 0 ? !0 : await super.isCompatible(e);\n  }\n  getCanvasInstance(e) {\n    return new as(this.player, e);\n  }\n}\nclass ci extends he {\n  get type() {\n    return \"data\";\n  }\n  get context() {\n    return this.config.context || [];\n  }\n  async read() {\n    throw Error(`DataPlugin.read() not implemented in data plugin '${this.name}'`);\n  }\n  async write() {\n    throw Error(`DataPlugin.write() not implemented in data plugin '${this.name}'`);\n  }\n  async remove() {\n    throw Error(`DataPlugin.remove() not implemented in data plugin '${this.name}'`);\n  }\n}\nclass os extends de {\n  constructor(e) {\n    super(e), this._dataPlugins = {}, O(this.player, \"data\", async (t) => {\n      var i;\n      (i = t.context) == null || i.forEach((s) => {\n        this._dataPlugins[s] = this._dataPlugins[s] || [], this._dataPlugins[s].push(t);\n      });\n    });\n  }\n  getDataPlugin(e) {\n    let t = this._dataPlugins[e] && this._dataPlugins[e].length > 0 && this._dataPlugins[e][0];\n    if (t || (t = this._dataPlugins.default && this._dataPlugins.default.length > 0 && this._dataPlugins.default[0]), !t)\n      throw Error(`No data plugin found for context '${e}'`);\n    return t;\n  }\n  getDataPlugins(e) {\n    let t = this._dataPlugins[e] && this._dataPlugins[e].length > 0 && this._dataPlugins[e];\n    if (t || (t = this._dataPlugins.default && this._dataPlugins.default.length > 0 && this._dataPlugins.default), !t)\n      throw Error(`No data plugin found for context '${e}'`);\n    return t;\n  }\n  async read(e, t) {\n    return await this.getDataPlugin(e).read(e, t);\n  }\n  async write(e, t, i) {\n    const s = this.getDataPlugins(e);\n    if (Array.isArray(s)) {\n      let a = null;\n      for (let r = 0; r < s.length; ++r)\n        a = await s[r].write(e, t, i);\n      return a;\n    } else {\n      if (s)\n        return await s.write(e, t, i);\n      this.player.log.warn(`No such data plugin found for context '${e}'`);\n    }\n  }\n  async remove(e, t) {\n    const i = this.getDataPlugins(e);\n    if (i.length > 1) {\n      let s = null;\n      for (let a = 0; a < i.length; ++a)\n        s = await i[a].remove(e, t);\n      return s;\n    } else\n      return await i.remove(e, t);\n  }\n}\nlet He = null;\nclass Oe extends Ue {\n  static Get() {\n    return He || (He = new Oe()), He;\n  }\n  get moduleName() {\n    return \"paella-core default data plugins\";\n  }\n  get moduleVersion() {\n    return Te.version;\n  }\n}\nclass ls extends ci {\n  getPluginModuleInstance() {\n    return Oe.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.cookieDataPlugin\";\n  }\n  serializeKey(e, t) {\n    return typeof t == \"object\" && (t = JSON.stringify(t)), `${e}|${t}`;\n  }\n  async read(e, t) {\n    const i = this.serializeKey(e, t);\n    let s = Y(i);\n    try {\n      s = JSON.parse(s);\n    } catch {\n    }\n    return this.player.log.debug(`CookieDataPlugin.read: ${i}`), s;\n  }\n  async write(e, t, i) {\n    const s = this.serializeKey(e, t);\n    if (i && typeof i == \"object\")\n      try {\n        i = JSON.stringify(i);\n      } catch {\n        this.player.log.warn(`CookieDataPlugin.write: ${s}: invalid data object.`), i = \"\";\n      }\n    ne(s, i), this.player.log.debug(`CookieDataPlugin.write: ${s}`);\n  }\n  async remove(e, t) {\n    const i = this.serializeKey(e, t);\n    ne(i, \"\"), this.player.log.debug(`CookieDataPlugin.remove: ${i}`);\n  }\n}\nclass cs extends ci {\n  getPluginModuleInstance() {\n    return Oe.Get();\n  }\n  get name() {\n    return super.name || \"es.upv.paella.localStorageDataPlugin\";\n  }\n  serializeKey(e, t) {\n    return typeof t == \"object\" && (t = JSON.stringify(t)), `${e}|${t}`;\n  }\n  async read(e, t) {\n    const i = this.serializeKey(e, t);\n    let s = localStorage.getItem(i);\n    try {\n      s = JSON.parse(s);\n    } catch {\n    }\n    return this.player.log.debug(`LocalStorageDataPlugin.read: ${i}`), s;\n  }\n  async write(e, t, i) {\n    const s = this.serializeKey(e, t);\n    if (i && typeof i == \"object\")\n      try {\n        i = JSON.stringify(i);\n      } catch {\n        this.player.log.warn(`LocalStorageDataPlugin.write: ${s}: invalid data object.`), i = \"\";\n      }\n    localStorage.setItem(s, i), this.player.log.debug(`LocalStorageDataPlugin.write: ${s}`);\n  }\n  async remove(e, t) {\n    const i = this.serializeKey(e, t);\n    localStorage.setItem(i, \"\"), this.player.log.debug(`LocalStorageDataPlugin.remove: ${i}`);\n  }\n}\nconst us = [\n  {\n    plugin: rn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: on,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: hn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: gn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: yn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: xn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: Nn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: Un,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: _t,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: Yn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: Kn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: Jn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: Xn,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: _t,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: is,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: ss,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: rs,\n    config: {\n      enabled: !1\n    }\n  },\n  {\n    plugin: ls,\n    config: {\n      enabled: !1,\n      context: [\"default\"]\n    }\n  },\n  {\n    plugin: cs,\n    config: {\n      enable: !0,\n      context: [\"default\"]\n    }\n  }\n];\nclass ds extends st {\n  constructor() {\n    super(...arguments), this._refreshContent = !0;\n  }\n  set refreshContent(e) {\n    this._refreshContent = e;\n  }\n  get refreshContent() {\n    return this._refreshContent;\n  }\n  get closeParentPopUp() {\n    return this.config.closeParentPopUp || this.getCloseParentPopUp();\n  }\n  getCloseParentPopUp() {\n    return !1;\n  }\n  async action(e, t) {\n    super.action(e, t), this.parentPopUp = t, await this.showPopUp();\n  }\n  get parentPopUp() {\n    return this._parentPopUp;\n  }\n  set parentPopUp(e) {\n    this._parentPopUp = e;\n  }\n  get popUp() {\n    return this._popUp;\n  }\n  get menuTitle() {\n    return this.config.menuTitle || null;\n  }\n  get moveable() {\n    return this.config.moveable ?? !1;\n  }\n  get resizeable() {\n    return this.config.resizeable ?? !1;\n  }\n  get customPopUpClass() {\n    return this.config.customPopUpClass ?? \"\";\n  }\n  get closeActions() {\n    var i, s;\n    const e = ((i = this.config.closeActions) == null ? void 0 : i.clickOutside) ?? !0, t = ((s = this.config.closeActions) == null ? void 0 : s.closeButton) ?? !1;\n    return {\n      clickOutside: e,\n      closeButton: t\n    };\n  }\n  get currentContent() {\n    return this._currentContent;\n  }\n  async getContent() {\n    return L(\"<p>Pop Up Button Plugin Content</p>\");\n  }\n  async checkRefreshContent() {\n    if (this.refreshContent) {\n      const e = await this.getContent();\n      this._currentContent.innerHTML = \"\", Array.from(e.children).forEach((i) => this._currentContent.appendChild(i));\n    }\n  }\n  get popUpType() {\n    return this.config.popUpType || \"modal\";\n  }\n  hidePopUp() {\n    this.player.playbackBar.popUp.isHidden || this.player.playbackBar.popUp.hide();\n  }\n  async showPopUp() {\n    this._keyEventHandler || (this._keyEventHandler = (t) => {\n      t.key === \"Escape\" && this.hidePopUp();\n    }, this.button.addEventListener(\"keydown\", this._keyEventHandler));\n    const e = this.player.playbackBar.popUp;\n    if (e.isHidden || this._contentId !== e.currentContentId) {\n      const t = await this.getContent();\n      this._currentContent = t, this._contentId = e.show({\n        title: this.menuTitle || this.description,\n        content: t,\n        attachRight: this.popUpType === \"timeline\" || this.side === \"right\",\n        attachLeft: this.popUpType === \"timeline\" || this.side === \"left\",\n        parent: this.parentPopUp\n      });\n    } else\n      e.hide();\n  }\n}\nconst hs = (n) => n ? `<span class=\"menu-title\">${n}</span>` : \"\", ps = (n) => n ? `<i class=\"menu-icon\">${n}</i>` : \"\", gs = (n) => n ? `aria-label=\"${n}\"` : \"\", ms = (n) => n ? `<span class=\"state-text\">${n}</span>` : \"\", fs = (n) => n ? `<i class=\"state-icon\">${n}</i>` : \"\", ys = (n, e) => n || e ? `<span class=\"button-state\">${ms(n)}${fs(e)}</span>` : \"\";\nfunction _s(n, e, t, i, s, a, r) {\n  const { id: o = 0, title: l = null, icon: u = null, showTitle: f = !0, stateText: h = null, stateIcon: p = null } = n, _ = this, C = document.createElement(\"li\"), b = a[o] ?? !1, v = L(`\n\t\t<button class=\"menu-button-item${b ? \" selected\" : \"\"}\" ${gs(l)} data-id=\"${o}\"\" id=\"${_.name}_menuItem_${o}\">\n\t\t\t${ps(u)}\n\t\t\t${f ? hs(l) : \"\"}\n\t\t\t${h || p ? ys(h, p) : \"\"}\n\t\t</button>\n\t`);\n  return r && (r._button = v), v.addEventListener(\"keydown\", (c) => {\n    var P;\n    const y = () => {\n      c.stopPropagation(), c.preventDefault();\n    };\n    if (c.key === \"ArrowUp\") {\n      const g = v.dataPrev;\n      g == null || g.focus(), y();\n    } else if (c.key === \"ArrowDown\") {\n      const g = v.dataNext;\n      g == null || g.focus(), y();\n    } else if (c.key === \"Tab\") {\n      const g = c.shiftKey ? c.target.dataPrev : c.target.dataNext;\n      g == null || g.focus(), y();\n    } else c.key === \"Escape\" && (this.player.playbackBar.popUp.pop() ? (P = _.button) == null || P.focus() : this.focus(), y());\n  }), v.addEventListener(\"click\", async (c) => {\n    var y;\n    if (e === \"check\") {\n      const P = i.find((g) => g.id === o);\n      a[o] = !a[o], _.itemSelected(P, i);\n    } else if (e === \"radio\") {\n      a[o] = !0;\n      let P = null;\n      i.forEach((g) => {\n        g.id === o ? P = g : a[g.id] = !1;\n      }), _.itemSelected(P, i);\n    } else {\n      const P = i.find((g) => g.id === o);\n      _.itemSelected(P, i);\n    }\n    await _.checkRefreshContent(), c.stopPropagation(), _.closeOnSelect && (_.closeMenu(), (y = _.button) == null || y.focus());\n  }), C.appendChild(v), t.appendChild(C), C;\n}\nclass vs extends ds {\n  get closeOnSelect() {\n    return this.config.closeOnSelect === void 0 && (this.buttonType !== \"check\" ? this.config.closeOnSelect = !0 : this.config.closeOnSelect = !1), this.config.closeOnSelect;\n  }\n  setSelected(e, t) {\n    this._selectedItems && (this._selectedItems[e] = t);\n  }\n  async getContent() {\n    var r, o;\n    const e = (r = document.activeElement) == null ? void 0 : r.id, t = L(\"<menu></menu>\");\n    this._content = t;\n    const i = await this.getMenu();\n    this._menuItems = i, this._selectedItems || (this._selectedItems = {}, this._menuItems.forEach((l) => {\n      l.selected !== void 0 && l.selected !== null && (this._selectedItems[l.id] = l.selected);\n    }));\n    const s = self.crypto.randomUUID(), a = i.map((l) => _s.apply(this, [l, typeof this.buttonType == \"function\" ? this.buttonType() : this.buttonType, t, i, s, this._selectedItems, l.plugin]));\n    return a.forEach((l, u, f) => {\n      const h = l.querySelector(\"button\");\n      let p = f[u + 1], _ = f[u - 1];\n      u === f.length - 1 && (p = f[0]), u === 0 && (_ = f[f.length - 1]), h.dataNext = p == null ? void 0 : p.querySelector(\"button\"), h.dataPrev = _ == null ? void 0 : _.querySelector(\"button\");\n    }), this._firstItem = (o = a[0]) == null ? void 0 : o.querySelector(\"button\"), e && setTimeout(() => {\n      var l;\n      (l = document.getElementById(e)) == null || l.focus();\n    }, 10), t;\n  }\n  get menuTitle() {\n    return this.config.menuTitle || null;\n  }\n  async getMenu() {\n    return [\n      { id: 0, title: \"Option 1\" },\n      { id: 1, title: \"Option 2\" },\n      { id: 2, title: \"Option 3\" },\n      { id: 3, title: \"Option 4\" },\n      { id: 4, title: \"Option 5\" }\n    ];\n  }\n  // Returns the menuItems with the current menu state\n  get menuItems() {\n    return this._menuItems;\n  }\n  // If showTitles is false, then the 'title' attribute of the menu\n  // items is used only as aria-label.\n  // If the menu item has no icon, then the `showTitles` property is ignored\n  get showTitles() {\n    return !0;\n  }\n  get buttonType() {\n    return \"radio\";\n  }\n  itemSelected(e, t) {\n    this.player.log.warn(`MenuButtonPlugin (${this.name}): itemSelected() function not implemented.`);\n  }\n  closeMenu() {\n    this.player.playbackBar.popUp.hide();\n  }\n  async showPopUp() {\n    this.refreshContent = !0, await super.showPopUp(), this.player.containsFocus && this._firstItem && this._firstItem.focus();\n  }\n}\nclass ws extends vs {\n  get closeOnSelect() {\n    return this.config.closeOnSelect ?? !1;\n  }\n  async load() {\n    this._iconPath && (this.icon = await Et(this._iconPath));\n  }\n  async getContent() {\n    return this._buttonPlugins || (this._buttonPlugins = [], await O(this.player, \"button\", async (e) => {\n      this.player.log.debug(`Load button plugins into \"${this.groupName}\" container`), this._buttonPlugins.push(e), e.setObserver(this);\n    }, async (e) => e.parentContainer === this.groupName ? await e.isEnabled() : !1)), await super.getContent();\n  }\n  onIconChanged(e, t, i) {\n  }\n  onTitleChanged(e, t, i) {\n  }\n  onStateChanged(e, t, i, s, a) {\n  }\n  get groupName() {\n    var e;\n    return ((e = this.config) == null ? void 0 : e.groupName) || \"buttonGroup\";\n  }\n  get popUpType() {\n    return \"no-modal\";\n  }\n  getClosePopUps() {\n    return !1;\n  }\n  buttonType() {\n    return \"button\";\n  }\n  async getMenu() {\n    return this._buttonPlugins.map((e) => ({\n      id: e.name,\n      title: e.title || e.description,\n      icon: e.icon,\n      plugin: e\n    }));\n  }\n  itemSelected(e, t) {\n    const i = this._buttonPlugins.find((s) => s.name === e.id);\n    if (i) {\n      const s = new Event(\"menuitemselected\");\n      i.action(s, this.currentContent);\n    }\n  }\n  async showPopUp() {\n    var e;\n    await super.showPopUp(), setTimeout(() => {\n      this._firstItem && this._firstItem.focus();\n    }, 50), (e = this.buttons) == null || e.forEach((t) => {\n      t.style.display === \"none\" ? this.hideButtonContainer(t) : this.showButtonContainer(t);\n    });\n  }\n  get buttons() {\n    return this._content && Array.from(this._content.getElementsByClassName(\"button-plugin\"));\n  }\n  hideButtonContainer(e) {\n    var i;\n    const t = (i = e.parentNode) == null ? void 0 : i.parentNode;\n    t && (t.style.display = \"none\");\n  }\n  showButtonContainer(e) {\n    var i;\n    const t = (i = e.parentNode) == null ? void 0 : i.parentNode;\n    t && (t.style.display = null);\n  }\n}\nconst lt = (n, e, t, i = {}) => {\n  const s = new n(e, t);\n  return t = s.name || t, t ? (e.config.plugins && e.config.plugins[t] && we(i, e.config.plugins[t], !1), s._config = i, s) : (e.log.warn(`The instance of the ${n.name} plugin cannot be created because it is being loaded explicitly and does not have the name property implemented.`), null);\n};\nfunction ct(n, e, t, i, s = !1) {\n  const a = t.type;\n  let r = -1;\n  if (n.__pluginData__.pluginInstances[a] && n.__pluginData__.pluginInstances[a].find((l, u) => {\n    if (l.name === t.name)\n      return r = u, !0;\n  }) && !s) {\n    n.log.info(`Plugin ${t.name} of type ${a} already registered.`);\n    return;\n  }\n  n.__pluginData__.pluginClasses[e] = i, n.__pluginData__.pluginInstances[a] = n.__pluginData__.pluginInstances[a] || [], r !== -1 && n.__pluginData__.pluginInstances[a].splice(r, 1), n.__pluginData__.pluginInstances[a].push(t), n.__pluginModules = n.__pluginModules || [];\n  const o = t.getPluginModuleInstance();\n  if (o && (o._player = o._player || n, !n.__pluginModules.find((l) => l.constructor.name === o.constructor.name))) {\n    const l = o.moduleName, u = o.moduleVersion;\n    n.log.debug(`Plugin module imported: ${l}: v${u}`), n.__pluginModules.push(o);\n  }\n}\nfunction Cs(n, e) {\n  let t = null, i = { enabled: !0 };\n  if (typeof e == \"function\" ? t = e : typeof e == \"object\" && typeof e.plugin == \"function\" && (t = e.plugin, i = e.config), !t)\n    n.log.warn(\"Error importing plugin with explicit import API. Check the 'plugins' array at init params\");\n  else {\n    const s = lt(t, n, null, i);\n    if (!s)\n      n.log.warn(`Unable to create an instance of the plugin ${t.name}`);\n    else {\n      const a = s.constructor.name;\n      ct(n, a, s, t, !0);\n    }\n  }\n}\nfunction ca(n, e) {\n  const t = n.config;\n  e.keys().forEach((i) => {\n    const s = e(i), a = i.substring(2, i.length - 3);\n    if (t.plugins[a]) {\n      const r = s.default, o = lt(r, n, a, {});\n      ct(n, i, o, r, !1);\n    } else if (/^[a-z0-9]+$/i.test(a)) {\n      n.__pluginModules = n.__pluginModules || [];\n      const r = s.default, o = new r(n);\n      if (!n.__pluginModules.find((l) => l.constructor.name === o.constructor.name)) {\n        const l = o.moduleName, u = o.moduleVersion;\n        n.log.debug(`Plugin module imported: ${l}: v${u}`), n.__pluginModules.push(o);\n      }\n    }\n  });\n}\nfunction bs(n) {\n  const e = n.config;\n  if (n.__pluginData__ = n.__pluginData__ || {\n    pluginClasses: [],\n    pluginInstances: {}\n  }, n.__pluginData__.pluginClasses.length !== 0) return;\n  [\n    ...us,\n    ...n.initParams.plugins\n  ].forEach((i) => {\n    Cs(n, i);\n  });\n  const { buttonGroups: t } = e;\n  t && t.forEach((i, s) => {\n    const a = `button_group_${s}`, r = lt(ws, n, a, i);\n    r._iconPath = B([n.configResourcesUrl, i.icon]), ct(n, r.type, r, `ButtonGroupPlugin${s}`, !1);\n  }), n.log.debug(\"Plugins have been registered:\");\n}\nfunction Ls(n) {\n  delete n.__pluginData__;\n}\nfunction ui(n, e) {\n  var t;\n  return ((t = n.__pluginData__) == null ? void 0 : t.pluginInstances[e]) || [];\n}\nasync function O(n, e, t = null, i = null) {\n  if (!n.__pluginData__.pluginInstances[e]) {\n    n.log.info(`There are no defined plugins of type '${e}'`);\n    return;\n  }\n  n.__pluginData__.pluginInstances[e].sort((s, a) => s.order - a.order), n.__pluginData__.pluginInstances[e].forEach((s) => n.log.debug(`type: ${e}, name: ${s.name}`)), typeof i != \"function\" && (i = async function(s) {\n    return await s.isEnabled();\n  });\n  for (const s in n.__pluginData__.pluginInstances[e]) {\n    const a = n.__pluginData__.pluginInstances[e][s];\n    if (await i(a)) {\n      if (a.__uiPlugin) {\n        const o = await a.getDictionaries();\n        if (typeof o == \"object\")\n          for (const l in o) {\n            const u = o[l];\n            n.addDictionary(l, u);\n          }\n      }\n      typeof t == \"function\" && await t(a), await a.load();\n    }\n  }\n}\nasync function di(n, e) {\n  var t;\n  (t = n.__pluginData__.pluginInstances[e]) == null || t.forEach(async (i) => {\n    await i.unload();\n  });\n}\nfunction Ps(n) {\n  var t;\n  const e = (i, s) => {\n    if (!i)\n      throw new Error(`Invalid video manifest: ${s}`);\n  };\n  e(n.streams, \"missing 'streams' object.\"), e(n.streams.length > 0, \"the 'streams' array is empty.\"), e((t = n.metadata) == null ? void 0 : t.preview, \"the 'metadata.preview' field is required.\");\n}\nclass Es extends de {\n  constructor(e, t) {\n    super(e, t), this._videoContainer = t, this._streamData = null, this._streams = null, this._players = [], this._mainAudioPlayer = null, this._streamSyncTimer = null, this._trimming = {\n      enabled: !1,\n      start: 100,\n      end: 200\n    };\n  }\n  async load(e) {\n    this._streamData = e, this._streams = {};\n    let t = this.player.config.defaultAudioStream || \"presenter\";\n    this._streamData.length === 1 && (t = this._streamData[0].content), e.some((i) => {\n      if (i.role === \"mainAudio\")\n        return t = i.content, !0;\n    }), this.player.log.debug(\"Finding compatible video plugins\"), await Gn(this.player);\n    for (const i of this._streamData) {\n      const s = Hn(this.player, i);\n      if (!s)\n        throw Error(`Canvas plugin not found: ${i.canvas}`);\n      const a = i.content === t, r = await Ui(this.player, i);\n      if (!r)\n        throw Error(`Incompatible stream type: ${i.content}`);\n      this._streams[i.content] = {\n        stream: i,\n        isMainAudio: a,\n        videoPlugin: r,\n        canvasPlugin: s\n      };\n    }\n    for (const i in this._streams) {\n      const s = this._streams[i];\n      s.canvas = await s.canvasPlugin.getCanvasInstance(this._videoContainer), s.player = await s.videoPlugin.getVideoInstance(s.canvas.element, s.isMainAudio), t === i ? (this._mainAudioPlayer = s.player, s.player.initVolume(1)) : s.player.initVolume(0), await s.player.load(s.stream, this), await s.canvas.loadCanvas(s.player), s.player.onVideoEnded(() => {\n        this.executeAction(\"pause\"), this.executeAction(\"setCurrentTime\", 0), se(this.player, m.ENDED);\n      }), this._players.push(s.player);\n    }\n    if (this.mainAudioPlayer === null)\n      throw this.player.log.error(\"The video stream containing the audio track could not be identified. The `role` attribute must be specified in the main video stream, or the `defaultAudioStream` attribute must be set correctly in the player configuration.\"), new Error(\"The video stream containing the audio track could not be identified.\");\n  }\n  async unload() {\n    this.stopStreamSync(), await zn(this.player);\n  }\n  get players() {\n    return this._players;\n  }\n  // This is the raw streamData loaded from the video manifest\n  get streamData() {\n    return this._streamData;\n  }\n  // This property stores the available streams, indexed by the content identifier, and contains the\n  // stream data, the video plugin and the player, for each content identifier.\n  get streams() {\n    return this._streams;\n  }\n  get mainAudioPlayer() {\n    return this._mainAudioPlayer;\n  }\n  get isTrimEnabled() {\n    var e, t, i;\n    return ((e = this._trimming) == null ? void 0 : e.enabled) && ((t = this._trimming) == null ? void 0 : t.end) > ((i = this._trimming) == null ? void 0 : i.start);\n  }\n  get trimStart() {\n    var e;\n    return (e = this._trimming) == null ? void 0 : e.start;\n  }\n  get trimEnd() {\n    var e;\n    return (e = this._trimming) == null ? void 0 : e.end;\n  }\n  async setTrimming({ enabled: e, start: t, end: i }) {\n    if (t >= i)\n      throw Error(`Error setting trimming: start time (${t}) must be lower than end time ${i}`);\n    this._trimming = {\n      enabled: e,\n      start: t,\n      end: i\n    };\n    const s = await this.currentTime();\n    se(this.player, m.TIMEUPDATE, { currentTime: e ? t + s : s });\n  }\n  startStreamSync() {\n    this._timeSync = !0;\n    const e = async () => {\n      if (!this._players.length) {\n        this.player.log.warn(\"Player not yet loaded. Waiting for video sync.\");\n        return;\n      }\n      let t = this.mainAudioPlayer.currentTimeSync;\n      const i = 0.2;\n      if (this.players.length > 1)\n        for (let s = 0; s < this.players.length; ++s) {\n          const a = this.players[s];\n          if (a !== this.mainAudioPlayer) {\n            const r = a.currentTimeSync;\n            Math.abs(t - r) > i && (this.player.log.debug(\"Video synchronization triggered\"), a.setCurrentTime(t));\n          }\n        }\n      if (this.isTrimEnabled) {\n        let s = t - this.trimStart;\n        if (this.trimEnd <= t) {\n          await this.executeAction(\"pause\"), await this.setCurrentTime(0), this.stopStreamSync(), t = 0, se(this.player, m.ENDED, {});\n          return;\n        } else t < this.trimStart && (await this.setCurrentTime(0), t = this.trimStart, s = 0);\n        se(this.player, m.TIMEUPDATE, { currentTime: s }), this._timeupdateTimer = setTimeout(() => {\n          this._timeSync && e();\n        }, 250);\n      } else this._timeSync && (se(this.player, m.TIMEUPDATE, { currentTime: t }), this._timeupdateTimer = setTimeout(() => {\n        e();\n      }, 250));\n    };\n    e();\n  }\n  stopStreamSync() {\n    this._timeSync = !1, this._timeupdateTimer && clearTimeout(this._timeupdateTimer);\n  }\n  executeAction(e, t = []) {\n    return Array.isArray(t) || (t = [t]), new Promise((i) => {\n      let s = [], a = [];\n      this.players.forEach((r) => {\n        a.push(new Promise((o) => {\n          r[e](...t).then((l) => {\n            s.push(l), o();\n          });\n        }));\n      }), Promise.allSettled(a).then(() => i(s));\n    });\n  }\n  get isLiveStream() {\n    return this._streamData.some((e) => Array.from(Object.keys(e.sources)).indexOf(\"hlsLive\") !== -1);\n  }\n  async play() {\n    return this.startStreamSync(), await this.executeAction(\"play\");\n  }\n  async pause() {\n    return this.stopStreamSync(), await this.executeAction(\"pause\");\n  }\n  async stop() {\n    this.stopStreamSync(), await this.executeAction(\"pause\"), await this.executeAction(\"setCurrentTime\", 0);\n  }\n  async paused() {\n    return (await this.executeAction(\"paused\"))[0];\n  }\n  async setCurrentTime(e) {\n    const t = await this.duration();\n    e < 0 ? e = 0 : e > t && (e = t);\n    const i = (await this.executeAction(\"currentTime\"))[0];\n    let s = null;\n    if (this.isTrimEnabled) {\n      e = e + this.trimStart, e = e >= this.trimEnd ? this.trimEnd : e;\n      const r = (await this.executeAction(\"setCurrentTime\", [e]))[0], o = (await this.executeAction(\"currentTime\"))[0];\n      s = {\n        result: r,\n        prevTime: i - this.trimStart,\n        newTime: o - this.trimStart\n      };\n    } else {\n      const r = (await this.executeAction(\"setCurrentTime\", [e]))[0], o = (await this.executeAction(\"currentTime\"))[0];\n      s = { result: r, prevTime: i, newTime: o };\n    }\n    const a = await this.currentTime();\n    return se(this.player, m.TIMEUPDATE, { currentTime: a }), s;\n  }\n  async currentTime() {\n    const e = await this.mainAudioPlayer.currentTime();\n    return this.isTrimEnabled ? e - this.trimStart : e;\n  }\n  async currentTimeIgnoringTrimming() {\n    return await this.mainAudioPlayer.currentTime();\n  }\n  async volume() {\n    return this.mainAudioPlayer ? await this.mainAudioPlayer.volume() : (await this.executeAction(\"volume\"))[0];\n  }\n  async setVolume(e) {\n    return this.mainAudioPlayer ? await this.mainAudioPlayer.setVolume(e) : (await this.executeAction(\"setVolume\", [e]))[0];\n  }\n  async duration() {\n    return this.isTrimEnabled ? this.trimEnd - this.trimStart : await this.durationIgnoringTrimming();\n  }\n  async durationIgnoringTrimming() {\n    return (await this.executeAction(\"duration\")).reduce((t, i) => Math.min(t, i), Number.MAX_VALUE);\n  }\n  async playbackRate() {\n    return (await this.executeAction(\"playbackRate\"))[0];\n  }\n  async setPlaybackRate(e) {\n    return (await this.executeAction(\"setPlaybackRate\", [e]))[0];\n  }\n  async getQualityReferencePlayer() {\n    let e = null, t = [];\n    if (Object.keys(this.streams).length > 0)\n      for (const i in this.streams) {\n        const s = this.streams[i], a = await s.player.getQualities() || [];\n        !e && a.length > t.length && (t = a, e = s.player);\n      }\n    return e || this.mainAudioPlayer;\n  }\n  async getCurrentQuality() {\n    return (await this.getQualityReferencePlayer()).currentQuality;\n  }\n  async getQualities() {\n    return await (await this.getQualityReferencePlayer()).getQualities();\n  }\n  async setQuality(e) {\n    const i = await (await this.getQualityReferencePlayer()).getQualities(), s = i.length;\n    let a = -1;\n    if (i.some((r, o) => (e.index === r.index && (a = o), a !== -1)), a >= 0) {\n      const r = a / s;\n      for (const o in this.streams) {\n        const l = this.streams[o], u = await l.player.getQualities() || [];\n        if (this.player.log.debug(u), u.length > 1) {\n          const f = Math.round(u.length * r), h = u[f];\n          await l.player.setQuality(h);\n        }\n      }\n    }\n  }\n  async supportsMultiaudio() {\n    return this.mainAudioPlayer.supportsMultiaudio();\n  }\n  async getAudioTracks() {\n    return this.mainAudioPlayer.getAudioTracks();\n  }\n  async setCurrentAudioTrack(e) {\n    return this.mainAudioPlayer.setCurrentAudioTrack(e);\n  }\n  get currentAudioTrack() {\n    return this.mainAudioPlayer.currentAudioTrack;\n  }\n}\nconst N = Object.freeze({\n  TOP_LEFT: \"topLeft\",\n  TOP_MIDDLE: \"topMiddle\",\n  TOP_RIGHT: \"topRight\",\n  CENTER_LEFT: \"centerLeft\",\n  CENTER_MIDDLE: \"centerMiddle\",\n  CENTER_RIGHT: \"centerRight\",\n  BOTTOM_LEFT: \"bottomLeft\",\n  BOTTOM_MIDDLE: \"bottomMiddle\",\n  BOTTOM_RIGHT: \"bottomRight\"\n}), $ = (n, e, t, i, s) => {\n  i = i || \"\", t = t || 1e3;\n  const a = L(`\n        <div class=\"message-content ${i}\">\n            ${n ? `<i class=\"icon\">${n}</i>` : \"\"}\n            ${e ? `<p class=\"text\">${e}</p>` : \"\"}\n        </div>\n    `);\n  return s.innerHTML = \"\", s.appendChild(a), s.timer && (clearTimeout(s.timer), s.timer = null), s.timer = setTimeout(() => {\n    s.removeChild(a);\n  }, t), a;\n};\nclass Ss extends G {\n  constructor(e, t) {\n    const i = { class: \"video-container-message\" };\n    super(e, { attributes: i, parent: t }), this._topLeftContainer = L('<div class=\"container top-left\"></div>', this.element), this._topMiddleContainer = L('<div class=\"container top-middle\"></div>', this.element), this._topRightContainer = L('<div class=\"container top-right\"></div>', this.element), this._centerLeftContainer = L('<div class=\"container center-left\"></div>', this.element), this._centerMiddleContainer = L('<div class=\"container center-middle\"></div>', this.element), this._centerRightContainer = L('<div class=\"container center-right\"></div>', this.element), this._bottomLeftContainer = L('<div class=\"container bottom-left\"></div>', this.element), this._bottomMiddleContainer = L('<div class=\"container bottom-middle\"></div>', this.element), this._bottomRightContainer = L('<div class=\"container bottom-right\"></div>', this.element);\n  }\n  show({ icon: e = null, text: t = \"\", timeout: i = 1e3, position: s = N.CENTER_MIDDLE, cssClass: a = \"\" }) {\n    switch (s) {\n      case N.TOP_LEFT:\n        $.apply(this, [e, t, i, a, this._topLeftContainer]);\n        break;\n      case N.TOP_MIDDLE:\n        $.apply(this, [e, t, i, a, this._topMiddleContainer]);\n        break;\n      case N.TOP_RIGHT:\n        $.apply(this, [e, t, i, a, this._topRightContainer]);\n        break;\n      case N.CENTER_LEFT:\n        $.apply(this, [e, t, i, a, this._centerLeftContainer]);\n        break;\n      case N.CENTER_MIDDLE:\n        $.apply(this, [e, t, i, a, this._centerMiddleContainer]);\n        break;\n      case N.CENTER_RIGHT:\n        $.apply(this, [e, t, i, a, this._centerRightContainer]);\n        break;\n      case N.BOTTOM_LEFT:\n        $.apply(this, [e, t, i, a, this._bottomLeftContainer]);\n        break;\n      case N.BOTTOM_MIDDLE:\n        $.apply(this, [e, t, i, a, this._bottomMiddleContainer]);\n        break;\n      case N.BOTTOM_RIGHT:\n        $.apply(this, [e, t, i, a, this._bottomRightContainer]);\n        break;\n    }\n  }\n}\nconst w = Object.freeze({\n  UNLOADED: 0,\n  LOADING_MANIFEST: 1,\n  MANIFEST: 2,\n  LOADING_PLAYER: 3,\n  LOADED: 4,\n  UNLOADING_MANIFEST: 5,\n  UNLOADING_PLAYER: 6,\n  ERROR: 7\n});\nfunction Ts(n, e) {\n  return Array.isArray[e] || (e = [e]), Ni(n, e).getManifestData(e);\n}\nasync function Is(n) {\n  return { w: 1280, h: 720 };\n}\nasync function hi(n) {\n  var e;\n  for (const t in this.streamProvider.streams) {\n    const i = ((e = n == null ? void 0 : n.videos) == null ? void 0 : e.find((a) => a.content === t)) != null, s = this.streamProvider.streams[t];\n    i && !s.player.isEnabled ? await s.player.enable() : !i && s.player.isEnabled && await s.player.disable();\n  }\n}\nfunction pi() {\n  for (const n in this.streamProvider.streams) {\n    const e = this.streamProvider.streams[n];\n    e.canvas.element.style.display = \"none\", this._hiddenVideos.appendChild(e.canvas.element);\n  }\n}\nasync function ks() {\n  var a, r;\n  const n = ai(this.player, this.streamProvider.streamData, this._layoutId, this._mainLayoutContent);\n  await hi.apply(this, [n]), pi.apply(this);\n  const e = await Is(this.player), t = 100 / e.w, i = 100 / e.h;\n  if (this.baseVideoRect.classList.remove(\"dynamic\"), this.baseVideoRect.classList.add(\"static\"), (a = n == null ? void 0 : n.videos) != null && a.length) {\n    const o = [];\n    for (const l of n.videos) {\n      const u = this.streamProvider.streams[l.content], { stream: f, player: h, canvas: p } = u, _ = await h.getDimensions(), C = _.w / _.h;\n      let b = Number.MAX_VALUE, v = null;\n      p.buttonsArea.innerHTML = \"\", o.push(await Ye(this.player, n, p, l, l.content)), l.rect.forEach((c) => {\n        const y = /^(\\d+.?\\d*)\\/(\\d+.?\\d*)$/.exec(c.aspectRatio), P = y ? Number(y[1]) / Number(y[2]) : 1, g = Math.abs(C - P);\n        g < b && (v = c, b = g);\n      }), p.element.style.display = \"block\", p.element.style.position = \"absolute\", p.element.style.left = `${(v == null ? void 0 : v.left) * t}%`, p.element.style.top = `${(v == null ? void 0 : v.top) * i}%`, p.element.style.width = `${(v == null ? void 0 : v.width) * t}%`, p.element.style.height = `${(v == null ? void 0 : v.height) * i}%`, p.element.style.zIndex = l.layer, this.baseVideoRect.appendChild(p.element);\n    }\n    setTimeout(() => {\n      Ze(this.player, n, o.flat());\n    }, 100);\n  }\n  const s = this.baseVideoRect.getElementsByClassName(\"video-layout-button\");\n  return Array.from(s).forEach((o) => this.baseVideoRect.removeChild(o)), (r = n == null ? void 0 : n.buttons) == null || r.forEach((o) => {\n    const l = Ut({\n      tag: \"button\",\n      attributes: {\n        class: \"video-layout-button\",\n        \"aria-label\": Ce(o.ariaLabel),\n        title: Ce(o.title),\n        style: `\n                    left: ${o.rect.left * t}%;\n                    top: ${o.rect.top * i}%;\n                    width: ${o.rect.width * t}%;\n                    height: ${o.rect.height * i}%;\n                    z-index: ${o.layer};\n                `\n      },\n      parent: this.baseVideoRect,\n      children: o.icon\n    });\n    l.layout = n, l.buttonAction = o.onClick, l.addEventListener(\"click\", async (u) => {\n      E(this.player, m.BUTTON_PRESS, {\n        plugin: n.plugin,\n        layoutStructure: n\n      }), await u.target.buttonAction.apply(u.target.layout), u.stopPropagation();\n    }), this._layoutButtons.push(l);\n  }), !0;\n}\nasync function Ds() {\n  var r, o, l, u, f, h;\n  const n = ai(this.player, this.streamProvider.streamData, this._layoutId, this._mainLayoutContent);\n  await hi.apply(this, [n]), pi.apply(this), this.baseVideoRect.classList.add(\"dynamic\"), this.baseVideoRect.classList.remove(\"static\"), this.baseVideoRect.innerHTML = \"\";\n  const e = this.element.clientWidth, t = this.element.clientHeight, i = e > t;\n  if (this.baseVideoRect.classList.remove(\"align-center\"), this.baseVideoRect.classList.remove(\"align-top\"), this.baseVideoRect.classList.remove(\"align-bottom\"), this.baseVideoRect.classList.remove(\"align-left\"), this.baseVideoRect.classList.remove(\"align-right\"), i) {\n    const p = ((o = (r = this.player.config.videoContainer) == null ? void 0 : r.dynamicLayout) == null ? void 0 : o.landscapeVerticalAlignment) || \"align-center\";\n    this.baseVideoRect.classList.remove(\"portrait\"), this.baseVideoRect.classList.add(\"landscape\"), this.baseVideoRect.classList.add(p);\n  } else {\n    const p = ((u = (l = this.player.config.videoContainer) == null ? void 0 : l.dynamicLayout) == null ? void 0 : u.portraitHorizontalAlignment) || \"align-center\";\n    this.baseVideoRect.classList.add(\"portrait\"), this.baseVideoRect.classList.remove(\"landscape\"), this.baseVideoRect.classList.add(p);\n  }\n  const s = this.baseVideoRect.clientWidth, a = this.element.clientHeight;\n  if (((f = n == null ? void 0 : n.videos) == null ? void 0 : f.length) === 1) {\n    const p = [], _ = [], C = n.videos[0], b = this.streamProvider.streams[C.content], { player: v, canvas: c } = b;\n    c.buttonsArea.innerHTML = \"\", _.push(await Ye(this.player, n, c, C, C.content)), c.element.style = {}, c.element.style.display = \"block\", c.element.style.width = \"100%\", c.element.style.height = \"100%\", c.element.style.overflow = \"hidden\", c.element.style.position = \"relative\", p.push(c.element), c.element.sortIndex = 0, p.forEach((y) => this.baseVideoRect.appendChild(y)), setTimeout(() => {\n      Ze(this.player, n, _.flat());\n    }, 100);\n  } else if ((h = n == null ? void 0 : n.videos) != null && h.length) {\n    let p = 0;\n    const _ = [], C = [];\n    for (const b of n.videos) {\n      const v = this.streamProvider.streams[b.content], { player: c, canvas: y } = v, P = await c.getDimensions(), g = P.w / P.h, z = s, J = a, H = (i ? z : J) * b.size / 100;\n      let j = Math.round(i ? H : H * g), V = Math.round(i ? H / g : H);\n      j > z && (j = z, V = Math.round(j / g)), V > J && (V = J, j = Math.round(V * g)), y.buttonsArea.innerHTML = \"\", C.push(await Ye(this.player, n, y, b, b.content)), y.element.style = {}, y.element.style.display = \"block\", y.element.style.width = `${j}px`, y.element.style.height = `${V}px`, y.element.style.overflow = \"hidden\", y.element.style.position = \"relative\", y.element.sortIndex = p++, _.push(y.element);\n    }\n    if (i) {\n      const b = L('<div class=\"landscape-container\"></div>', this.baseVideoRect);\n      _.forEach((v) => b.appendChild(v));\n    } else\n      _.forEach((b) => this.baseVideoRect.appendChild(b));\n    setTimeout(() => {\n      Ze(this.player, n, C.flat());\n    }, 100);\n  }\n  return !0;\n}\nclass xs extends G {\n  constructor(e, t) {\n    var r;\n    const i = \"base-video-rect\", s = {\n      class: \"video-container\"\n    };\n    (r = e.config.videoContainer) != null && r.overPlaybackBar && (s.class += \" over-playback-bar\");\n    const a = `\n            <div class=\"${i}\"></div>\n            <div class=\"hidden-videos-container\" style=\"display: none\"></div>\n        `;\n    super(e, { attributes: s, children: a, parent: t }), this._hiddenVideos = this.element.getElementsByClassName(\"hidden-videos-container\")[0], this._baseVideoRect = this.element.getElementsByClassName(i)[0], this.element.addEventListener(\"click\", async () => {\n      await this.paused() ? await this.play() : await this.pause();\n    }), this._ready = !1, this._players = [], this._streamProvider = new Es(this.player, this.baseVideoRect);\n  }\n  get layoutId() {\n    return this._layoutId;\n  }\n  get mainLayoutContent() {\n    return this._mainLayoutContent;\n  }\n  async setLayout(e, t = null) {\n    var i, s;\n    if (this.validContentIds.indexOf(e) === -1)\n      return !1;\n    {\n      const a = (s = (i = this.player.config.videoContainer) == null ? void 0 : i.restoreVideoLayout) == null ? void 0 : s.global;\n      await this.player.preferences.set(\"videoLayout\", e, { global: a }), await this.player.preferences.set(\"videoLayoutMainContent\", t, { global: a });\n      const r = this._layoutId;\n      this._layoutId = e, this._mainLayoutContent = t, await this.updateLayout(), r !== e && E(this.player, m.LAYOUT_CHANGED, { prevLayout: r, layoutId: e });\n    }\n  }\n  get validContentIds() {\n    return this._validContentIds;\n  }\n  get validContentSettings() {\n    return this._validContentSettings;\n  }\n  get validLayouts() {\n    return Fe(this.player, this.streamData);\n  }\n  get streamData() {\n    return this._streamData;\n  }\n  get baseVideoRect() {\n    return this._baseVideoRect;\n  }\n  get streamProvider() {\n    return this._streamProvider;\n  }\n  async create() {\n    this._baseVideoRect.style.display = \"none\", await O(this.player, \"layout\"), await Ri(this.player);\n  }\n  async load(e) {\n    var o, l, u, f, h, p, _, C, b, v;\n    if (this._streamData = e, (l = (o = this.player.config.videoContainer) == null ? void 0 : o.restoreVideoLayout) != null && l.enabled) {\n      const c = (f = (u = this.player.config.videoContainer) == null ? void 0 : u.restoreVideoLayout) == null ? void 0 : f.global;\n      this._layoutId = await this.player.preferences.get(\"videoLayout\", { global: c }) || this.player.config.defaultLayout, this._mainLayoutContent = await this.player.preferences.get(\"videoLayoutMainContent\", { global: c }) || null;\n    } else\n      this._layoutId = this.player.config.defaultLayout, this._mainLayoutContent = null;\n    await this.streamProvider.load(e), this._validContentIds = ni(this.player, e), this._validContentSettings = On(this.player, e), await this.updateLayout(null, !0);\n    const t = L(\n      '<div class=\"button-plugins left-side\"></div>',\n      this.element\n    ), i = L(\n      '<div class=\"button-plugins right-side\"></div>',\n      this.element\n    );\n    this._buttonPlugins = [t, i], this.player.log.debug(\"Loading videoContainer button plugins\"), await O(this.player, \"button\", async (c) => {\n      this.player.log.debug(` Button plugin: ${c.name}`), c.side === \"left\" ? await Re(c, t) : c.side === \"right\" && await Re(c, i);\n    }, async (c) => c.parentContainer === \"videoContainer\" ? await c.isEnabled() : !1), this._baseVideoRect.style.display = \"\";\n    const s = await this.player.preferences.get(\"volume\", { global: !0 }), a = await this.player.preferences.get(\"playbackRate\", { global: !0 }), r = await this.player.preferences.get(\"lastKnownTime\", { global: !1 });\n    if ((h = this.player.config.videoContainer) != null && h.restoreVolume && s !== null && s !== void 0 && await this.streamProvider.setVolume(s), (p = this.player.config.videoContainer) != null && p.restorePlaybackRate && a !== null && a !== void 0 && await this.streamProvider.setPlaybackRate(a), this.player.videoManifest.trimming && await this.player.videoContainer.setTrimming(this.player.videoManifest.trimming), (C = (_ = this.player.config.videoContainer) == null ? void 0 : _.restoreLastTime) != null && C.enabled && !this.streamProvider.isLiveStream) {\n      const c = async () => {\n        if (!await this.paused()) {\n          const P = await this.currentTime();\n          await this.player.preferences.set(\"lastKnownTime\", P, { global: !1 });\n        }\n        setTimeout(c, 1e3);\n      };\n      if (r) {\n        const y = await this.player.preferences.get(\"lastKnownTime\", { global: !1 }), P = await this.duration(), g = (v = (b = this.player.config.videoContainer) == null ? void 0 : b.restoreLastTime) == null ? void 0 : v.remainingSeconds;\n        P - y > g && await this.setCurrentTime(y);\n      }\n      c();\n    }\n    this._messageContainer = new Ss(this.player, this.element), this._ready = !0;\n  }\n  async unload() {\n    this.removeFromParent(), await di(this.player, \"layout\"), await Vi(this.player), await this.streamProvider.unload();\n  }\n  // Return true if the layout this.layoutId is compatible with the current stream data.\n  async updateLayout(e = null) {\n    const t = arguments[1];\n    if (e && (this._mainLayoutContent = e), !t && this.player.state !== w.LOADED)\n      return;\n    if (this._updateInProgress)\n      return this.player.log.warn(\"Recursive update layout detected\"), !1;\n    this._updateInProgress = !0;\n    let i = !0;\n    this._layoutButtons = [], (!this._layoutId || this._validContentIds.indexOf(this._layoutId) === -1) && (this._layoutId = this.player.config.defaultLayout, this._mainLayoutContent = null, this._validContentIds.indexOf(this._layoutId) === -1 && (this._layoutId = this._validContentIds[0]), i = !1);\n    const s = si(this.player, this.streamProvider.streamData, this._layoutId);\n    return s.layoutType === \"static\" ? i = ks.apply(this) : s.layoutType === \"dynamic\" && (i = Ds.apply(this)), this._updateInProgress = !1, i;\n  }\n  hideUserInterface() {\n    if (this._layoutButtons && this._buttonPlugins) {\n      this.player.log.debug(\"Hide video container user interface\");\n      const e = (t) => {\n        t._prevDisplay = t.style.display, t.style.display = \"none\";\n      };\n      this._layoutButtons.forEach(e), this._buttonPlugins.forEach(e);\n      for (const t in this.streamProvider.streams)\n        this.streamProvider.streams[t].canvas.hideButtons();\n    }\n  }\n  showUserInterface() {\n    if (this._layoutButtons && this._buttonPlugins) {\n      const e = (t) => t.style.display = t._prevDisplay || \"block\";\n      this._layoutButtons.forEach(e), this._buttonPlugins.forEach(e);\n      for (const t in this.streamProvider.streams)\n        this.streamProvider.streams[t].canvas.showButtons();\n    }\n  }\n  get message() {\n    return this._messageContainer;\n  }\n  get elementSize() {\n    return { w: this.element.offsetWidth, h: this.element.offsetHeight };\n  }\n  get ready() {\n    return this._ready;\n  }\n  get isLiveStream() {\n    return this.streamProvider.isLiveStream;\n  }\n  async play() {\n    const e = await this.streamProvider.play();\n    return E(this.player, m.PLAY), e;\n  }\n  async pause() {\n    const e = await this.streamProvider.pause();\n    return E(this.player, m.PAUSE), e;\n  }\n  async stop() {\n    this.streamProvider.stop(), E(this.player, m.STOP);\n  }\n  async paused() {\n    return this.streamProvider.paused();\n  }\n  async setCurrentTime(e) {\n    const t = await this.streamProvider.setCurrentTime(e);\n    return E(this.player, m.SEEK, { prevTime: t.prevTime, newTime: t.newTime }), t.result;\n  }\n  async currentTime() {\n    return this.streamProvider.currentTime();\n  }\n  async volume() {\n    return this.streamProvider.volume();\n  }\n  async setVolume(e) {\n    const t = await this.streamProvider.setVolume(e);\n    return E(this.player, m.VOLUME_CHANGED, { volume: e }), await this.player.preferences.set(\"volume\", e, { global: !0 }), t;\n  }\n  async duration() {\n    return await this.streamProvider.duration();\n  }\n  async playbackRate() {\n    return await this.streamProvider.playbackRate();\n  }\n  async setPlaybackRate(e) {\n    const t = await this.streamProvider.setPlaybackRate(e);\n    return E(this.player, m.PLAYBACK_RATE_CHANGED, { newPlaybackRate: e }), await this.player.preferences.set(\"playbackRate\", e, { global: !0 }), t;\n  }\n  get isTrimEnabled() {\n    return this.streamProvider.isTrimEnabled;\n  }\n  get trimStart() {\n    return this.streamProvider.trimStart;\n  }\n  get trimEnd() {\n    return this.streamProvider.trimEnd;\n  }\n  async setTrimming({ enabled: e, start: t, end: i }) {\n    const s = await this.streamProvider.setTrimming({\n      enabled: e,\n      start: t,\n      end: i\n    });\n    return E(this.player, m.TRIMMING_CHANGED, {\n      enabled: e,\n      start: t,\n      end: i\n    }), s;\n  }\n  getVideoRect(e = null) {\n    var i;\n    let t = this.baseVideoRect;\n    return typeof e == \"string\" && (t = (i = this.streamProvider.streams[e]) == null ? void 0 : i.canvas.element), {\n      x: t == null ? void 0 : t.offsetLeft,\n      y: t == null ? void 0 : t.offsetTop,\n      width: t == null ? void 0 : t.offsetWidth,\n      height: t == null ? void 0 : t.offsetHeight,\n      element: t\n    };\n  }\n  appendChild(e, t = null, i = 1) {\n    if (t) {\n      const { width: s, height: a } = this.getVideoRect();\n      t.x = t.x * 100 / s, t.width = t.width * 100 / s, t.y = t.y * 100 / a, t.height = t.height * 100 / a, e.style.position = \"absolute\", e.style.left = `${t.x}%`, e.style.top = `${t.y}%`, e.style.width = `${t.width}%`, e.style.height = `${t.height}%`, i !== null && (e.style.zIndex = i);\n    }\n    return this.baseVideoRect.appendChild(e), e;\n  }\n  removeChild(e) {\n    this.baseVideoRect.removeChild(e);\n  }\n}\nconst As = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 300 300\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;\">\n    <rect id=\"Play\" x=\"0\" y=\"0\" width=\"300\" height=\"300\" style=\"fill:none;\"/>\n    <g id=\"Play1\" serif:id=\"Play\">\n        <g transform=\"matrix(1.21457,0,0,1.21457,-55.8704,-35.2227)\">\n            <circle cx=\"169.5\" cy=\"152.5\" r=\"123.5\" style=\"fill:rgb(128,128,128);\"/>\n            <path d=\"M169.5,29C237.662,29 293,84.338 293,152.5C293,220.662 237.662,276 169.5,276C101.338,276 46,220.662 46,152.5C46,84.338 101.338,29 169.5,29ZM169.5,37.233C233.117,37.233 284.767,88.883 284.767,152.5C284.767,216.117 233.117,267.767 169.5,267.767C105.883,267.767 54.233,216.117 54.233,152.5C54.233,88.883 105.883,37.233 169.5,37.233Z\" style=\"fill:rgb(235,235,235);\"/>\n        </g>\n        <g transform=\"matrix(6.12323e-17,1,-1,6.12323e-17,347,-59)\">\n            <path d=\"M209,82L317,253L101,253L209,82Z\" style=\"fill:rgb(235,235,235);\"/>\n        </g>\n    </g>\n</svg>\n`, Ms = `\n    background-color: #e4e4e4;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%); \n`, je = `\n    width: 100%;\n`, Rs = `\n    position: absolute; \n    top: 0px; \n    left: 0px; \n    right: 0px; \n    bottom: 0px; \n    display: flex;\n    align-content: center;\n    justify-content: center;\n    align-items: center;\n`, Vs = `\n    pointer-events: none;\n    width: 20%;\n    max-width: 400px;\n    min-width: 100px;\n    opacity: 0.6;\n`, Ns = `\n    display: block;\n    width: 20%;\n    background: none;\n    border: none;\n    cursor: pointer;\n`;\nclass Us extends G {\n  constructor(e, t, i, s) {\n    const a = {\n      class: \"preview-container\",\n      style: Ms,\n      role: \"button\",\n      \"aria-label\": \"Play video\"\n    };\n    super(e, { attributes: a, parent: t }), this._img = L(`\n        <div style=\"${je}\">\n            ${i ? `<img style=\"${je}\" src=\"${i}\" class=\"preview-image-landscape\" alt=\"\"/>` : \"\"}\n            ${s ? `<img style=\"${je}\" src=\"${s}\" class=\"preview-image-portrait\" alt=\"\"/>` : \"\"}\n            <div style=\"${Rs}\">\n                <button style=\"${Ns}\" role=\"button\" aria-label=\"Play video\">\n                    <i class=\"preview-play-icon\" style=\"${Vs}\">${As}</i>\n                </button>\n            </div>\n        </div>\n        `, this.element), this.element.setAttribute(\"id\", \"playerContainerClickArea\"), this.element.addEventListener(\"click\", (l) => {\n      e.play();\n    });\n    const r = i && s, o = () => {\n      if (r) {\n        const l = this.element.clientWidth / this.element.clientHeight, u = Array.from(this.element.getElementsByClassName(\"preview-image-landscape\")), f = Array.from(this.element.getElementsByClassName(\"preview-image-portrait\"));\n        l >= 1 ? (u.forEach((h) => h.style.display = \"\"), f.forEach((h) => h.style.display = \"none\")) : (u.forEach((h) => h.style.display = \"none\"), f.forEach((h) => h.style.display = \"\"));\n      }\n    };\n    window.addEventListener(\"resize\", () => {\n      o();\n    }), o();\n  }\n  loadBackgroundImage(e) {\n    this._img.setAttribute(\"src\", e);\n  }\n}\nconst Fs = (n) => {\n  const e = document.createElement(\"section\");\n  return e.classList.add(\"pop-up\"), e.innerHTML = `\n        <header class=\"pop-up-title\">\n            <button class=\"action-back\">\n                <svg width=\"44\" height=\"44\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\n                    <path d=\"M15 6l-6 6l6 6\" />\n                </svg>\n            </button>\n            <h2>title</h2>\n        </header>\n        <div class=\"pop-up-content\">\n        </div>\n    `, n.appendChild(e), e.setTitle = (t) => {\n    e.querySelector(\"header.pop-up-title h2\").textContent = t;\n  }, e.popButton = () => e.querySelector(\"header.pop-up-title button\"), e.onPopClicked = (t) => {\n    e._clickCallback && e.popButton().removeEventListener(\"click\", e._clickCallback), e._clickCallback = t, e.popButton().addEventListener(\"click\", t);\n  }, e.hidePopButton = () => e.popButton().style.display = \"none\", e.showPopButton = () => e.popButton().style.display = \"\", e.setContent = (t) => {\n    e.querySelector(\"div.pop-up-content\").innerHTML = \"\", e.querySelector(\"div.pop-up-content\").appendChild(t);\n  }, e;\n};\nlet Os = 0;\nfunction $s() {\n  return ++Os;\n}\nvar ee, k, x, Pe;\nclass Bs {\n  constructor(e) {\n    T(this, ee, null);\n    T(this, k, null);\n    T(this, x, []);\n    T(this, Pe, \"\");\n    I(this, ee, e), I(this, k, document.createElement(\"div\")), d(this, k).className = \"pop-up-wrapper\", e.element.prepend(d(this, k)), d(this, k).classList.add(\"hidden\"), d(this, k).addEventListener(\"click\", (t) => t.stopPropagation()), d(this, ee).element.addEventListener(\"click\", (t) => {\n      t.stopPropagation(), this.hide();\n    });\n  }\n  get title() {\n    return d(this, Pe);\n  }\n  set title(e) {\n    I(this, Pe, e);\n  }\n  get currentContent() {\n    return d(this, x).length && d(this, x)[d(this, x).length - 1];\n  }\n  get currentContentId() {\n    var e;\n    return ((e = this.currentContent) == null ? void 0 : e.dataContentId) ?? -1;\n  }\n  show({ content: e, title: t = \"\", parent: i = null, attachLeft: s = !1, attachRight: a = !1 }) {\n    if (!e)\n      throw new Error(\"PlaybackBarPopUp.show(): No content provided.\");\n    e.setAttribute(\"data-pop-up-content-id\", $s()), e.dataContentId = e.getAttribute(\"data-pop-up-content-id\");\n    const r = d(this, x).length && d(this, x)[d(this, x).length - 1], o = i && i.getAttribute(\"data-pop-up-content-id\");\n    r && r.getAttribute(\"data-pop-up-content-id\") !== o ? (d(this, k).innerHTML = \"\", I(this, x, [])) : r && r.container.classList.add(\"out\"), d(this, x).push(e), d(this, ee).element.classList.add(\"pop-up-active\"), d(this, k).classList.remove(\"hidden\");\n    const l = Fs(d(this, k));\n    return l.setTitle(t), e.container = l, s === !0 ? d(this, k).classList.add(\"left\") : d(this, k).classList.remove(\"left\"), a === !0 ? d(this, k).classList.add(\"right\") : d(this, k).classList.remove(\"right\"), l.setContent(e), d(this, x).length > 1 ? l.onPopClicked(() => {\n      d(this, x).pop(), d(this, x)[d(this, x).length - 1].container.classList.remove(\"out\"), d(this, k).removeChild(l);\n    }) : l.hidePopButton(), this.title = t, e.dataContentId;\n  }\n  pop() {\n    if (d(this, k).querySelectorAll(\".pop-up\").length === 1)\n      return this.hide(), !1;\n    const e = new Event(\"click\");\n    return d(this, k).querySelector(\".pop-up:not(.out) .action-back\").dispatchEvent(e), !0;\n  }\n  hide() {\n    d(this, ee).element.classList.remove(\"pop-up-active\"), d(this, k).classList.add(\"hidden\");\n  }\n  get isHidden() {\n    return d(this, k).classList.contains(\"hidden\");\n  }\n}\nee = new WeakMap(), k = new WeakMap(), x = new WeakMap(), Pe = new WeakMap();\nvar Ee, re, oe, Q, le, Se, ce, M, te, ue;\nclass Gs extends G {\n  constructor(t, i) {\n    var f;\n    const s = ((f = t.config.progressIndicator) == null ? void 0 : f.inlineMode) ?? !1;\n    super(t, { attributes: { class: \"playback-bar-container\" }, parent: i });\n    T(this, Ee, null);\n    T(this, re, null);\n    T(this, oe, null);\n    T(this, Q, null);\n    T(this, le, null);\n    T(this, Se, null);\n    T(this, ce, null);\n    T(this, M, null);\n    T(this, te, !0);\n    T(this, ue, []);\n    I(this, Ee, new Bs(this)), this.element.addEventListener(\"mouseenter\", () => Dt(t)), this.element.addEventListener(\"mouseleave\", () => xt(t)), I(this, re, L('<section class=\"playback-bar\"></section>', this.element)), I(this, oe, L(\"<div></div>\")), I(this, Q, L(\"<nav></nav>\")), I(this, le, L(\"<ul></ul>\", d(this, Q))), I(this, Se, L(\"<div></div>\", d(this, Q))), I(this, ce, L(\"<ul></ul>\", d(this, Q)));\n    const r = t._initParams.getProgressIndicator, o = 1e3, l = 0, u = 100;\n    s ? I(this, M, r({ container: d(this, Se), player: t, duration: o, currentTime: l, precision: u })) : (d(this, re).appendChild(d(this, oe)), I(this, M, r({ container: d(this, oe), player: t, duration: o, currentTime: l, precision: u }))), d(this, M).onChange(async (h) => {\n      await t.videoContainer.setCurrentTime(h);\n    }), d(this, re).appendChild(d(this, Q));\n  }\n  get popUp() {\n    return d(this, Ee);\n  }\n  get enabled() {\n    return d(this, te);\n  }\n  set enabled(t) {\n    I(this, te, t), d(this, te) ? this.showUserInterface() : this.hide();\n  }\n  async load() {\n    I(this, ue, []), this.player.log.debug(\"Loading button plugins\"), await O(this.player, \"button\", async (i) => {\n      this.player.log.debug(` Button plugin: ${i.name}`), d(this, ue).push(i), i.side === \"left\" ? await Re(i, this.buttonPluginsLeft) : i.side === \"right\" && await Re(i, this.buttonPluginsRight);\n    }, async (i) => i.parentContainer === \"playbackBar\" ? await i.isEnabled() : !1);\n    const t = await this.player.videoContainer.duration();\n    d(this, M).setDuration(t), this.player.frameList.frames.forEach((i, s, a) => {\n      const r = a[s + 1], o = r ? r.time - i.time : t - i.time;\n      d(this, M).addMarker({ time: i.time, duration: t, frameDuration: o });\n    }), this.player.bindEvent([this.player.Events.TIMEUPDATE, this.player.Events.SEEK], (i) => {\n      d(this, M).setCurrentTime(i.newTime ?? i.currentTime);\n    }), this.player.bindEvent(this.player.Events.TRIMMING_CHANGED, async (i) => {\n      const s = i.end - i.start;\n      d(this, M).setDuration(s);\n      const a = await this.player.videoContainer.currentTime();\n      d(this, M).setCurrentTime(a);\n    }), this.onResize();\n  }\n  async unload() {\n    this.removeFromParent(), await di(this.player, \"button\"), d(this, le).innerHTML = \"\", d(this, ce).innerHTML = \"\";\n  }\n  hideUserInterface() {\n    this.player.log.debug(\"Hide playback bar user interface\"), this.hide();\n  }\n  showUserInterface() {\n    var t;\n    if (d(this, te)) {\n      const s = ((t = this.player.config.progressIndicator) == null ? void 0 : t.inlineMode) ?? !1 ? \"flex\" : \"block\";\n      this.show(s), this.onResize();\n    }\n  }\n  get buttonPluginsRight() {\n    return d(this, ce);\n  }\n  get buttonPluginsLeft() {\n    return d(this, le);\n  }\n  get progressIndicator() {\n    return d(this, M);\n  }\n  get containerSize() {\n    const t = this.element.clientWidth, i = this.element.clientHeight;\n    return { width: t, height: i };\n  }\n  onResize() {\n    const { containerSize: t } = this;\n    d(this, ue).forEach((i) => i.onResize(t));\n  }\n}\nEe = new WeakMap(), re = new WeakMap(), oe = new WeakMap(), Q = new WeakMap(), le = new WeakMap(), Se = new WeakMap(), ce = new WeakMap(), M = new WeakMap(), te = new WeakMap(), ue = new WeakMap();\nconst gi = [\n  { maxWidth: 400, className: \"size-s\" },\n  { maxWidth: 600, className: \"size-m\" },\n  { maxWidth: 900, className: \"size-l\" },\n  { maxWidth: 1100, className: \"size-xl\" },\n  { className: \"size-xxl\" }\n], zs = (n) => gi.find((e) => e.maxWidth && e.maxWidth >= n || e.maxWidth === void 0).className;\nclass Hs extends G {\n  constructor(e, t) {\n    const i = {\n      class: \"captions-canvas visible-ui\"\n    };\n    super(e, { tag: \"div\", attributes: i, parent: t }), this._captionsContainer = L(`\n            <div class=\"text-container\">\n            </div>\n        `, this.element), this._captions = [], this.hide(), this._currentCaptions = null;\n    const s = async (a) => {\n      const o = (e.videoContainer.isTrimEnabled ? e.videoContainer.trimStart : 0) + (a.currentTime || a.newTime || 0);\n      if (this._currentCaptions) {\n        const l = this._currentCaptions.getCue(o);\n        this._captionsContainer.innerHTML = \"\", l && l.captions.forEach((u) => {\n          this._captionsContainer.innerHTML += u, this._captionsContainer.innerHTML += \"<br/>\";\n        }), l ? this._captionsContainer.style.display = null : this._captionsContainer.style.display = \"none\", this.resize();\n      }\n    };\n    A(this.player, m.TIMEUPDATE, s), A(this.player, m.SEEK, s), A(this.player, m.RESIZE, () => this.resize()), A(this.player, m.SHOW_UI, () => this.element.classList.add(\"visible-ui\")), A(this.player, m.HIDE_UI, () => this.element.classList.remove(\"visible-ui\"));\n  }\n  async load() {\n    await mn(this.player);\n  }\n  unload() {\n  }\n  resize() {\n    const e = zs(this._captionsContainer.clientWidth);\n    gi.forEach((t) => this.element.classList.remove(t.className)), this.element.classList.add(e);\n  }\n  addCaptions(e) {\n    this._captions.push(e), E(this.player, m.CAPTIONS_CHANGED, { captions: this._captions });\n  }\n  get captions() {\n    return this._captions;\n  }\n  get currentCaptions() {\n    return this._currentCaptions;\n  }\n  getCaptions({ label: e, index: t, lang: i }) {\n    if (e === void 0 && t === void 0 && i === void 0)\n      throw Error(\"Could not find captions: you must specify the label, the index or the language\");\n    return t !== void 0 ? this._captions[t] : this._captions.find((s) => {\n      if (e !== void 0)\n        return s.label === e;\n      if (i !== void 0)\n        return s.language === i;\n    });\n  }\n  enableCaptions(e) {\n    const t = this.getCaptions(e);\n    if (t !== this._currentCaptions && (this._currentCaptions = t, this.currentCaptions)) {\n      const { language: i, label: s } = this.currentCaptions;\n      E(this.player, m.CAPTIONS_ENABLED, { language: i, label: s });\n    }\n    this.show();\n  }\n  disableCaptions() {\n    this.currentCaptions && E(this.player, m.CAPTIONS_DISABLED), this._currentCaptions = null, this.hide();\n  }\n}\nasync function js(n) {\n  await O(n, \"eventLog\", async (e) => {\n    e.events.forEach((t) => {\n      A(n, t, async (i) => {\n        await e.onEvent(t, i);\n      });\n    });\n  });\n}\nasync function Ws(n) {\n}\nclass ua extends he {\n  get type() {\n    return \"eventLog\";\n  }\n  get events() {\n    return [];\n  }\n  async onEvent(e, t) {\n    this.player.log.warn(`${this.name}: onEvent() function is not overwritten.`);\n  }\n}\nconst mi = (n) => !1, fi = (n) => n.description;\nclass qs {\n  constructor(e, t) {\n    this._player = e, this._cookieConsentData = e.config.cookieConsent || [], this._getConsentCallback = t.getConsent || mi, this._getDescriptionCallback = t.getDescription || fi, this._cookieConsentData.forEach((i) => {\n      i.description = this._getDescriptionCallback(i);\n    }), this.updateConsentData();\n  }\n  updateConsentData() {\n    this._cookieConsentData.forEach((e) => {\n      e.value = this._getConsentCallback(e.type) || e.required;\n    }), E(this._player, m.COOKIE_CONSENT_CHANGED, { cookieConsent: this });\n  }\n  getConsentForType(e) {\n    const t = this._cookieConsentData.find((i) => i.type === e);\n    return (t == null ? void 0 : t.value) || !1;\n  }\n}\nfunction Qs({ container: n }) {\n  n.innerHTML = `\n        <div class=\"timeline-preview hidden\">\n            <img src=\"\" alt=\"\" />\n            <p></p>\n        </div>\n    `;\n  const e = n.querySelector(\"img\"), t = n.querySelector(\"p\"), i = n.querySelector(\".timeline-preview\");\n  return {\n    setImage(a, r) {\n      a !== e.src && (e.src = a, e.alt = r);\n    },\n    setText(a) {\n      t.innerText = a;\n    },\n    setPosition(a) {\n      a > 0.5 ? (i.style.left = \"\", i.style.right = `${100 - a * 100}%`) : (i.style.right = \"\", i.style.left = `${a * 100}%`);\n    },\n    show() {\n      i.classList.remove(\"hidden\");\n    },\n    hide() {\n      i.classList.add(\"hidden\");\n    }\n  };\n}\nfunction Ys({ container: n, player: e, duration: t = 100, currentTime: i = 0, precision: s = 100 }) {\n  n.classList.add(\"progress-indicator\"), n.classList.add(\"custom-progress-indicator\"), n.innerHTML = `\n        <div class=\"range-container\">\n            <div class=\"timeline-preview-container\"></div>\n            <div class=\"elapsed\"></div>\n            <div class=\"remaining\"></div>\n            <input type=\"range\" min=\"0\" max=\"${t * s}\" value=\"${i * s}\" tabindex=\"0\" role=\"slider\" class=\"slider\">\n            <ul class=\"markers-container\"></ul>\n        </div>\n    `;\n  const a = n.querySelector(\".elapsed\"), r = n.querySelector(\".remaining\"), o = n.querySelector(\".slider\"), l = n.querySelector(\".timeline-preview-container\"), u = Qs({ container: l });\n  let f = !1, h = null;\n  const p = [], _ = (c) => {\n    var y;\n    return (y = p.find((P) => P.time < c && P.time + P.frameDuration >= c)) == null ? void 0 : y.marker;\n  }, C = {\n    player: e,\n    elapsed: a,\n    remaining: r,\n    range: o,\n    timeLinePreview: u,\n    markersContainer: n.querySelector(\".markers-container\"),\n    addMarker({ time: c, duration: y, frameDuration: P }) {\n      const g = L(`<li>\n                <div class=\"elapsed\"></div>\n                <div class=\"remaining\"></div>\n            </li>`);\n      g.style.left = `${c / y * 100}%`, g.style.width = `calc(${P / y * 100}% - 4px)`, this.markersContainer.appendChild(g), p.push({\n        marker: g,\n        time: c,\n        frameDuration: P\n      });\n    },\n    updateRemaining() {\n      const c = this.range.value / this.range.max * 100;\n      this.elapsed.style.width = `${c}%`, this.remaining.style.width = `${100 - c}%`;\n      const y = _(this.range.value / s), P = p.findIndex((g) => g.marker === y);\n      p.forEach((g, z) => {\n        if (z < P)\n          g.marker.querySelector(\".elapsed\").style.width = \"100%\", g.marker.querySelector(\".remaining\").style.width = \"0%\";\n        else if (z === P) {\n          const J = (this.range.value / s - g.time) / g.frameDuration * 100;\n          g.marker.querySelector(\".elapsed\").style.width = `${J}%`, g.marker.querySelector(\".remaining\").style.width = `${100 - J}%`;\n        } else\n          g.marker.querySelector(\".elapsed\").style.width = \"0%\", g.marker.querySelector(\".remaining\").style.width = \"100%\";\n      });\n    },\n    setDuration(c) {\n      f || (this.range.max = c * s, this.updateRemaining());\n    },\n    setCurrentTime(c) {\n      f || (this.range.value = c * s, this.updateRemaining());\n    },\n    onChange(c) {\n      h = c;\n    }\n  };\n  o.addEventListener(\"pointerdown\", () => {\n    f = !0;\n  });\n  let b = null;\n  o.addEventListener(\"mousemove\", async (c) => {\n    var P;\n    const y = ((P = e.frameList) == null ? void 0 : P.frames) || [];\n    if (y && y.length) {\n      const g = await e.videoContainer.duration(), z = c.target.clientWidth, H = c.layerX / z, j = H * g, V = y.filter((bi) => bi.time <= j).pop(), Ci = V && (V.thumb || V.url), ut = V && ie(g * H), ke = _(j);\n      ke !== b && b !== null && b.classList.remove(\"active\"), ke && ke.classList.add(\"active\"), b = ke, u.setImage(Ci, ut), u.setText(ut), u.setPosition(H), u.show();\n    }\n  }), o.addEventListener(\"mouseleave\", () => {\n    u.hide(), b && b.classList.remove(\"active\");\n  }), o.addEventListener(\"pointerup\", () => {\n    f = !1, typeof h == \"function\" && h(o.value / s);\n  }), o.addEventListener(\"input\", () => {\n    C.updateRemaining();\n  });\n  const v = async (c) => {\n    const y = await e.videoContainer.currentTime();\n    await e.videoContainer.setCurrentTime(y + c);\n  };\n  return o.addEventListener(\"keydown\", (c) => {\n    c.key === \"ArrowLeft\" ? (v(-10), c.preventDefault(), c.stopPropagation()) : c.key === \"ArrowRight\" && (v(10), c.preventDefault(), c.stopPropagation());\n  }), C.updateRemaining(), C;\n}\nconst D = Object.freeze({\n  DISABLED: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  DEBUG: 4,\n  VERBOSE: 5\n});\nlet yi = D.INFO;\nconst _i = (n, e = null) => {\n  const t = typeof n == \"string\" ? D[n.toUpperCase()] : n;\n  if (t < D.DISABLED || t > D.VERBOSE)\n    throw Error(`setLogLevel: invalid log level ${t}`);\n  e ? (e.__logSettings = e.__logSettings || {}, e.__logSettings.logLevel = t) : yi = t;\n}, vi = (n = null) => n ? n.__logSettings.logLevel : yi, ye = ({\n  msg: n,\n  level: e = D.INFO,\n  player: t = null,\n  context: i = \"paella-core\"\n}) => {\n  t && !t.__logSettings && _i(t, D.INFO);\n  const s = vi(t);\n  if (e < D.DISABLED)\n    throw Error(`printMessage: invalid log level ${e}`);\n  if (t && E(t, m.LOG, { severity: e, context: i, message: n, currentLogLevel: s }), e <= s)\n    switch (e) {\n      case D.ERROR:\n        console.error(`${i} - Error: ${n}`);\n        break;\n      case D.WARN:\n        console.warn(`${i} - Warning: ${n}`);\n        break;\n      case D.INFO:\n        console.info(`${i} - Info: ${n}`);\n        break;\n      case D.DEBUG:\n        console.debug(`${i} - Debug: ${n}`);\n        break;\n      case D.VERBOSE:\n        console.log(`${i} - Verbose: ${n}`);\n        break;\n    }\n}, X = {\n  setLevel: (n, e = null) => {\n    _i(n, e);\n  },\n  currentLevel: (n = null) => vi(n),\n  error: (n, e = null, t = \"paella-core\") => {\n    ye({\n      msg: n,\n      level: D.ERROR,\n      player: e,\n      context: t\n    });\n  },\n  warn: (n, e = null, t = \"paella-core\") => {\n    ye({\n      msg: n,\n      level: D.WARN,\n      player: e,\n      context: t\n    });\n  },\n  info: (n, e = null, t = \"paella-core\") => {\n    ye({\n      msg: n,\n      level: D.INFO,\n      player: e,\n      context: t\n    });\n  },\n  debug: (n, e = null, t = \"paella-core\") => {\n    ye({\n      msg: n,\n      level: D.DEBUG,\n      player: e,\n      context: t\n    });\n  },\n  verbose: (n, e = null, t = \"paella-core\") => {\n    ye({\n      msg: n,\n      level: D.VERBOSE,\n      player: e,\n      context: t\n    });\n  }\n};\nclass Zs {\n  constructor(e, t = \"paella-core\") {\n    this._player = e, this._context = t;\n  }\n  get context() {\n    return this._context;\n  }\n  get player() {\n    return this._player;\n  }\n  setLevel(e) {\n    X.setLevel(e, this._player);\n  }\n  currentLevel() {\n    return X.currentLevel(this._player);\n  }\n  error(e, t = null) {\n    X.error(e, this._player, t || this._context);\n  }\n  warn(e, t = null) {\n    X.warn(e, this._player, t || this._context);\n  }\n  info(e, t = null) {\n    X.info(e, this._player, t || this._context);\n  }\n  debug(e, t = null) {\n    X.debug(e, this._player, t || this._context);\n  }\n  verbose(e, t = null) {\n    X.verbose(e, this._player, t || this._context);\n  }\n}\nconst wt = {}, We = '{ \"global\": {}, \"videos\": {} }';\nasync function Ct() {\n  switch (this.source.name) {\n    case \"cookie\":\n      try {\n        return JSON.parse(Y(\"preferences\"));\n      } catch {\n        return JSON.parse(We);\n      }\n    case \"dataPlugin\":\n      try {\n        return await this.player.data.read(this.source.context, {}) || JSON.parse(We);\n      } catch {\n        return JSON.parse(We);\n      }\n  }\n}\nasync function Ks(n) {\n  switch (this.source.name) {\n    case \"cookie\":\n      Rt(this.player, this.source.consentType, \"preferences\", JSON.stringify(n));\n      break;\n    case \"dataPlugin\":\n      await this.player.data.write(this.source.context, {}, n);\n      break;\n  }\n}\nclass Js extends de {\n  constructor(e) {\n    super(e);\n    const { currentSource: t, sources: i } = e.config.preferences || {\n      currentSource: \"cookie\",\n      sources: {\n        cookie: {\n          consentType: \"necessary\"\n        }\n      }\n    };\n    if (this.source = i[t], this.source.name = t, this._loaded = !1, !this.source)\n      throw Error(\"Invalid configuration in preferences. Check the configuration file.\");\n  }\n  async set(e, t, { global: i = !1 } = {}) {\n    const s = await Ct.apply(this);\n    i ? s.global[e] = t : (s.videos[this.player.videoId] = s.videos[this.player.videoId] || {}, s.videos[this.player.videoId][e] = t), await Ks.apply(this, [s]);\n  }\n  async get(e, { global: t = !1 } = {}) {\n    const i = await Ct.apply(this);\n    return t ? i.global[e] : i.videos[this.player.videoId] && i.videos[this.player.videoId][e] || void 0;\n  }\n}\nfunction Xs(n) {\n  var e;\n  (e = this._skinData) != null && e.configOverrides && we(n, this._skinData.configOverrides);\n}\nasync function ea() {\n  var n;\n  if ((n = this._skinData) != null && n.styleSheets) {\n    const e = [];\n    this._skinData.styleSheets.forEach((t) => {\n      if (!/\\{.*/.test(t)) if (this._externalResourcesAllowed) {\n        const i = B([this._skinUrl, t]);\n        e.push(new Promise(async (s) => {\n          await Xe(i, !1), s();\n        }));\n      } else\n        throw new Error(\"No external resources allowed loading skin object\");\n    }), await Promise.allSettled(e);\n  }\n}\nasync function ta() {\n  var n;\n  if (this.player.__skinStyleSheets__ = this.player.__skinStyleSheets__ || [], (n = this._skinData) != null && n.styleSheets) {\n    const e = [];\n    this._skinData.styleSheets.forEach((t) => {\n      if (/\\{.*/.test(t))\n        e.push(new Promise((i) => {\n          const s = document.createElement(\"style\");\n          s.innerHTML = t, this.player.__skinStyleSheets__.push(s), document.head.appendChild(s), i();\n        }));\n      else {\n        const i = B([this._skinUrl, t]);\n        e.push(new Promise(async (s) => {\n          const a = await Xe(i);\n          this.player.__skinStyleSheets__.push(a), s();\n        }));\n      }\n    }), await Promise.allSettled(e);\n  }\n}\nfunction bt() {\n  this.player.__skinStyleSheets__ = this.player.__skinStyleSheets__ || [], this.player.__skinStyleSheets__.forEach((n) => {\n    Vt(n);\n  }), this.player.__skinStyleSheets__ = [];\n}\nasync function ia() {\n  var n;\n  Array.isArray((n = this._skinData) == null ? void 0 : n.icons) && await Promise.all(this._skinData.icons.map(({ plugin: e, identifier: t, icon: i }) => new Promise(async (s, a) => {\n    const r = document.createElement(\"div\");\n    if (r.innerHTML = i, r.children[0] && r.children[0].tagName === \"svg\")\n      s();\n    else if (this._externalResourcesAllowed) {\n      const o = B([this._skinUrl, i]);\n      (await fetch(o)).ok ? s() : a(new Error(`Skin icon not found at URL '${o}'`));\n    } else\n      throw new Error(\"No external resources allowed loading skin object\");\n  })));\n}\nasync function na() {\n  var n;\n  Array.isArray((n = this._skinData) == null ? void 0 : n.icons) && await Promise.all(this._skinData.icons.map(({ plugin: e, identifier: t, icon: i }) => new Promise(async (s, a) => {\n    const r = document.createElement(\"div\");\n    if (r.innerHTML = i, r.children[0] && r.children[0].tagName === \"svg\")\n      this.player.addCustomPluginIcon(e, t, i), s();\n    else {\n      const o = B([this._skinUrl, i]), l = await fetch(o);\n      if (l.ok) {\n        const u = await l.text();\n        this.player.addCustomPluginIcon(e, t, u), s();\n      } else\n        a(new Error(`Skin icon not found at URL '${o}'`));\n    }\n  })));\n}\nclass sa {\n  constructor(e) {\n    this._player = e;\n  }\n  get player() {\n    return this._player;\n  }\n  async loadSkin(e) {\n    if (typeof e == \"string\") {\n      this._skinUrl = Ke(e), this._externalResourcesAllowed = !0;\n      const t = await fetch(e);\n      if (!t.ok)\n        throw new Error(`Error loading skin from URL ${e}`);\n      this._skinData = await t.json();\n    } else typeof e == \"object\" && (this._skinUrl = \"\", this._externalResourcesAllowed = !1, this._skinData = e);\n    try {\n      await ea.apply(this), await ia.apply(this), (this._player.state === w.LOADED || this._player.state === w.MANIFEST) && await this._player.reload();\n    } catch (t) {\n      throw this._skinUrl = \"\", this._externalResourcesAllowed = !0, this._skinData = {}, t;\n    }\n  }\n  unloadSkin() {\n    var e, t;\n    Array.isArray((e = this._skinData) == null ? void 0 : e.icons) && ((t = this._skinData) == null || t.icons.forEach(({ plugin: i, identifier: s }) => {\n      this.player.removeCustomPluginIcon(i, s);\n    })), this._skinUrl = null, this._skinData = {}, (this._player.state === w.LOADED || this._player.state === w.MANIFEST) && this._player.reload();\n  }\n}\nclass aa {\n  constructor(e, t) {\n    this._player = t, this._videoManifest = JSON.parse(JSON.stringify(e)), this._metadata = this._videoManifest.metadata || {}, this._streams = {}, this._frameList = {}, this._trimming = this._videoManifest.trimming, this._captions = this._videoManifest.captions, this._visibleTimeLine = this._videoManifest.visibleTimeLine;\n    function i() {\n      if (this.streams.length !== 1)\n        return null;\n      if (this.isAudioOnly)\n        return this.audioOnlySource.src;\n      const s = this.streams[0];\n      if (!(s.sources.mp4 || s.sources.hls || s.sources.hlsLive))\n        return null;\n      const r = document.createElement(\"video\");\n      if (s.sources.mp4 && s.sources.mp4.length && r.canPlayType(s.sources.mp4[0].mimetype || \"video/mp4\") === \"probably\")\n        return s.sources.mp4[0].src;\n      const o = s.sources.hls || s.sources.hlsLive;\n      return o && o.length && r.canPlayType(o[0].mimetype || \"application/vnd.apple.mpegurl\") !== \"\" && /safari/i.test(navigator.userAgent) ? o[0].src : null;\n    }\n    this._streams = {\n      streams: this._videoManifest.streams,\n      get contents() {\n        return this.streams.map((s) => s.content);\n      },\n      getStream(s) {\n        return this.streams.find((a) => a.content === s);\n      },\n      getSourceTypes(s) {\n        const a = this.getStream(s);\n        return a && Object.keys(a.sources) || null;\n      },\n      getCanvasTypes(s) {\n        const a = this.getStream(s);\n        return a ? a.canvas || [\"video\"] : null;\n      },\n      get isAudioOnly() {\n        const s = this.contents.length === 1 && this.contents[0], a = s && this.getCanvasTypes(s) || [], r = this.getStream(s);\n        return a.length === 1 && a[0] === \"audio\" && r.sources.audio && r.sources.audio.length > 0;\n      },\n      get audioOnlySource() {\n        return this.isAudioOnly ? this.getStream(this.contents[0]).sources.audio[0] : null;\n      },\n      get isNativelyPlayable() {\n        return i.apply(this) !== null;\n      },\n      get nativeSource() {\n        return i.apply(this);\n      },\n      get nativeType() {\n        return this.isNativelyPlayable ? this.isAudioOnly ? \"audio\" : \"video\" : null;\n      },\n      get nativePlayer() {\n        const s = this.nativeType;\n        if (s) {\n          const a = document.createElement(s);\n          return a.src = this.nativeSource, a;\n        } else\n          return null;\n      }\n    }, this._videoManifest.frameList && !Array.isArray(this._videoManifest.frameList) && typeof this._videoManifest.frameList == \"object\" && typeof this._videoManifest.frameList.targetContent == \"string\" && Array.isArray(this._videoManifest.frameList.frames) ? this._frameList = this._videoManifest.frameList : Array.isArray(this._videoManifest.frameList) ? this._frameList = {\n      targetContent: null,\n      frames: this._videoManifest.frameList\n    } : this._frameList = {\n      targetContent: null,\n      frames: []\n    }, this._frameList.frames.sort((s, a) => s.time - a.time), this._frameList.getImage = (s, a = !1) => {\n      var r, o;\n      return (r = this._player) != null && r.videoContainer && this._player._videoContainer.isTrimEnabled && !a ? s += this._player.videoContainer.trimStart : !((o = this._player) != null && o._videoContainer) && !a && console.warn(\"frameList.getImage(): player instance is null. The trimming information will be ignored.\"), [...this._frameList.frames].sort((l, u) => u.time - l.time).find((l) => l.time < s);\n    }, Object.defineProperty(this._frameList, \"isEmpty\", {\n      get() {\n        return Array.isArray(e.frameList) && e.frameList.length === 0 || !e.frameList;\n      }\n    }), Object.freeze(this._metadata), Object.freeze(this._streams), Object.freeze(this._trimming), Object.freeze(this._captions);\n  }\n  get metadata() {\n    return this._metadata;\n  }\n  get streams() {\n    return this._streams;\n  }\n  get frameList() {\n    return this._frameList;\n  }\n  get captions() {\n    return this._captions;\n  }\n  get trimming() {\n    return this._trimming;\n  }\n  get visibleTimeLine() {\n    return this._visibleTimeLine;\n  }\n}\nconst U = Object.freeze([\n  \"UNLOADED\",\n  \"LOADING_MANIFEST\",\n  \"MANIFEST\",\n  \"LOADING_PLAYER\",\n  \"LOADED\",\n  \"UNLOADING_MANIFEST\",\n  \"UNLOADING_PLAYER\",\n  \"ERROR\"\n]);\nfunction wi() {\n  var t, i, s, a, r, o, l, u;\n  const n = ((i = (t = this.videoManifest) == null ? void 0 : t.metadata) == null ? void 0 : i.preview) && Z(this, (a = (s = this.videoManifest) == null ? void 0 : s.metadata) == null ? void 0 : a.preview) || this.defaultVideoPreview, e = ((o = (r = this.videoManifest) == null ? void 0 : r.metadata) == null ? void 0 : o.previewPortrait) && Z(this, (u = (l = this.videoManifest) == null ? void 0 : l.metadata) == null ? void 0 : u.previewPortrait) || this.defaultVideoPreviewPortrait;\n  this._previewContainer = new Us(this, this._containerElement, n, e);\n}\nasync function Lt() {\n  this._playerState = w.LOADING_MANIFEST, this._manifestLoaded = !0, this.log.debug(\"Loading paella player\"), this._config = await this.initParams.loadConfig(this.configUrl, this), Xs.apply(this.skin, [this._config]), Sn(this), this._defaultVideoPreview = this._config.defaultVideoPreview || this._initParams.defaultVideoPreview || \"\", this._defaultVideoPreviewPortrait = this._config.defaultVideoPreviewPortrait || this._initParams.defaultVideoPreviewPortrait || \"\", this._cookieConsent = new qs(this, {\n    getConsent: this._initParams.getCookieConsentFunction,\n    getDescription: this._initParams.getCookieDescriptionFunction\n  }), this._preferences = new Js(this);\n  const n = new URLSearchParams(window.location.search), e = new URLSearchParams();\n  for (const [s, a] of n)\n    e.append(s.toLowerCase(), a);\n  const t = e.get(\"loglevel\"), i = t && Array.from(Object.keys(D)).indexOf(t.toUpperCase()) !== -1 ? t : this._config.logLevel || \"INFO\";\n  this._log.setLevel(i), await this._initParams.loadDictionaries(this), bs(this), await js(this), this._videoContainer = new xs(this, this._containerElement), await this.videoContainer.create();\n  for (const s of this.pluginModules) {\n    const a = s.getDictionaries && await s.getDictionaries();\n    if (a)\n      for (const r in a)\n        _e(r, a[r]);\n  }\n}\nasync function Pt() {\n  var n, e;\n  this.log.debug(\"Video manifest loaded:\"), this.log.debug(this.videoManifest), this._data = new os(this);\n  for (const t in wt) {\n    const i = wt[t];\n    _e(t, i);\n  }\n  if (this._playerState = w.MANIFEST, E(this, m.MANIFEST_LOADED), (e = (n = this.videoManifest) == null ? void 0 : n.metadata) != null && e.preview)\n    wi.apply(this);\n  else\n    throw new Error(\"No preview image found in video manifest, and no default preview image defined.\");\n  Ps(this._videoManifest);\n}\nclass da {\n  constructor(e, t = {}) {\n    this._log = new Zs(this), this._packageData = Te, this._log.setLevel(D.VERBOSE), window.__paella_instances__ = window.__paella_instances__ || [], window.__paella_instances__.push(this), this.log.debug(\"New paella player instance\"), typeof e == \"string\" && (e = document.getElementById(e)), e.classList.add(\"player-container\"), this.log.debug(\"Loading skin manager\"), this._skin = new sa(this), this._containerElement = e, this._initParams = t, this._initParams.manifestFileName = this._initParams.manifestFileName || \"data.json\", this._initParams.loadConfig = this._initParams.loadConfig || Si, this._initParams.getVideoId = this._initParams.getVideoId || Ti, this._initParams.getManifestUrl = this._initParams.getManifestUrl || Ii, this._initParams.getManifestFileUrl = this._initParams.getManifestFileUrl || ki, this._initParams.loadVideoManifest = this._initParams.loadVideoManifest || Di, this._initParams.customPluginContext = this._initParams.customPluginContext || [], this._initParams.translateFunction = this._initParams.translateFunction || Ht, this._initParams.getLanguageFunction = this._initParams.getLanguageFunction || Wt, this._initParams.setLanguageFunction = this._initParams.setLanguageFunction || jt, this._initParams.addDictionaryFunction = this._initParams.addDictionaryFunction || qt, this._initParams.getDictionariesFunction = this._initParams.getDictionariesFunction || Qt, this._initParams.getDefaultLanguageFunction = this._initParams.getDefaultLanguageFunction || Yt, this._initParams.Loader = this._initParams.customLoader || Ai, this._initParams.getCookieConsentFunction = this._initParams.getCookieConsentFunction || mi, this._initParams.getCookieDescriptionFunction = this._initParams.getCookieDescriptionFunction || fi, this._initParams.getProgressIndicator = this._initParams.getProgressIndicator || Ys, this._initParams.loadDictionaries = this._initParams.loadDictionaries || async function(a) {\n      _e(\"en\", {\n        Hello: \"Hello\",\n        World: \"World\"\n      }), _e(\"es\", {\n        Hello: \"Hola\",\n        World: \"Mundo\"\n      }), gt(navigator.language.substring(0, 2));\n    };\n    const i = this._initParams.plugins || [];\n    this._initParams.plugins = [\n      ...i\n    ], wn(this._initParams.translateFunction), Cn(this._initParams.setLanguageFunction), bn(this._initParams.getLanguageFunction), Ln(this._initParams.addDictionaryFunction), Pn(this._initParams.getDictionariesFunction), En(this._initParams.getDefaultLanguageFunction), this._config = null, this._defaultVideoPreview = \"\", this._defaultVideoPreviewPortrait = \"\", this._videoId = null, this._manifestUrl = null, this._manifestFileUrl = null, this._manifestData = null, this._videoManifest = null, this._playerLoaded = !1;\n    const s = () => {\n      this.resize();\n    };\n    window.addEventListener(\"resize\", s), this.containerElement.addEventListener(\"fullscreenchange\", () => {\n      E(this, m.FULLSCREEN_CHANGED, { status: this.isFullscreen }), this.isFullscreen ? E(this, m.ENTER_FULLSCREEN) : E(this, m.EXIT_FULLSCREEN);\n    }), this._playerState = w.UNLOADED, this._customPluginIcons = {};\n  }\n  get version() {\n    return this._packageData.version;\n  }\n  get pluginModules() {\n    return this.__pluginModules || [];\n  }\n  get log() {\n    return this._log;\n  }\n  get ready() {\n    return this._playerState === w.LOADED;\n  }\n  get state() {\n    return this._playerState;\n  }\n  get stateText() {\n    return U[this.state];\n  }\n  get Events() {\n    return m;\n  }\n  get preferences() {\n    return this._preferences;\n  }\n  get skin() {\n    return this._skin;\n  }\n  get containsFocus() {\n    return this.containerElement.contains(document.activeElement);\n  }\n  translate(e, t = null) {\n    return Ce(e, t);\n  }\n  setLanguage(e) {\n    gt(e);\n  }\n  getLanguage() {\n    return _n();\n  }\n  addDictionary(e, t) {\n    _e(e, t);\n  }\n  getDictionaries() {\n    return vn();\n  }\n  getDefaultLanguage() {\n    return ii(this);\n  }\n  bindEvent(e, t, i = !0) {\n    A(this, e, (s) => t(s), i);\n  }\n  getShortcuts() {\n    return getShortcuts(this);\n  }\n  pauseCaptureShortcuts() {\n    return pauseCaptureShortcuts(this);\n  }\n  resumeCaptureShortcuts() {\n    return resumeCaptureShortcuts(this);\n  }\n  getPlugin(e, t = null) {\n    if (t) {\n      const i = this.__pluginData__.pluginInstances[t];\n      if (i)\n        return i.find((s) => {\n          if (s.name === e)\n            return s;\n        });\n    } else {\n      const i = {};\n      for (const s in this.__pluginData__.pluginInstances) {\n        const r = this.__pluginData__.pluginInstances[s].find((o) => {\n          if (o.name === e)\n            return o;\n        });\n        r && (i[s] = r);\n      }\n      return i;\n    }\n  }\n  get hideUiTime() {\n    return this._hideUiTime;\n  }\n  set hideUiTime(e) {\n    this._hideUiTime = e;\n  }\n  get containerSize() {\n    return { w: this._containerElement.offsetWidth, h: this._containerElement.offsetHeight };\n  }\n  get containerElement() {\n    return this._containerElement;\n  }\n  get initParams() {\n    return this._initParams;\n  }\n  get cookieConsent() {\n    return this._cookieConsent;\n  }\n  // Status flags getters\n  // The configuration is loaded\n  get configLoaded() {\n    return this.configUrl !== null;\n  }\n  // The video manifest file is loaded\n  get videoManifestLoaded() {\n    return this.videoManifest !== null;\n  }\n  // The video streams are loaded\n  get videoLoaded() {\n    var e;\n    return ((e = this.videoContainer) == null ? void 0 : e.ready) || !1;\n  }\n  // The player user interface is loaded\n  get playerLoaded() {\n    return this._playerLoaded;\n  }\n  get configResourcesUrl() {\n    var e;\n    return ((e = this._initParams) == null ? void 0 : e.configResourcesUrl) || \"config/\";\n  }\n  get configUrl() {\n    var e;\n    return ((e = this._initParams) == null ? void 0 : e.configUrl) || \"config/config.json\";\n  }\n  get config() {\n    return this._config;\n  }\n  get defaultVideoPreview() {\n    return this._defaultVideoPreview;\n  }\n  get defaultVideoPreviewPortrait() {\n    return this._defaultVideoPreviewPortrait;\n  }\n  get videoId() {\n    return this._videoId;\n  }\n  // Base URL where the video repository is located, for example \"repository/\"\n  get repositoryUrl() {\n    var e, t;\n    return ((e = this._initParams) == null ? void 0 : e.repositoryUrl) || ((t = this.config) == null ? void 0 : t.repositoryUrl) || \"\";\n  }\n  // Base URL where the video manifest file is located, for example \"repository/[video_id]\"\n  get manifestUrl() {\n    return this._manifestUrl;\n  }\n  // Video manifest file name, for example \"data.json\"\n  get manifestFileName() {\n    var e, t;\n    return ((e = this.config) == null ? void 0 : e.manifestFileName) || ((t = this._initParams) == null ? void 0 : t.manifestFileName) || \"\";\n  }\n  // Full path of the video manifest, for example \"repository/[video_id]/data.json\"\n  get manifestFileUrl() {\n    return this._manifestFileUrl;\n  }\n  // Video manifest file content (data.json)\n  get videoManifest() {\n    return this._videoManifest;\n  }\n  get previewContainer() {\n    return this._previewContainer;\n  }\n  get videoContainer() {\n    return this._videoContainer;\n  }\n  get playbackBar() {\n    return this._playbackBar;\n  }\n  get captionsCanvas() {\n    return this._captionsCanvas;\n  }\n  get data() {\n    return this._data;\n  }\n  get PlayerState() {\n    return w;\n  }\n  get PlayerStateNames() {\n    return U;\n  }\n  // Manifest query functions\n  get metadata() {\n    var e;\n    return ((e = this._manifestParser) == null ? void 0 : e.metadata) || {};\n  }\n  get streams() {\n    var e;\n    return ((e = this._manifestParser) == null ? void 0 : e.streams) || [];\n  }\n  get frameList() {\n    var e;\n    return ((e = this._manifestParser) == null ? void 0 : e.frameList) || {};\n  }\n  get captions() {\n    var e;\n    return ((e = this._manifestParser) == null ? void 0 : e.captions) || [];\n  }\n  get trimming() {\n    var e;\n    return ((e = this._manifestParser) == null ? void 0 : e.trimming) || {};\n  }\n  get visibleTimeLine() {\n    var e;\n    return ((e = this._manifestParser) == null ? void 0 : e.visibleTimeLine) || !0;\n  }\n  waitState(e) {\n    return new Promise((t, i) => {\n      const s = () => {\n        this.state === e ? t() : setTimeout(s, 50);\n      };\n      typeof e == \"string\" && (e = w[e]), (e < 0 || e > Object.values(w).length) && i(Error(`Invalid player state '${e}'`)), s();\n    });\n  }\n  async loadUrl(e, { title: t, duration: i, preview: s, previewPortrait: a } = {}) {\n    if (this._playerState !== w.UNLOADED)\n      throw new Error(this.translate(\"loadUrl(): Invalid current player state: $1\", [U[this._playerState]]));\n    if (this._manifestLoaded)\n      throw new Error(this.translate(\"loadUrl(): Invalid current player state: $1\", [U[this._playerState]]));\n    if (!e)\n      throw new Error(this.translate(\"loadUrl(): No URL specified.\"));\n    Array.isArray(e) || (e = [e]), t || (t = Ae(e[0]), this.log.warn(\"Paella.loadUrl(): no title specified. Using URL file name as video name.\"));\n    try {\n      if (await Lt.apply(this), !s && (this.defaultVideoPreview !== \"\" || this.defaultVideoPreviewPortrait !== \"\"))\n        s = this.defaultVideoPreview, a = this.defaultVideoPreviewPortrait, this.log.warn(\"Paella.loadUrl(): no preview image specified. Using default preview image.\");\n      else if (!s && !a)\n        throw new Error(\"Paella.loadUrl(): no preview image specified and no default preview image configured.\");\n      this._videoId = kt(Ae(e[0])), this._manifestUrl = Ke(e[0]), this._manifestFileUrl = e[0], this.log.debug(`Loading video with identifier '${this.videoId}' from URL '${this.manifestFileUrl}'`);\n      const r = Fn(this, e.length)[0];\n      this._videoManifest = {\n        metadata: {\n          duration: i,\n          title: t,\n          preview: s,\n          previewPortrait: a\n        },\n        streams: e.map((o, l) => ({\n          sources: Ts(this, o),\n          content: r[l],\n          role: l === 0 ? \"mainAudio\" : null\n        }))\n      }, await Pt.apply(this);\n    } catch (r) {\n      throw this._playerState = w.ERROR, this.log.error(r), this._errorContainer = new $e(this, this.translate(r.message)), r;\n    }\n  }\n  async loadManifest() {\n    if (this._playerState !== w.UNLOADED)\n      throw new Error(this.translate(\"loadManifest(): Invalid current player state: $1\", [U[this._playerState]]));\n    if (!this._manifestLoaded)\n      try {\n        if (await Lt.apply(this), this._videoId = await this.initParams.getVideoId(this._config, this), this.videoId === null)\n          throw new Error(\"No video identifier specified\");\n        this._manifestUrl = await this.initParams.getManifestUrl(this.repositoryUrl, this.videoId, this._config, this), this._manifestFileUrl = await this.initParams.getManifestFileUrl(this._manifestUrl, this.manifestFileName, this._config, this), this.log.debug(`Loading video with identifier '${this.videoId}' from URL '${this.manifestFileUrl}'`), this._videoManifest = await this.initParams.loadVideoManifest(this.manifestFileUrl, this._config, this), this._videoManifest.metadata = this._videoManifest.metadata || {}, !this._videoManifest.metadata.preview && (this.defaultVideoPreview !== \"\" || this.defaultVideoPreviewPortrait !== \"\") && (this._videoManifest.metadata.preview = this.defaultVideoPreview, this._videoManifest.metadata.previewPortrait = this.defaultVideoPreviewPortrait, this.log.warn(\"Paella.loadUrl(): no preview image specified. Using default preview image.\")), this._manifestParser = new aa(this.videoManifest, this), bt.apply(this.skin), await na.apply(this.skin), await ta.apply(this.skin), await Pt.apply(this);\n      } catch (e) {\n        throw this._playerState = w.ERROR, this.log.error(e), this._errorContainer = new $e(this, this.translate(e.message)), e;\n      }\n  }\n  async loadPlayer() {\n    var e, t, i;\n    try {\n      if (this._captionsCanvas = new Hs(this, this._containerElement), this._playerState !== w.MANIFEST)\n        throw new Error(this.translate(\"loadPlayer(): Invalid current player state: $1\", [U[this._playerState]]));\n      this._playerState = w.LOADING_PLAYER, (e = this._previewContainer) == null || e.removeFromParent(), this._loader = new this.initParams.Loader(this), await this._loader.create(), await this.videoContainer.load((t = this.videoManifest) == null ? void 0 : t.streams), E(this, m.STREAM_LOADED), this._playbackBar = new Gs(this, this.containerElement), await this._playbackBar.load(), this._hideUiTime = ((i = this.config.ui) == null ? void 0 : i.hideUITimer) ?? 5e3, At(this), this._captionsCanvas.load(), this._playerState = w.LOADED, await this.videoContainer.updateLayout(), E(this, m.PLAYER_LOADED), !(this.videoManifest.metadata.visibleTimeLine ?? !0) && this.playbackBar.progressIndicator.hideTimeLine(), this._loader.debug || (this._loader.removeFromParent(), this._loader = null);\n    } catch (s) {\n      throw this._playerState = w.ERROR, this._loader && (this._loader.removeFromParent(), this._loader = null), this._errorContainer = new $e(this, s.message), s;\n    }\n  }\n  async load() {\n    switch (this.state) {\n      case w.UNLOADED:\n        await this.loadManifest(), await this.loadPlayer();\n        break;\n      case w.MANIFEST:\n        await this.loadPlayer();\n        break;\n      case w.LOADED:\n        break;\n      default:\n        throw new Error(this.translate(\"Could not load player: state transition in progress: $1\", [U[this.state]]));\n    }\n  }\n  async unload() {\n    switch (this.state) {\n      case w.UNLOADED:\n        break;\n      case w.MANIFEST:\n        await this.unloadManifest();\n        break;\n      case w.LOADED:\n      case w.ERROR:\n        await this.unloadPlayer(), await this.unloadManifest();\n        break;\n      default:\n        throw new Error(this.translate(\"Could not unload player: state transition in progress: $1\", [U[this.state]]));\n    }\n  }\n  async unloadManifest() {\n    var e;\n    if (this._playerState !== w.MANIFEST && this._playerState !== w.ERROR)\n      throw new Error(this.translate(\"unloadManifest(): Invalid current player state: $1\", [U[this._playerState]]));\n    this._errorContainer && (this._errorContainer.removeFromParent(), this._errorContainer = null), this._playerState = w.UNLOADING_MANIFEST, this.log.debug(\"Unloading paella player\"), await Ws(), await Ls(this), this._manifestLoaded = !1, (e = this._previewContainer) == null || e.removeFromParent(), this._preferences = null, this._playerState = w.UNLOADED, bt.apply(this.skin);\n  }\n  async unloadPlayer() {\n    var e, t, i, s, a;\n    if (this._playerState !== w.LOADED && this._playerState !== w.ERROR)\n      throw new Error(this.translate(\"unloadManifest(): Invalid current player state: $1\", [U[this._playerState]]));\n    this._errorContainer && (this._errorContainer.removeFromParent(), this._errorContainer = null), this._playerState = w.UNLOADING_PLAYER, await ((e = this._videoContainer) == null ? void 0 : e.unload()), this._videoContainer = null, await ((t = this._playbackBar) == null ? void 0 : t.unload()), this._playbackBar = null, (i = this._captionsCanvas) == null || i.unload(), this._captionsCanvas = null, Mt(this), E(this, m.PLAYER_UNLOADED), (a = (s = this.videoManifest) == null ? void 0 : s.metadata) != null && a.preview && wi.apply(this), Li(this), this._playerState = w.MANIFEST;\n  }\n  async reload(e = null) {\n    switch (this.state) {\n      case w.UNLOADED:\n        break;\n      case w.MANIFEST:\n        await this.unloadManifest();\n        break;\n      case w.LOADED:\n        await this.unload();\n        break;\n    }\n    typeof e == \"function\" && await e(), await this.load();\n  }\n  async resize() {\n    var e, t;\n    if ((e = this.videoContainer) == null || e.updateLayout(), (t = this.playbackBar) == null || t.onResize(), this.videoContainer) {\n      const i = () => ({\n        w: this.videoContainer.element.offsetWidth,\n        h: this.videoContainer.element.offsetHeight\n      });\n      E(this, m.RESIZE, { size: i() }), this._resizeEndTimer && clearTimeout(this._resizeEndTimer), this._resizeEndTimer = setTimeout(() => {\n        E(this, m.RESIZE_END, { size: i() });\n      }, 1e3);\n    }\n  }\n  async hideUserInterface() {\n    var e, t, i;\n    await ((e = this.videoContainer) == null ? void 0 : e.paused()) || (this._uiHidden = !0, (t = this.videoContainer) == null || t.hideUserInterface(), (i = this.playbackBar) == null || i.hideUserInterface(), E(this, m.HIDE_UI));\n  }\n  async showUserInterface() {\n    var e, t;\n    (e = this.videoContainer) == null || e.showUserInterface(), (t = this.playbackBar) == null || t.showUserInterface(), this._uiHidden && E(this, m.SHOW_UI), this._uiHidden = !1;\n  }\n  // Playback functions\n  async play() {\n    this.videoContainer.ready || await this.loadPlayer(), await this.videoContainer.play();\n  }\n  async pause() {\n    var e;\n    await ((e = this.videoContainer) == null ? void 0 : e.pause());\n  }\n  async paused() {\n    return this.videoContainer ? this.videoContainer.paused() : !0;\n  }\n  async stop() {\n    var e;\n    await ((e = this.videoContainer) == null ? void 0 : e.stop());\n  }\n  isFullScreenSupported() {\n    return this.containerElement.requestFullscreen || this.containerElement.webkitRequestFullScreen;\n  }\n  async enterFullscreen() {\n    let e = null;\n    return this.containerElement.requestFullscreen ? e = this.containerElement.requestFullscreen() : this.containerElement.webkitRequestFullScreen && (this.log.debug(\"Safari enter fullscreen\"), e = this.containerElement.webkitRequestFullScreen()), setTimeout(() => this.resize(), 500), e;\n  }\n  async exitFullscreen() {\n    if (document.exitFullscreen && this.isFullscreen)\n      return document.exitFullscreen();\n    if (document.webkitCancelFullScreen && this.isFullscreen)\n      return this.log.debug(\"Safari exit fullscreen\"), document.webkitCancelFullScreen();\n  }\n  get isFullscreen() {\n    return document.fullscreenElement === this.containerElement || document.webkitFullscreenElement === this.containerElement;\n  }\n  addCustomPluginIcon(e, t, i) {\n    this._customPluginIcons[`${e}-${t}`] = i;\n  }\n  removeCustomPluginIcon(e, t) {\n    this._customPluginIcons[`${e}-${t}`] = null;\n  }\n  getCustomPluginIcon(e, t) {\n    return this._requestedCustomIcons = this._requestedCustomIcons || [], this._requestedCustomIcons.find((i) => i.pluginName === e && i.iconName === t) || this._requestedCustomIcons.push({\n      pluginName: e,\n      iconName: t\n    }), this._customPluginIcons[`${e}-${t}`];\n  }\n  get requestedCustomIcons() {\n    return this._requestedCustomIcons || [];\n  }\n}\nclass ha {\n  constructor({\n    id: e,\n    name: t,\n    groupId: i = \"\",\n    language: s = \"\",\n    selected: a = !1\n  }) {\n    this._id = e, this._name = t, this._groupId = i, this._lang = s, this._selected = a;\n  }\n  get id() {\n    return this._id;\n  }\n  get name() {\n    return this._name;\n  }\n  get groupId() {\n    return this._groupId;\n  }\n  get language() {\n    return this._lang;\n  }\n  get selected() {\n    return this._selected;\n  }\n  set selected(e) {\n    this._selected = e;\n  }\n}\nexport {\n  an as AudioOnlyVideo,\n  ha as AudioTrackData,\n  rn as AudioVideoPlugin,\n  ws as ButtonGroupPlugin,\n  st as ButtonPlugin,\n  ri as Canvas,\n  la as CanvasButtonPlugin,\n  S as CanvasButtonPosition,\n  oi as CanvasPlugin,\n  Gt as Captions,\n  Bt as CaptionsPlugin,\n  Un as CurrentTimeLabelPlugin,\n  fn as DFXPParser,\n  os as Data,\n  ci as DataPlugin,\n  yn as DfxpManifestCaptionsPlugin,\n  G as DomClass,\n  _t as DualVideoDynamicLayoutPlugin,\n  Yn as DualVideoLayoutPlugin,\n  ua as EventLogPlugin,\n  m as Events,\n  Ot as HtmlVideo,\n  on as HtmlVideoFormatPlugin,\n  dn as ImageVideo,\n  hn as ImageVideoFormatPlugin,\n  D as LOG_LEVEL,\n  Ai as Loader,\n  Zs as Log,\n  aa as ManifestParser,\n  vs as MenuButtonPlugin,\n  pn as Mp4Video,\n  gn as Mp4VideoFormatPlugin,\n  da as Paella,\n  ge as PaellaCorePlugins,\n  xn as PlayPauseButtonPlugin,\n  de as PlayerResource,\n  w as PlayerState,\n  U as PlayerStateNames,\n  he as Plugin,\n  Ue as PluginModule,\n  ds as PopUpButtonPlugin,\n  Jn as SingleVideoLayoutPlugin,\n  is as TripleVideoLayoutPlugin,\n  it as UserInterfacePlugin,\n  tt as Video,\n  as as VideoCanvas,\n  rs as VideoCanvasPlugin,\n  N as VideoContainerMessagePosition,\n  me as VideoLayout,\n  Ne as VideoPlugin,\n  ln as VideoQualityItem,\n  Nn as VttManifestCaptionsPlugin,\n  Vn as WebVTTParser,\n  _e as addDictionary,\n  A as bindEvent,\n  Ps as checkManifestIntegrity,\n  Ut as createElement,\n  L as createElementWithHtmlText,\n  Qs as createTimeLinePreview,\n  qt as defaultAddDictionaryFunction,\n  mi as defaultGetCookieConsentCallback,\n  fi as defaultGetCookieDescriptionCallback,\n  Yt as defaultGetDefaultLanguageFunction,\n  Qt as defaultGetDictionariesFunction,\n  Wt as defaultGetLanguageFunction,\n  ki as defaultGetManifestFileUrlFunction,\n  Ii as defaultGetManifestUrlFunction,\n  Ti as defaultGetVideoIdFunction,\n  Si as defaultLoadConfigFunction,\n  Di as defaultLoadVideoManifestFunction,\n  jt as defaultSetLanguageFunction,\n  Ht as defaultTranslateFunction,\n  ii as getDefaultLanguage,\n  vn as getDictionaries,\n  _n as getLanguage,\n  ui as getPluginsOfType,\n  ca as importPlugins,\n  Fi as isVolumeApiAvailable,\n  O as loadPluginsOfType,\n  X as log,\n  pt as parseDFXP,\n  yt as parseWebVTT,\n  us as plugins,\n  gt as setLanguage,\n  Ce as translate,\n  E as triggerEvent,\n  se as triggerIfReady,\n  oa as utils\n};\n//# sourceMappingURL=paella-core.js.map\n","\nexport default class WebGLCanvas {\n    constructor(canvas) {\n        this.gl = canvas.getContext(\"webgl\");\n\n        if (this.gl === null) {\n            throw new Error(\"This browser does not support WebGL\");\n        }\n    }\n    \n    async init({ clearColor = [0, 0, 0, 1] } = {}) {\n        const gl = this.gl; \n        gl.enable(gl.DEPTH_TEST);\n        gl.clearColor(...clearColor);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    }\n}","\nconst defaultVertex = `\n\nattribute vec4 inVertexPos;\n\nvoid main() {\n    gl_Position = inVertexPos;\n}\n`;\n\nconst defaultFragment = `\nvoid main() {\n    gl_FragColor = vec4(1.0, 0.5, 1.0, 1.0);\n}\n`;\n\nconst loadShader = (gl, type, source) => {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        console.error(`Error compiling shdaer: \\n${gl.getShaderInfoLog(shader)}`);\n    }\n    return shader;\n}\n\nexport default class Shader {\n    constructor(gl, { vertex = defaultVertex, fragment = defaultFragment, attribs = [], uniforms = [] }) {\n        this.gl = gl;\n        const vShader = loadShader(gl, gl.VERTEX_SHADER, vertex);\n        const fShader = loadShader(gl, gl.FRAGMENT_SHADER, fragment);\n\n        const shaderProgram = gl.createProgram();\n        gl.attachShader(shaderProgram, vShader);\n        gl.attachShader(shaderProgram, fShader);\n        gl.linkProgram(shaderProgram);\n\n        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n            console.error(`Unable to initialize shader program: ${gl.getProgramInfoLog(shaderProgram)}`);\n        }\n\n        gl.deleteShader(vShader);\n        gl.deleteShader(fShader);\n        this._shaderProgram = shaderProgram;\n\n        this.attribs = {};\n        attribs.forEach(attrib => {\n            this.attribs[attrib] = gl.getAttribLocation(shaderProgram, attrib);\n            if (this.attribs[attrib] == -1) {\n                console.warn(`Attribute not found in shader: '${attrib}'`);\n            }\n        });\n\n\n        this.uniforms = {};\n        uniforms.forEach(uniform => {\n            this.uniforms[uniform] = gl.getUniformLocation(shaderProgram, uniform);\n            if (this.uniforms[uniform] === null) {\n                console.warn(`Uniform not found in shader: ${uniform}`);\n            }\n        });\n    }\n\n    useProgram() {\n        this.gl.useProgram(this._shaderProgram);\n    }\n\n    enablePositionArray(attribName, vertexBuffer) {\n        vertexBuffer.bindPositions();\n        this.enableArray(attribName, 3);\n    }\n\n    enableTexCoordArray(attribName, vertexBuffer) {\n        vertexBuffer.bindTexCoord();\n        this.enableArray(attribName, 2);\n    }\n\n    enableArray(attribName, numComponents) {\n        const { gl } = this;\n        gl.enableVertexAttribArray(this.attribs[attribName]);\n        gl.vertexAttribPointer(this.attribs[attribName], numComponents, gl.FLOAT, false, 0, 0);\n    }\n\n    bindTexture(uniformName, texture) {\n        const { gl } = this;\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.uniform1i(this.uniforms[uniformName], 0);\n    }\n\n    bindFloat(uniformName, value) {\n        this.gl.uniform1f(this.uniforms[uniformName], value);\n    }\n\n    bindMatrix4(uniformName, value) {\n        this.gl.uniformMatrix4fv(this.uniforms[uniformName], false, value);\n    }\n}","\nfunction createVertexBuffer(gl, vertexData) {\n    const result = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, result);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexData), gl.STATIC_DRAW);\n    return result;\n}\n\nfunction createIndexBuffer(gl, indexData) {\n    const result = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, result);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indexData), gl.STATIC_DRAW);\n    return result;\n}\n\nexport default class SceneObject {\n    constructor(gl, position, texCoord, index) {\n        this.gl = gl;\n        this.positionArray = position;\n        this.positionBuffer = createVertexBuffer(gl, position);\n        this.texCoordArray = texCoord;\n        this.texCoordBuffer = createVertexBuffer(gl, texCoord);\n        this.indexArray = index;\n        this.indexBuffer = createIndexBuffer(gl, index);\n    }\n\n    bindPositions() {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.positionBuffer);\n    }\n\n    bindTexCoord() {\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.texCoordBuffer);\n    }\n\n    draw() {\n        this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n        this.gl.drawElements(this.gl.TRIANGLES, this.indexArray.length, this.gl.UNSIGNED_SHORT, 0);\n    }\n}","\n\nexport default class VideoTexture {\n    constructor(gl, video) {\n        this.gl = gl;\n        this.video = video;\n        this.texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        const pixel = new Uint8Array([0, 0, 255, 255]);\n        gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,1,1,0,gl.RGBA,gl.UNSIGNED_BYTE,pixel);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    }\n\n    updateTexture() {\n        const { gl } = this;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.video);\n    }\n}","\nexport const TWO_PI = Math.PI * 2;\n\nexport const QUARTER_TURN = Math.PI / 2;\n\nexport function latLngToCartesian([radius, lat, lng]){\n\tlng = -lng + Math.PI / 2;\n\treturn [\n\t\tradius * Math.cos(lat) * Math.cos(lng),\n\t\tradius * Math.sin(lat),\n\t\tradius * -Math.cos(lat) * Math.sin(lng),\n\t];\n}\n\nexport function inverseLerp(start, end, value) {\n\treturn (value - start) / (end - start);\n}\n\n\nexport function createSphere(density){\n\tconst radsPerUnit = Math.PI / density;\n\tconst sliceVertCount = density * 2;\n\n\t//positions and UVs\n\tconst positions = [];\n\tconst uvs = [];\n\tlet latitude = -Math.PI / 2;\n\t//latitude\n\tfor(let i = 0; i <= density; i++){\n\t\tconst v = inverseLerp(-QUARTER_TURN, QUARTER_TURN, -latitude);\n\t\tlet longitude = 0;\n\t\tlet vertLength = sliceVertCount + ((i > 0 && i < density) ? 1 : 0); //middle rings need extra vert for end U value\n\t\t//longitude\n\t\tfor (let j = 0; j < vertLength; j++) {\n\t\t\tpositions.push(latLngToCartesian([1, latitude, longitude]));\n\t\t\tuvs.push([inverseLerp(0, TWO_PI, longitude), v]);\n\t\t\tlongitude += radsPerUnit;\n\t\t}\n\t\tlatitude += radsPerUnit;\n\t}\n\n\t//colors\n\tconst colors = [];\n\tfor(let i = 0; i < positions.length; i++){\n\t\tcolors.push([1, 1, 0]);\n\t}\n\n\t//triangles\n\tconst triangles = [];\n\tlet ringStartP = 0;\n\tfor(let ring = 0; ring < density; ring++){ // start at first ring\n\t\tconst vertexBump = (ring > 0 ? 1 : 0);\n\t\tfor (let sliceVert = 0; sliceVert < sliceVertCount; sliceVert++){\n\t\t\tconst thisP = ringStartP + sliceVert;\n\t\t\tconst nextP = ringStartP + sliceVert + 1;\n\t\t\tconst nextRingP = thisP + sliceVertCount + vertexBump;\n\t\t\tconst nextRingNextP = nextP + sliceVertCount + vertexBump;\n\n\t\t\tif(ring === 0){\n\t\t\t\ttriangles.push([thisP, nextRingNextP, nextRingP]);\n\t\t\t}\n\t\t\tif(ring === density - 1){\n\t\t\t\ttriangles.push([thisP, nextP, nextRingP]);\n\t\t\t}\n\t\t\tif(ring > 0 && ring < density - 1 && density > 2){\n\t\t\t\ttriangles.push([thisP, nextRingNextP, nextRingP])\n\t\t\t\ttriangles.push([thisP, nextP, nextRingNextP])\n\t\t\t}\n\t\t}\n\t\tif(ring === 0){\n\t\t\tringStartP += sliceVertCount;\n\t\t} else {\n\t\t\tringStartP += sliceVertCount + 1;\n\t\t}\n\t}\n\n\n\treturn {\n\t\tpositions: positions.flat(),\n\t\tcolors: colors.flat(),\n\t\ttriangles: triangles.flat(),\n\t\tuvs: uvs.flat(),\n\t\tnormals: positions.flat()\n\t};\n}","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/constants.js\n */\nexport const Axis = {\n\tNONE: 0,\n\tX: 1,\n\tY: 2,\n\tZ: 3,\n    name: (axis) => {\n        switch (axis) {\n        case Axis.NONE:\n            return \"NONE\";\n        case Axis.X:\n            return \"X\";\n        case Axis.Y:\n            return \"Y\";\n        case Axis.Z:\n            return \"Z\";\n        case Axis.W:\n            return \"W\";\n        default:\n            return \"UNKNOWN\"\n        };\n    }\n};\n\nexport const PI = 3.141592653589793;\nexport const DEG_TO_RAD = 0.01745329251994;\nexport const RAD_TO_DEG = 57.29577951308233;\nexport const PI_2 = 1.5707963267948966;\nexport const PI_4 = 0.785398163397448;\nexport const PI_8 = 0.392699081698724;\nexport const TWO_PI = 6.283185307179586;\nexport const EPSILON = 0.0000001;\n\n// Default array: 32 bits\nexport const NumericArray = Float32Array;\nexport const NumericArrayHighP = Float64Array;\nexport const FLOAT_MAX = 3.402823e38;\n","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/functions.js\n */\n\nimport {\n    EPSILON,\n    DEG_TO_RAD,\n    RAD_TO_DEG\n} from './constants.js';\n\nlet s_bg_math_seed = Date.now();\n\nexport const checkPowerOfTwo = (n) => {\n    if (typeof n !== 'number') {\n        return false;\n    }\n    else {\n        return n && (n & (n - 1)) === 0;\n    }  \n}\n\nexport const checkZero = (v) => {\n    return v>-EPSILON && v<EPSILON ? 0:v;\n}\n\nexport const isZero = (v) => {\n    return checkZero(v) === 0;\n}\n\nexport const equals = (a,b) => {\n    return Math.abs(a - b) < EPSILON;\n}\n\nexport const degreesToRadians = (d) => {\n    return Math.fround(checkZero(d * DEG_TO_RAD));\n}\n\nexport const radiansToDegrees = (r) => {\n    return Math.fround(checkZero(r * RAD_TO_DEG));\n}\n\nexport const sin = (val) => {\n    return Math.fround(checkZero(Math.sin(val)));\n}\n\nexport const cos = (val) => {\n    return Math.fround(checkZero(Math.cos(val)));\n}\n\nexport const tan = (val) => {\n    return Math.fround(checkZero(Math.tan(val)));\n}\n\nexport const cotan = (val) => {\n    return Math.fround(checkZero(1.0 / tan(val)));\n}\n\nexport const atan = (val) => {\n    return Math.fround(checkZero(Math.atan(val)));\n}\n\nexport const atan2 = (i, j) => {\n    return Math.fround(checkZero(Math.atan2f(i, j)));\n}\n\nexport const random = () => {\n    return Math.random();\n}\n\nexport const seededRandom = () => {\n    const max = 1;\n    const min = 0;\n \n    s_bg_math_seed = (s_bg_math_seed * 9301 + 49297) % 233280;\n    const rnd = s_bg_math_seed / 233280;\n \n    return min + rnd * (max - min);\n}\n\nexport const max = (a,b) => {\n    return Math.fround(Math.max(a,b));\n}\n\nexport const min = (a,b) => {\n    return Math.fround(Math.min(a,b));\n}\n\nexport const abs = (val) => {\n    return Math.fround(Math.abs(val));\n}\n\nexport const sqrt = (val) => {\n    return Math.fround(Math.sqrt(val));\n}\n\nexport const lerp = (from, to, t) => {\n    return Math.fround((1.0 - t) * from + t * to);\n}\n\nexport const square = (n) => {\n    return Math.fround(n * n);\n}\n","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/Vec.js\n */\n\nimport { NumericArray } from \"./constants\";\nimport { isZero, equals } from \"./functions\";\n\nconst checkEqualLength = (v1,v2) => {\n    if (v1.length!=v2.length) throw new Error(`Invalid vector length in operation`);\n}\n\nexport default class Vec extends NumericArray {\n    constructor() {\n        switch (arguments.length) {\n        case 0:\n            super([0, 0]);\n            break;\n        case 1:\n            if (arguments[0].length>1 && arguments[0].length<5)\n            {\n                super(arguments[0]);\n            }\n            break;\n        case 2:\n            if (arguments[0].length === 2 && typeof(arguments[1]) === \"number\"\n            ) {\n                super([ arguments[0][0], arguments[0][1], arguments[1]]);\n            }\n            else if (arguments[0].length === 3 &&\n                typeof(arguments[1]) === \"number\"\n            ) {\n                super([ arguments[0][0], arguments[0][1], arguments[0][2], arguments[1]]);\n            }\n            else if (typeof(arguments[0]) === \"number\" &&\n                typeof(arguments[1]) === \"number\"\n            ) {\n                super([arguments[0],arguments[1]]);\n            }\n            break;\n        case 3:\n            if (arguments[0].length === 2 &&\n                typeof(arguments[1]) === \"number\" && typeof(arguments[2]) === \"number\"\n            ) {\n                super([ arguments[0][0], arguments[0][1], arguments[1], arguments[2]])\n            }\n            else if (typeof(arguments[0]) === \"number\" &&\n                typeof(arguments[1]) === \"number\" &&\n                typeof(arguments[2]) === \"number\"\n            ) {\n                super([arguments[0],arguments[1],arguments[2]]);\n            }\n            break;\n        case 4:\n            super([arguments[0],arguments[1],arguments[2],arguments[3]]);\n            break;\n        default:\n            throw new Error(`Invalid parameters in Vec constructor`);\n        }\n    }\n\n    normalize() {\n        const m = Vec.Magnitude(this);\n        switch (this.length) {\n        case 4:\n            this[3] = this[3] / m;\n        case 3:\n            this[2] = this[2] / m;\n        case 2:\n            this[1] = this[1] / m;            \n            this[0] = this[0] / m;\n            break;\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n        return this;\n    }\n\n    assign(src) {\n        checkEqualLength(this,src);\n        switch (this.length) {\n        case 4:\n            this[3] = src[3];\n        case 3:\n            this[2] = src[2];\n        case 2:\n            this[1] = src[1];\n            this[0] = src[0];\n            break;\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    set(x, y, z = null, w = null) {\n        if (this.length === 2) {\n            this[0] = x;\n            this[1] = y;\n        }\n        else if (this.length === 3 && z !== null) {\n            this[0] = x;\n            this[1] = y;\n            this[2] = z;\n        }\n        else if (this.length === 4 && w !== null) {\n            this[0] = x;\n            this[1] = y;\n            this[2] = z;\n            this[3] = w;\n        }\n        else {\n            throw new Error(`Invalid vector size: ${ this.length }. Trying to set x=${x}, y=${y}, z=${z}, w=${w}`);\n        }\n    }\n\n    scale(s) {\n        switch (this.length) {\n        case 4:\n            this[3] = this[3] * s;\n        case 3:\n            this[2] = this[2] * s;\n        case 2:\n            this[1] = this[1] * s;\n            this[0] = this[0] * s;\n            break;\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n        return this;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    get w() {\n        return this[3];\n    }\n\n    set x(v) {\n        this[0] = v;\n        return this;\n    }\n\n    set y(v) {\n        this[1] = v;\n        return this;\n    }\n\n    set z(v) {\n        this[2] = v;\n        return this;\n    }\n\n    set w(v) {\n        this[3] = v;\n        return this;\n    }\n\n    get r() {\n        return this[0];\n    }\n\n    get g() {\n        return this[1];\n    }\n\n    get b() {\n        return this[2];\n    }\n\n    get a() {\n        return this[3];\n    }\n\n    set r(v) {\n        this[0] = v;\n        return this;\n    }\n\n    set g(v) {\n        this[1] = v;\n        return this;\n    }\n\n    set b(v) {\n        this[2] = v;\n        return this;\n    }\n\n    set a(v) {\n        this[3] = v;\n        return this;\n    }\n\n    get width() {\n        switch (this.length) {\n        case 2:\n            return this[0];\n        case 4:\n            return this[2];\n        default:\n            throw new Error(\"Vec.width function used on non size or viewport vectors (two or four elements)\");\n        }\n    }\n\n    get height() {\n        switch (this.length) {\n            case 2:\n                return this[1];\n            case 4:\n                return this[3];\n            default:\n                throw new Error(\"Vec.width function used on non size or viewport vectors (two or four elements)\");\n            }\n    }\n\n    set width(w) {\n        this[0] = w;\n        return this;\n    }\n\n    set height(h) {\n        this[1] = h;\n        return this;\n    }\n    \n    get xy() {\n        switch (this.length) {\n        case 2:\n            return new Vec(this);\n        case 3:\n        case 4:\n            return new Vec(this[0], this[1]);\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    get xz() {\n        switch (this.length) {\n        case 3:\n        case 4:\n            return new Vec(this[0], this[2]);\n        case 2:\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    get yz() {\n        switch (this.length) {\n        case 3:\n        case 4:\n            return new Vec(this[1], this[2]);\n        case 2:\n        default:\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n    }\n\n    set xy(v) {\n        this[0] = v[0];\n        this[1] = v[1];\n        return this;\n    }\n\n    set xz(v) {\n        if (this.length<3) {\n            throw new Error('Invalid vector size');\n        }\n        this[0] = v[0];\n        this[2] = v[1];\n        return this;\n    }\n\n    set yz(v) {\n        if (this.length<3) {\n            throw new Error('Invalid vector size');\n        }\n        this[1] = v[0];\n        this[2] = v[1];\n        return this;\n    }\n\n    get xyz() {\n        if (this.length < 3) {\n            throw new Error(`Invalid vector size: ${ this.length }`);\n        }\n        return new Vec(this[0], this[1], this[2]);\n    }\n\n    set xyz(v) {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        this[0] = v[0];\n        this[1] = v[1];\n        this[2] = v[2];\n        return this;\n    }\n\n    // Copy operator\n    get xyzw() {\n        if (this.length < 4) {\n            throw new Error(`Invalid vector size: ${ this.length }, 4 required`);\n        }\n        return new Vec(this[0], this[1], this[2], this[3]);\n    }\n\n    // Assign operator\n    set xyzw(v) {\n        if (this.length < 4 || v.length<4) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        this[0] = v[0];\n        this[1] = v[1];\n        this[2] = v[2];\n        this[3] = v[3];\n        return this;\n    }\n\n    get rgb() {\n        if (this.length < 3) {\n            throw new Error(`Invalid vector size: ${this.length}, but at least 3 required`);\n        }\n        return new Vec(this[0],this[1],this[2]);\n    }\n\n    set rgb(v) {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        this[0] = v[0];\n        this[1] = v[1];\n        this[2] = v[2];\n        return this;\n    }\n\n    get rg() {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        return new Vec(this[0], this[1]);\n    }\n\n    get gb() {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        return new Vec(this[1], this[2]);\n    }\n\n    get rb() {\n        if (v.length<3 || this.length<3) {\n            throw new Error(`Invalid vector size to set: l;${ this.length }, r:${v.length}`);\n        }\n        return new Vec(this[0], this[2]);\n    }\n\n    get hexColor() {\n        const r = Math.round(this.r * 255);\n        const g = Math.round(this.g * 255);\n        const b = Math.round(this.b * 255);\n        const hex = (color) => color.toString(16).toUpperCase();\n        return `#${ hex(r) }${ hex(g) }${ hex(b) }`;\n    }\n\n    get cssColor() {\n        // Return rgb(x,y,z) or rgba(x,y,z,w);\n    }\n\n    get aspectRatio() {\n        return this.width / this.height;\n    }\n\n    toString() {\n        switch (this.length) {\n        case 2:\n            return `[${this[0]}, ${this[1]}]`;\n        case 3:\n            return `[${this[0]}, ${this[1]}, ${this[2]}]`;\n        case 4:\n            return `[${this[0]}, ${this[1]}, ${this[2]}, ${this[5]}]`;\n        }\n    }\n\n    static CheckEqualLength(v1,v2) {\n        checkEqualLength(v1,v2);\n    }\n\n    static Max(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0]>v2[0] ? v1[0] : v2[0],\n                v1[1]>v2[1] ? v1[1] : v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0]>v2[0] ? v1[0] : v2[0],\n                v1[1]>v2[1] ? v1[1] : v2[1],\n                v1[2]>v2[2] ? v1[2] : v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0]>v2[0] ? v1[0] : v2[0],\n                v1[1]>v2[1] ? v1[1] : v2[1],\n                v1[2]>v2[2] ? v1[2] : v2[2],\n                v1[3]>v2[3] ? v1[3] : v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Min(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0]<v2[0] ? v1[0] : v2[0],\n                v1[1]<v2[1] ? v1[1] : v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0]<v2[0] ? v1[0] : v2[0],\n                v1[1]<v2[1] ? v1[1] : v2[1],\n                v1[2]<v2[2] ? v1[2] : v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0]<v2[0] ? v1[0] : v2[0],\n                v1[1]<v2[1] ? v1[1] : v2[1],\n                v1[2]<v2[2] ? v1[2] : v2[2],\n                v1[3]<v2[3] ? v1[3] : v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Add(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0] + v2[0],\n                v1[1] + v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0] + v2[0],\n                v1[1] + v2[1],\n                v1[2] + v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0] + v2[0],\n                v1[1] + v2[1],\n                v1[2] + v2[2],\n                v1[3] + v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Sub(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return new Vec([\n                v1[0] - v2[0],\n                v1[1] - v2[1]\n            ]);\n        case 3:\n            return new Vec([\n                v1[0] - v2[0],\n                v1[1] - v2[1],\n                v1[2] - v2[2]\n            ]);\n        case 4:\n            return new Vec([\n                v1[0] - v2[0],\n                v1[1] - v2[1],\n                v1[2] - v2[2],\n                v1[3] - v2[3]\n            ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Magnitude(v) {\n        switch (v.length) {\n        case 2:\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        case 3:\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\n        case 4:\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2] + v[3] * v[3]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Distance(v1,v2) {\n        checkEqualLength(v1,v2);\n        return Vec.Magnitude(Vec.Sub(v1,v2));\n    }\n\n    static Dot(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return v1[0] * v2[0] + v1[1] * v2[1];\n        case 3:\n            return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\n        case 4:\n            return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2] + v1[3] * v2[3];\n        default:\n            throw new Error(`Invalid vector size: ${ v1.length }`);\n        }\n    }\n\n    static Cross(v1,v2) {\n        checkEqualLength(v1,v2);\n        switch (v1.length) {\n        case 2:\n            return v1[0] * v2[1] - v1[1] - v2[0];\n        case 3:\n            return new Vec([\n                v1[1] * v2[2] - v1[2] * v2[1],\n                v1[2] * v2[0] - v1[0] * v2[2],\n                v1[0] * v2[1] - v1[1] * v2[0],\n            ]);\n        default:\n            throw new Error(`Invalid vector size for cross product: ${ v1.length }`);\n        }\n    }\n\n    static Normalized(v) {\n        const m = Vec.Magnitude(v);\n        switch (v.length) {\n        case 2:\n            return new Vec([ v[0] / m, v[1] / m ]);\n        case 3:\n            return new Vec([ v[0] / m, v[1] / m, v[2] / m ]);\n        case 4:\n            return new Vec([ v[0] / m, v[1] / m, v[2] / m, v[3] / m ])\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Mult(v,s) {\n        switch (v.length) {\n        case 2:\n            return new Vec([ v[0] * s, v[1] * s ]);\n        case 3:\n            return new Vec([ v[0] * s, v[1] * s, v[2] * s ]);\n        case 4:\n            return new Vec([ v[0] * s, v[1] * s, v[2] * s, v[3] * s ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Div(v,s) {\n        switch (v.length) {\n        case 2:\n            return new Vec([ v[0] / s, v[1] / s ]);\n        case 3:\n            return new Vec([ v[0] / s, v[1] / s, v[2] / s ]);\n        case 4:\n            return new Vec([ v[0] / s, v[1] / s, v[2] / s, v[3] / s ]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static Equals(v1,v2) {\n        if (v1.length != v2.length) {\n            return false;\n        }\n        else {\n            switch (v1.length) {\n            case 2:\n                return  equals(v1[0], v2[0]) &&\n                        equals(v1[1], v2[1]);\n            case 3:\n                return  equals(v1[0], v2[0]) &&\n                        equals(v1[1], v2[1]) &&\n                        equals(v1[2], v2[2]);\n            case 4:\n                return  equals(v1[0], v2[0]) &&\n                        equals(v1[1], v2[1]) &&\n                        equals(v1[2], v2[2]) &&\n                        equals(v1[3], v2[3]);\n            default:\n                throw new Error(`Invalid vector size: ${ v1.length }`);\n            }\n        }\n    }\n\n    static IsZero(v) {\n        switch (v.length) {\n        case 2:\n            return isZero(v[0]) || isZero(v[1]);\n        case 3:\n            return isZero(v[0]) || isZero(v[1]) || isZero(v[2]);\n        case 4:\n            return isZero(v[0]) || isZero(v[1]) || isZero(v[2]) || isZero(v[3]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    static IsNaN(v) {\n        switch (v.length) {\n        case 2:\n            return isNaN(v[0]) || isNaN(v[1]);\n        case 3:\n            return isNaN(v[0]) || isNaN(v[1]) || isNaN(v[2]);\n        case 4:\n            return isNaN(v[0]) || isNaN(v[1]) || isNaN(v[2]) || isNaN(v[3]);\n        default:\n            throw new Error(`Invalid vector size: ${ v.length }`);\n        }\n    }\n\n    /////// Constructors\n    static Vec2() {\n        return new Vec(0,0);\n    }\n\n    static Vec3() {\n        return new Vec(0,0,0);\n    }\n\n    static Vec4() {\n        return new Vec(0,0,0,0);\n    }\n}\n    ","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/Mat3.js\n */\n\nimport { NumericArray } from \"./constants\";\nimport Vec from \"./Vec\";\nimport { isZero, equals } from \"./functions\";\n\nexport default class Mat3 extends NumericArray {\n    constructor() {\n        if (arguments.length === 9) {\n            super(arguments);\n        }\n        else if (arguments.length === 1 && arguments[0].length === 9) {\n            super(arguments[0]);\n        }\n        else if (arguments.length === 0) {\n            super([0,0,0,0,0,0,0,0,0]);\n        }\n        else {\n            throw new Error(`Invalid parameter size in Mat3 constructor`);\n        }\n    }\n\n    identity() {\n        this[0] = 1; this[1] = 0; this[2] = 0;\n        this[3] = 0; this[4] = 1; this[5] = 0;\n        this[6] = 0; this[7] = 0; this[8] = 1;\n        return this;\n    }\n\n    zero() {\n        this[0] = 0; this[1] = 0; this[2] = 0;\n        this[3] = 0; this[4] = 0; this[5] = 0;\n        this[6] = 0; this[7] = 0; this[8] = 0;\n        return this;\n    }\n\n    row(i) {\n        return new Vec(\n            this[i * 3], \n            this[i * 3 + 1],\n            this[ i* 3 + 2]);\n    }\n\n    setRow(i, a, y = null, z = null) {\n        if (a?.length>=3) {\n            this[i * 3]      = a[0];\n            this[i * 3 + 1]  = a[1];\n            this[i * 3 + 2]  = a[2];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\"\n        ) {\n            this[i * 3]      = a;\n            this[i * 3 + 1]  = y;\n            this[i * 3 + 2]  = z;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    col(i) {\n        return new Vec(\n            this[i],\n            this[i + 3],\n            this[i + 3 * 2]\n        )\n    }\n\n    setCol(i, a, y = null, z = null) {\n        if (a?.length>=3) {\n            this[i]         = a[0];\n            this[i + 3]     = a[1];\n            this[i + 3 * 2] = a[2];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\"\n        ) {\n            this[i]         = a;\n            this[i + 3]     = y;\n            this[i + 3 * 2] = z;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    assign(m) {\n        if (m.length === 9) {\n            this[0] = m[0]; this[1] = m[1]; this[2] = m[2];\n\t\t\tthis[3] = m[3]; this[4] = m[4]; this[5] = m[5];\n\t\t\tthis[6] = m[6]; this[7] = m[7]; this[8] = m[8];\n        }\n        else if (m.length === 16) {\n            this[0] = m[0]; this[1] = m[1]; this[2] = m[2];\n\t\t\tthis[3] = m[4]; this[4] = m[5]; this[5] = m[6];\n\t\t\tthis[6] = m[8]; this[7] = m[9]; this[8] = m[10];\n        }\n        else {\n            throw new Error(`Invalid plarameter setting matrix data`);\n        }\n        return this;\n    }\n\n    setScale(x,y,z) { \n\t\tconst rx = (new Vec(this[0], this[3], this[6])).normalize().scale(x);\n\t\tconst ry = (new Vec(this[1], this[4], this[7])).normalize().scale(y);\n\t\tconst rz = (new Vec(this[2], this[5], this[8])).normalize().scale(z);\n\t\tthis[0] = rx.x; this[3] = rx.y; this[6] = rx.z;\n\t\tthis[1] = ry.x; this[4] = ry.y; this[7] = ry.z;\n\t\tthis[2] = rz.x; this[5] = rz.y; this[8] = rz.z;\n\t\treturn this;\n\t}\n\n    traspose() {\n        const m3 = this[3];  // 0, 1, 2\n        const m7 = this[7];  // 3, 4, 5\n        const m6 = this[6];  // 6, 7, 8\n        this[3] = this[1];\n        this[6] = this[2];\n        this[7] = this[5];\n        this[1] = m3;\n        this[2] = m6;\n        this[5] = m7;\n        return this;\n    }\n\n    mult(a) {\n        if (typeof(a) === \"number\") {\n            this[0] *= a; this[1] *= a; this[2] *= a;\n            this[3] *= a; this[4] *= a; this[5] *= a;\n            this[6] *= a; this[7] *= a; this[8] *= a;\n        }\n        else if (a instanceof NumericArray && a.length === 9) {\n            const r0 = this.row(0);\n            const r1 = this.row(1);\n            const r2 = this.row(2);\n            const c0 = a.col(0);\n            const c1 = a.col(1);\n            const c2 = a.col(2);\n            \n            this[0] = Vec.Dot(r0,c0); this[1] = Vec.Dot(r0,c1); this[2] = Vec.Dot(r0,c2);\n            this[3] = Vec.Dot(r1,c0); this[4] = Vec.Dot(r1,c1); this[5] = Vec.Dot(r1,c2);\n            this[6] = Vec.Dot(r2,c0); this[7] = Vec.Dot(r2,c1); this[8] = Vec.Dot(r2,c2);\n        }\n        else {\n            throw new Error(`Invalid parameter in Mat3.mult()`);\n        }\n        return this;\n    }\n\n    multVector(v) {\n        if (v.length === 2 || v.length === 3) {\n            const x = v[0];\n            const y = v[1];\n            const z = v.length === 2 ? 1 : v[2];\n        \n            return new Vec(\tthis[0] * x + this[3] * y + this[6] * z,\n                            this[1] * x + this[4] * y + this[7] * z,\n                            this[2] * x + this[5] * y + this[8] * z);\n        }\n        else {\n            throw new Error(`Invalid parameter in Mat3.multVector()`);\n        }\n    }\n\n    toString() {\n        return  `[ ${this[0]}, ${this[1]}, ${this[2]}\\n` +\n                `  ${this[3]}, ${this[4]}, ${this[5]}\\n` +\n                `  ${this[6]}, ${this[7]}, ${this[8]} ]`;\n    }\n\n    static MakeIdentity() {\n        const m = new Mat3();\n        return m.identity();\n    }\n\n    static MakeZero() {\n        const m = new Mat3();\n        return m.zero();\n    }\n\n    static MakeWithQuaternion(q) {\n        const m = Mat3.MakeIdentity();\n        \n        m.setRow(0, new Vec( 1  - 2 * q[1] * q[1] - 2 * q[2] * q[2], 2 * q[0] * q[1] - 2 * q[2] * q[3], 2 * q[0] * q[2] + 2 * q[1] * q[3]));\n        m.setRow(1, new Vec( 2 * q[0] * q[1] + 2 * q[2] * q[3], 1  - 2.0 * q[0] * q[0] - 2 * q[2] * q[2], 2 * q[1] * q[2] - 2 * q[0] * q[3]));\n        m.setRow(2, new Vec( 2 * q[0] * q[2] - 2 * q[1] * q[3], 2 * q[1] * q[2] + 2 * q[0] * q[3] , 1 - 2 * q[0] * q[0] - 2 * q[1] * q[1]));\n\n        return m;\n    }\n\n    static IsZero(m) {\n        return\tisZero(v[0]) && isZero(v[1]) && isZero(v[2]) &&\n                isZero(v[3]) && isZero(v[4]) && isZero(v[5]) &&\n                isZero(v[6]) && isZero(v[7]) && isZero(v[8]);\n    }\n    \n    static IsIdentity(m) {\n        return\tequals(v[0], 1) && isZero(v[1]) && isZero(v[2]) &&\n                isZero(v[3]) && equals(v[4], 1) && isZero(v[5]) &&\n                isZero(v[6]) && isZero(v[7]) && equals(v[8], 1);\n    }\n\n    static GetScale(m) {\n        return new Vec(\n            Vec.Magnitude(new Vec(m[0], m[3], m[6])),\n            Vec.Magnitude(new Vec(m[1], m[4], m[7])),\n            Vec.Magnitude(new Vec(m[2], m[5], m[8]))\n        );\n    }\n\n    static Equals(a,b) {\n        return\tequals(a[0], b[0]) && equals(a[1], b[1])  && equals(a[2], b[2]) &&\n                equals(a[3], b[3]) && equals(a[4], b[4])  && equals(a[5], b[5]) &&\n                equals(a[6], b[6]) && equals(a[7], b[7])  && equals(a[8], b[8]);\n    }\n\n    static IsNaN(m) {\n        return\tisNaN(m[0]) || isNaN(m[1]) || isNaN(m[2]) &&\n                isNaN(m[3]) || isNaN(m[4]) || isNaN(m[5]) &&\n                isNaN(m[6]) || isNaN(m[7]) || isNaN(m[8]);\n    }\n};\n","/*\n    Extracted from bg2 engine source code: https://github.com/ferserc1/bg2e-js.git\n    file: bg2e/math/Mat4.js\n */\n\nimport { NumericArray, PI } from \"./constants\";\nimport Vec from \"./Vec\";\nimport Mat3 from \"./Mat3\";\nimport { equals, isZero } from \"./functions\";\n\nexport default class Mat4 extends NumericArray {\n    constructor() {\n        const inMatrix = [\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0,\n            0, 0, 0, 0\n        ];\n\n        // Create from matrix3\n        if (arguments.length === 9) {\n            inMatrix[0] = arguments[0]; \n            inMatrix[1] = arguments[1];\n            inMatrix[2] = arguments[2];\n\n            inMatrix[4] = arguments[3]; \n            inMatrix[5] = arguments[4];\n            inMatrix[6] = arguments[5];\n\n            inMatrix[8] = arguments[6]; \n            inMatrix[9] = arguments[7];\n            inMatrix[10] = arguments[8];\n\n            inMatrix[15] = 1;\n        }\n        else if (arguments.length === 1 && arguments[0].length === 9) {\n            inMatrix[0]  = arguments[0][0]; \n            inMatrix[1]  = arguments[0][1];\n            inMatrix[2]  = arguments[0][2];\n\n            inMatrix[4]  = arguments[0][3]; \n            inMatrix[5]  = arguments[0][4];\n            inMatrix[6]  = arguments[0][5];\n\n            inMatrix[8]  = arguments[0][6]; \n            inMatrix[9]  = arguments[0][7];\n            inMatrix[10] = arguments[0][8];\n\n            inMatrix[15] = 1;\n        }\n        // Create from matrix4\n        else if (arguments.length === 16) {\n            inMatrix[0 ] = arguments[0];\n            inMatrix[1 ] = arguments[1 ];\n            inMatrix[2 ] = arguments[2 ];\n            inMatrix[3 ] = arguments[3 ];\n\n            inMatrix[4 ] = arguments[4 ];\n            inMatrix[5 ] = arguments[5 ];\n            inMatrix[6 ] = arguments[6 ];\n            inMatrix[7 ] = arguments[7 ];\n\n            inMatrix[8 ] = arguments[8 ];\n            inMatrix[9 ] = arguments[9 ];\n            inMatrix[10] = arguments[10];\n            inMatrix[11] = arguments[11];\n\n            inMatrix[12] = arguments[12];\n            inMatrix[13] = arguments[13];\n            inMatrix[14] = arguments[14];\n            inMatrix[15] = arguments[15];\n        }\n        else if (arguments.length === 1 && arguments[0].length === 16) {\n            inMatrix[0 ] = arguments[0][0];\n            inMatrix[1 ] = arguments[0][1 ];\n            inMatrix[2 ] = arguments[0][2 ];\n            inMatrix[3 ] = arguments[0][3 ];\n\n            inMatrix[4 ] = arguments[0][4 ];\n            inMatrix[5 ] = arguments[0][5 ];\n            inMatrix[6 ] = arguments[0][6 ];\n            inMatrix[7 ] = arguments[0][7 ];\n\n            inMatrix[8 ] = arguments[0][8 ];\n            inMatrix[9 ] = arguments[0][9 ];\n            inMatrix[10] = arguments[0][10];\n            inMatrix[11] = arguments[0][11];\n\n            inMatrix[12] = arguments[0][12];\n            inMatrix[13] = arguments[0][13];\n            inMatrix[14] = arguments[0][14];\n            inMatrix[15] = arguments[0][15];\n        }\n        else if (arguments.length != 0) {\n            throw new Error(`Invalid parameter size in Matrix3 constructor`);\n        }\n\n        super(inMatrix);\n    }\n\n    ////// Initializers\n    identity() {\n        this[0 ] = 1; this[1 ] = 0; this[2 ] = 0; this[3 ] = 0\n        this[4 ] = 0; this[5 ] = 1; this[6 ] = 0; this[7 ] = 0\n        this[8 ] = 0; this[9 ] = 0; this[10] = 1; this[11] = 0\n        this[12] = 0; this[13] = 0; this[14] = 0; this[15] = 1\n        return this;\n    }\n\n    zero() {\n        this[ 0] = 0; this[ 1] = 0; this[ 2] = 0; this[ 3] = 0;\n        this[ 4] = 0; this[ 5] = 0; this[ 6] = 0; this[ 7] = 0;\n        this[ 8] = 0; this[ 9] = 0; this[10] = 0; this[11] = 0;\n        this[12] = 0; this[13] = 0; this[14] = 0; this[15] = 0;\n        return this;\n    }\n\n    perspective(fovy, aspect, nearPlane, farPlane) {\n        let fovy2 = Math.tan(fovy * PI / 360.0) * nearPlane;\n        let fovy2aspect = fovy2 * aspect;\n        this.frustum(-fovy2aspect,fovy2aspect,-fovy2,fovy2,nearPlane,farPlane);\n        return this;\n    }\n\n    frustum(left, right, bottom, top, nearPlane, farPlane) {\n        let A = right - left;\n        let B = top-bottom;\n        let C = farPlane-nearPlane;\n        \n        this.setRow(0, new Vec(nearPlane*2.0/A,\t0.0,\t0.0,\t0.0));\n        this.setRow(1, new Vec(0.0,\tnearPlane*2.0/B,\t0.0,\t0.0));\n        this.setRow(2, new Vec((right+left)/A,\t(top+bottom)/B,\t-(farPlane+nearPlane)/C,\t-1.0));\n        this.setRow(3, new Vec(0.0,\t0.0,\t-(farPlane*nearPlane*2.0)/C,\t0.0));\n        \n        return this;\n    }\n\n    ortho(left, right, bottom, top, nearPlane, farPlane) {\n        let m = right-left;\n        let l = top-bottom;\n        let k = farPlane-nearPlane;;\n        \n        this[0] = 2/m; this[1] = 0;   this[2] = 0;     this[3] = 0;\n        this[4] = 0;   this[5] = 2/l; this[6] = 0;     this[7] = 0;\n        this[8] = 0;   this[9] = 0;   this[10] = -2/k; this[11]= 0;\n        this[12]=-(left+right)/m; this[13] = -(top+bottom)/l; this[14] = -(farPlane+nearPlane)/k; this[15]=1;\n\n        return this;\n    }\n        \n    lookAt(p_eye, p_center, p_up) {\n        this.identity();\n\n        const y = new Vec(p_up);\n        const z = Vec.Sub(p_eye,p_center);\n        z.normalize();\n        const x = Vec.Cross(y,z);\n        x.normalize();\n        y.normalize();\n\n        this.m00 = x.x;\n        this.m10 = x.y;\n        this.m20 = x.z;\n        this.m30 = -Vec.Dot(x, p_eye);\n        this.m01 = y.x;\n        this.m11 = y.y;\n        this.m21 = y.z;\n        this.m31 = -Vec.Dot(y, p_eye);\n        this.m02 = z.x;\n        this.m12 = z.y;\n        this.m22 = z.z;\n        this.m32 = -Vec.Dot(z, p_eye);\n        this.m03 = 0;\n        this.m13 = 0;\n        this.m23 = 0;\n        this.m33 = 1;\n    \n        return this;\n    }\n\n\n\n\n    ///// Setters and getters\n    get m00() { return this[0]; }\n    get m01() { return this[1]; }\n    get m02() { return this[2]; }\n    get m03() { return this[3]; }\n    get m10() { return this[4]; }\n    get m11() { return this[5]; }\n    get m12() { return this[6]; }\n    get m13() { return this[7]; }\n    get m20() { return this[8]; }\n    get m21() { return this[9]; }\n    get m22() { return this[10]; }\n    get m23() { return this[11]; }\n    get m30() { return this[12]; }\n    get m31() { return this[13]; }\n    get m32() { return this[14]; }\n    get m33() { return this[15]; }\n    \n    set m00(v) { this[0] = v; }\n    set m01(v) { this[1] = v; }\n    set m02(v) { this[2] = v; }\n    set m03(v) { this[3] = v; }\n    set m10(v) { this[4] = v; }\n    set m11(v) { this[5] = v; }\n    set m12(v) { this[6] = v; }\n    set m13(v) { this[7] = v; }\n    set m20(v) { this[8] = v; }\n    set m21(v) { this[9] = v; }\n    set m22(v) { this[10] = v; }\n    set m23(v) { this[11] = v; }\n    set m30(v) { this[12] = v; }\n    set m31(v) { this[13] = v; }\n    set m32(v) { this[14] = v; }\n    set m33(v) { this[15] = v; }\n\n    get mat3() {\n        return new Mat3(this[0], this[1], this[ 2],\n                        this[4], this[5], this[ 6],\n                        this[8], this[9], this[10]);\n    }\n\n    get forwardVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, 0.0, 1.0));\n    }\n    \n    get rightVector() {\n        return Mat4.TransformDirection(this, new Vec(1.0, 0.0, 0.0));\n    }\n    \n    get upVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, 1.0, 0.0));\n    }\n    \n    get backwardVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, 0.0, -1.0));\n    }\n    \n    get leftVector() {\n        return Mat4.TransformDirection(this, new Vec(-1.0, 0.0, 0.0));\n    }\n    \n    get downVector() {\n        return Mat4.TransformDirection(this, new Vec(0.0, -1.0, 0.0));\n    }\n\n    row(i) {\n        return new Vec(\n            this[i * 4], \n            this[i * 4 + 1],\n            this[i * 4 + 2],\n            this[i * 4 + 3]);\n    }\n\n    setRow(i, a, y = null, z = null, w = null) {\n        if (a.length>=4) {\n            this[i * 4]      = a[0];\n            this[i * 4 + 1]  = a[1];\n            this[i * 4 + 2]  = a[2];\n            this[i * 4 + 3]  = a[3];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\" &&\n            typeof(w) === \"number\"\n        ) {\n            this[i * 4]      = a;\n            this[i * 4 + 1]  = y;\n            this[i * 4 + 2]  = z;\n            this[i * 4 + 3]  = w;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    col(i) {\n        return new Vec(\n            this[i],\n            this[i + 4],\n            this[i + 4 * 2],\n            this[i + 4 * 3]\n        )\n    }\n\n    setCol(i, a, y = null, z = null, w = null) {\n        if (a.length>=4) {\n            this[i]         = a[0];\n            this[i + 4]     = a[1];\n            this[i + 4 * 2] = a[2];\n            this[i + 4 * 3] = a[3];\n        }\n        else if (typeof(a) === \"number\" && \n            typeof(y) === \"number\" && \n            typeof(z) === \"number\" &&\n            typeof(w) === \"number\"\n        ) {\n            this[i]         = a;\n            this[i + 4]     = y;\n            this[i + 4 * 2] = z;\n            this[i + 4 * 3] = w;\n        }\n        else {\n            throw new Error(`Invalid parameter setting matrix row`);\n        }\n        return this;\n    }\n\n    assign(a) {\n        if (a.length==9) {\n            this[0]  = a[0]; this[1]  = a[1]; this[2]  = a[2]; this[3]  = 0;\n            this[4]  = a[3]; this[5]  = a[4]; this[6]  = a[5]; this[7]  = 0;\n            this[8]  = a[6]; this[9]  = a[7]; this[10] = a[8]; this[11] = 0;\n            this[12] = 0;\t this[13] = 0;\t  this[14] = 0;\t   this[15] = 1;\n        }\n        else if (a.length==16) {\n            this[0]  = a[0];  this[1]  = a[1];  this[2]  = a[2];  this[3]  = a[3];\n            this[4]  = a[4];  this[5]  = a[5];  this[6]  = a[6];  this[7]  = a[7];\n            this[8]  = a[8];  this[9]  = a[9];  this[10] = a[10]; this[11] = a[11];\n            this[12] = a[12]; this[13] = a[13];\tthis[14] = a[14]; this[15] = a[15];\n        }\n        return this;\n    }\n\n    translate(x, y, z) {\n        this.mult(Mat4.MakeTranslation(x, y, z));\n        return this;\n    }\n\n    rotate(alpha, x, y, z) {\n        this.mult(Mat4.MakeRotation(alpha, x, y, z));\n        return this;\n    }\n    \n    scale(x, y, z) {\n        this.mult(Mat4.MakeScale(x, y, z));\n        return this;\n    }\n\n    toString() {\n        return  `[ ${this[ 0]}, ${this[ 1]}, ${this[ 2]}, ${this[ 3]}\\n` +\n                `  ${this[ 4]}, ${this[ 5]}, ${this[ 6]}, ${this[ 7]}\\n` +\n                `  ${this[ 8]}, ${this[ 9]}, ${this[10]}, ${this[11]}\\n` +\n                `  ${this[12]}, ${this[13]}, ${this[14]}, ${this[15]} ]`;\n    }\n\n    setScale(x,y,z) {\n        const rx = new Vec(this[0], this[4], this[8]).normalize().scale(x);\n        const ry = new Vec(this[1], this[5], this[9]).normalize().scale(y);\n        const rz = new Vec(this[2], this[6], this[10]).normalize().scale(z);\n        this[0] = rx.x; this[4] = rx.y; this[8] = rx.z;\n        this[1] = ry.x; this[5] = ry.y; this[9] = ry.z;\n        this[2] = rz.x; this[6] = rz.y; this[10] = rz.z;\n        return this;\n    }\n\n    setPosition(pos,y,z) {\n        if (typeof(pos)==\"number\") {\n            this[12] = pos;\n            this[13] = y;\n            this[14] = z;\n        }\n        else {\n            this[12] = pos.x;\n            this[13] = pos.y;\n            this[14] = pos.z;\n        }\n        return this;\n    }\n\n    mult(a) {\n        if (typeof(a)=='number') {\n            this[ 0] *= a; this[ 1] *= a; this[ 2] *= a; this[ 3] *= a;\n            this[ 4] *= a; this[ 5] *= a; this[ 6] *= a; this[ 7] *= a;\n            this[ 8] *= a; this[ 9] *= a; this[10] *= a; this[11] *= a;\n            this[12] *= a; this[13] *= a; this[14] *= a; this[15] *= a;\n            return this;\n        }\n\n        const r0 = this.row(0);\n        const r1 = this.row(1);\n        const r2 = this.row(2);\n        const r3 = this.row(3);\n        const c0 = a.col(0);\n        const c1 = a.col(1);\n        const c2 = a.col(2);\n        const c3 = a.col(3);\n\n        this[0 ] = Vec.Dot(r0, c0); this[1 ] = Vec.Dot(r0, c1); this[2 ] = Vec.Dot(r0, c2); this[3 ] = Vec.Dot(r0, c3);\n        this[4 ] = Vec.Dot(r1, c0); this[5 ] = Vec.Dot(r1, c1); this[6 ] = Vec.Dot(r1, c2); this[7 ] = Vec.Dot(r1, c3);\n        this[8 ] = Vec.Dot(r2, c0); this[9 ] = Vec.Dot(r2, c1); this[10] = Vec.Dot(r2, c2); this[11] = Vec.Dot(r2, c3);\n        this[12] = Vec.Dot(r3, c0); this[13] = Vec.Dot(r3, c1); this[14] = Vec.Dot(r3, c2); this[15] = Vec.Dot(r3, c3);\n\n        return this;\n    }\n\n    multVector(vec) {\n        if (vec.length<3) {\n            throw new Error(\"Invalid parameter multiplying Mat4 by vector\");\n        }\n\n        const x = vec[0];\n        const y = vec[1];\n        const z = vec[2];\n        const w = vec.length >3 ? vec[3] : 1.0;\n    \n        return new Vec( this[0] * x + this[4] * y + this[ 8] * z + this[12] * w,\n                        this[1] * x + this[5] * y + this[ 9] * z + this[13] * w,\n                        this[2] * x + this[6] * y + this[10] * z + this[14] * w,\n                        this[3] * x + this[7] * y + this[11] * z + this[15] * w);\n    }\n    \n    invert() {\n        const a00 = this[0],  a01 = this[1],  a02 = this[2],  a03 = this[3],\n                a10 = this[4],  a11 = this[5],  a12 = this[6],  a13 = this[7],\n                a20 = this[8],  a21 = this[9],  a22 = this[10], a23 = this[11],\n                a30 = this[12], a31 = this[13], a32 = this[14], a33 = this[15];\n\n        const b00 = a00 * a11 - a01 * a10,\n                b01 = a00 * a12 - a02 * a10,\n                b02 = a00 * a13 - a03 * a10,\n                b03 = a01 * a12 - a02 * a11,\n                b04 = a01 * a13 - a03 * a11,\n                b05 = a02 * a13 - a03 * a12,\n                b06 = a20 * a31 - a21 * a30,\n                b07 = a20 * a32 - a22 * a30,\n                b08 = a20 * a33 - a23 * a30,\n                b09 = a21 * a32 - a22 * a31,\n                b10 = a21 * a33 - a23 * a31,\n                b11 = a22 * a33 - a23 * a32;\n\n        let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n        if (!det) {\n            this.zero();\n        }\n        else {\n            det = 1.0 / det;\n\n            this[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n            this[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n            this[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n            this[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n            this[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n            this[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n            this[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n            this[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n            this[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n            this[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n            this[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n            this[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n            this[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n            this[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n            this[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n            this[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n        }\n\n        return this;\n    }\n    \n    traspose() {\n        const r0 = new Vec(this[0], this[4], this[ 8], this[12]);\n        const r1 = new Vec(this[1], this[5], this[ 9], this[13]);\n        const r2 = new Vec(this[2], this[6], this[10], this[14]);\n        const r3 = new Vec(this[3], this[7], this[11], this[15]);\n    \n        this.setRow(0, r0);\n        this.setRow(1, r1);\n        this.setRow(2, r2);\n        this.setRow(3, r3);\n        return this;\n    }\n\n    ///////// Factory methods\n    static MakeIdentity() {\n        const m = new Mat4();\n        return m.identity();\n    }\n\n    static MakeZero() {\n        const m = new Mat4();\n        return m.zero();\n    }\n\n    static MakeWithQuaternion(q) {\n        const m = Mat4.MakeIdentity();\n        \n        m.setRow(0, new Vec( 1  - 2 * q[1] * q[1] - 2 * q[2] * q[2], 2 * q[0] * q[1] - 2 * q[2] * q[3], 2 * q[0] * q[2] + 2 * q[1] * q[3], 0));\n        m.setRow(1, new Vec( 2 * q[0] * q[1] + 2 * q[2] * q[3], 1  - 2.0 * q[0] * q[0] - 2 * q[2] * q[2], 2 * q[1] * q[2] - 2 * q[0] * q[3], 0));\n        m.setRow(2, new Vec( 2 * q[0] * q[2] - 2 * q[1] * q[3], 2 * q[1] * q[2] + 2 * q[0] * q[3] , 1 - 2 * q[0] * q[0] - 2 * q[1] * q[1], 0));//\n        return m;\n    }\n    \n    static MakeTranslation(x, y, z) {\n        if (x instanceof NumericArray && x.length >= 3) {\n            y = x[1];\n            z = x[2];\n            x = x[0];\n        }\n        return new Mat4(\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n                x,   y,   z, 1.0\n        );\n    }\n        \n    static MakeRotation(alpha, x, y, z) {\n        const axis = new Vec(x,y,z);\n        axis.normalize();\n                \n        var cosAlpha = Math.cos(alpha);\n        var acosAlpha = 1.0 - cosAlpha;\n        var sinAlpha = Math.sin(alpha);\n        \n        return new Mat4(\n            axis.x * axis.x * acosAlpha + cosAlpha, axis.x * axis.y * acosAlpha + axis.z * sinAlpha, axis.x * axis.z * acosAlpha - axis.y * sinAlpha, 0,\n            axis.y * axis.x * acosAlpha - axis.z * sinAlpha, axis.y * axis.y * acosAlpha + cosAlpha, axis.y * axis.z * acosAlpha + axis.x * sinAlpha, 0,\n            axis.z * axis.x * acosAlpha + axis.y * sinAlpha, axis.z * axis.y * acosAlpha - axis.x * sinAlpha, axis.z * axis.z * acosAlpha + cosAlpha, 0,\n            0,0,0,1\n        );\n    }\n\n    static MakeScale(x, y, z) {\n        if (x instanceof NumericArray  && x.length >= 3) {\n            y = x[1];\n            z = x[2];\n            x = x[0];\n        }\n        return new Mat4(\n            x, 0, 0, 0,\n            0, y, 0, 0,\n            0, 0, z, 0,\n            0, 0, 0, 1\n        )\n    }\n    \n\n    static MakePerspective(fovy, aspect, nearPlane, farPlane) {\n        return (new Mat4()).perspective(fovy, aspect, nearPlane, farPlane);\n    }\n    \n    static MakeFrustum(left, right, bottom, top, nearPlane, farPlane) {\n        return (new Mat4()).frustum(left, right, bottom, top, nearPlane, farPlane);\n    }\n    \n    static MakeOrtho(left, right, bottom, top, nearPlane, farPlane) {\n        return (new Mat4()).ortho(left, right, bottom, top, nearPlane, farPlane);\n    }\n\n    static MakeLookAt(origin, target, up) {\n        return (new Mat4()).lookAt(origin,target,up);\n    }\n\n    // Other static methods\n    static Mult(A,B) {\n        const result = new Mat4(A);\n        return result.mult(B);\n    }\n\n    static Unproject(x, y, depth, mvMat, pMat, viewport) {\n        let mvp = new Mat4(pMat);\n        mvp.mult(mvMat);\n        mvp.invert();\n\n        const vin = new Vec(((x - viewport.y) / viewport.width) * 2.0 - 1.0,\n                                ((y - viewport.x) / viewport.height) * 2.0 - 1.0,\n                                depth * 2.0 - 1.0,\n                                1.0);\n        \n        const result = new Vec4(mvp.multVector(vin));\n        if (result.z==0) {\n            result.set(0);\n        }\n        else {\n            result.set(\tresult.x/result.w,\n                        result.y/result.w,\n                        result.z/result.w,\n                        result.w/result.w);\n        }\n\n        return result;\n    }\n\n    static GetScale(m) {\n        return new Vec(\n            Vec.Magnitude([m[1], m[5], m[9]]),\n            Vec.Magnitude([m[0], m[4], m[8]]),\n            Vec.Magnitude([m[2], m[6], m[10]])\n        );\n    }\n\n    static GetRotation(m) {\n        const scale = Mat4.GetScale(m);\n        return new Mat4(\n                m[0] / scale.x, m[1] / scale.y, m[ 2] / scale.z, 0,\n                m[4] / scale.x, m[5] / scale.y, m[ 6] / scale.z, 0,\n                m[8] / scale.x, m[9] / scale.y, m[10] / scale.z, 0,\n                0,\t   0,\t  0, \t1\n        );\n    }\n\n    static GetPosition(m) {\n        return new Vec(m[12], m[13], m[14]);\n    }\n\n    static GetInverted(m) {\n        const inverted = new Mat4(m);\n        inverted.invert();\n        return inverted;\n    }\n\n    static GetNormalMatrix(m) {\n        return new Mat4(m)\n            .invert()\n            .traspose()\n            .mat3;\n    }\n    \n    static Equals(m,n) {\n        return\tm[ 0] == n[ 0] && m[ 1] == n[ 1] && m[ 2] == n[ 2] && m[ 3] == n[ 3] &&\n                m[ 4] == n[ 4] && m[ 5] == n[ 5] && m[ 6] == n[ 6] && m[ 7] == n[ 7] &&\n                m[ 8] == n[ 8] && m[ 9] == n[ 9] && m[10] == n[10] && m[11] == n[11] &&\n                m[12] == n[12] && m[13] == n[13] && m[14] == n[14] && m[15] == n[15];\n    }\n\n    static TransformDirection(M, /* Vec */ dir) {\n        const direction = new Vec(dir);\n        const trx = new Mat4(M);\n        trx.setRow(3, new Vec(0, 0, 0, 1));\n        direction.assign(trx.multVector(direction).xyz);\n        direction.normalize();\n        return direction;\n    }\n\n    static IsNan() {\n        return\tisNaN(this[ 0]) || isNaN(this[ 1]) || isNaN(this[ 2]) || isNaN(this[ 3]) ||\n                isNaN(this[ 4]) || isNaN(this[ 5]) || isNaN(this[ 6]) || isNaN(this[ 7]) ||\n                isNaN(this[ 8]) || isNaN(this[ 9]) || isNaN(this[10]) || isNaN(this[11]) ||\n                isNaN(this[12]) || isNaN(this[13]) || isNaN(this[14]) || isNaN(this[15]);\n    }\n\n    static IsZero(m) {\n        return\tisZero(m[ 0]) && isZero(m[ 1]) && isZero(m[ 2]) && isZero(m[ 3]) &&\n                isZero(m[ 4]) && isZero(m[ 5]) && isZero(m[ 6]) && isZero(m[ 7]) &&\n                isZero(m[ 8]) && isZero(m[ 9]) && isZero(m[10]) && isZero(m[11]) &&\n                isZero(m[12]) && isZero(m[13]) && isZero(m[14]) && isZero(m[15]);\n    }\n    \n    static IsIdentity(m) {\n        return\tequals(m[ 0],1) && equals(m[ 1],0) && equals(m[ 2],0) && equals(m[ 3],0) &&\n                equals(m[ 4],0) && equals(m[ 5],1) && equals(m[ 6],0) && equals(m[ 7],0) &&\n                equals(m[ 8],0) && equals(m[ 9],0) && equals(m[10],1) && equals(m[11],0) &&\n                equals(m[12],0) && equals(m[13],0) && equals(m[14],0) && equals(m[15],1);\n    }\n}\n","import { PluginModule } from \"@asicupv/paella-core\";\nimport packageData from \"../../package.json\";\n\nlet g_pluginModule = null;\n\nexport default class WebGLPluginsModule extends PluginModule {\n    static Get() {\n        if (!g_pluginModule) {\n            g_pluginModule = new WebGLPluginsModule();\n        }\n        return g_pluginModule;\n    }\n\n    get moduleName() {\n        return \"paella-webgl-plugins\";\n    }\n\n    get moduleVersion() {\n        return packageData.version;\n    }\n}","import { CanvasPlugin, Canvas } from '@asicupv/paella-core';\nimport WebGLCanvas from '../js/WebGLCanvas';\nimport Shader from '../js/Shader';\nimport SceneObject from '../js/SceneObject';\nimport VideoTexture from '../js/VideoTexture';\nimport { createSphere } from '../js/primitives';\nimport Mat4 from '../js/math/Mat4';\nimport WebGLPluginsModule from './WebGLPluginModule';\n\nconst vertex = `\nprecision highp float;\nattribute vec3 inVertexPos;\nattribute vec2 inTexCoord;\n\nvarying vec2 fsTexCoord;\n\nuniform mat4 uView;\nuniform mat4 uProj;\n\nvoid main() {\n    gl_Position = uProj * uView * vec4(inVertexPos,1.0);\n    fsTexCoord = inTexCoord;\n}\n`;\n\nconst fragment = `\nprecision highp float;\nuniform sampler2D uVideoTexture;\n\nvarying vec2 fsTexCoord;\n\nvoid main() {\n    gl_FragColor = texture2D(uVideoTexture,fsTexCoord);\n}\n`;\n\nconst removeVideoElement = (video, debug = false) => {\n    const playerParent = video.parentNode;\n    playerParent.removeChild(video);\n    document.body.appendChild(video);\n    video.style.position = \"fixed\";\n    video.style.width = \"100px\";\n    video.style.height = \"50px\";\n    video.style.top = \"0px\";\n    video.style.left = \"0px\";\n    if (!debug) {\n        video.style.display = \"none\";\n    }\n}\n\nexport class Video360Canvas extends Canvas {\n    constructor(player, videoContainer, config) {\n        super('canvas', player, videoContainer);\n        this.config = config;\n        this.maxZoom = config.maxZoom ?? 3;\n        this.minZoom = config.minZoom ?? 0.3;\n        this.speedX = config.speedX ?? 1;\n        this.speedY = config.speedY ?? 1;\n\n        let downPosition = [0,0];\n        let drag = false;\n        this._pitch = 0;\n        this._yaw = 0;\n        let initialDownPosition = [0,0];\n        this.element.addEventListener('mousedown', evt => {\n            drag = true;\n            downPosition = [evt.clientX, evt.clientY];\n            initialDownPosition = [evt.clientX, evt.clientY];\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('click', evt => {\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('mouseup', async evt => {\n            if (initialDownPosition[0] == evt.clientX && initialDownPosition[1] == evt.clientY) {\n                const isPaused = await player.paused();\n                isPaused ? player.play() : player.pause();\n            }\n            drag = false;\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('wheel', evt => {\n            this.currentZoom += evt.deltaY / 1000;\n            if (this.currentZoom > this.maxZoom) {\n                this.currentZoom = this.maxZoom;\n            }\n            else if (this.currentZoom < this.minZoom) {\n                this.currentZoom = this.minZoom;\n            }\n            evt.stopPropagation();\n            evt.preventDefault();\n        });\n\n        this.element.addEventListener('mouseout', evt => {\n            drag = false;\n            evt.stopPropagation();\n        });\n\n        this.element.addEventListener('mousemove', evt => {\n            player.showUserInterface();\n            if (drag) {\n                const newPos = [evt.clientX, evt.clientY];\n                const diff = [downPosition[0] - newPos[0], downPosition[1] - newPos[1]];\n                downPosition = newPos;\n                this._yaw += diff[0] * 0.004 * this.speedX;\n                this._pitch += diff[1] * 0.004 * this.speedY;\n                if (this._yaw>2*Math.PI) {\n                    this._yaw = this._yaw - 2 * Math.PI;\n                }\n                else if (this._yaw<0) {\n                    this._yaw = 2 * Math.PI + this._yaw;\n                }\n\n                if (this._pitch>Math.PI / 2) {\n                    this._pitch = Math.PI / 2;\n                }\n                else if (this._pitch<=-Math.PI / 2) {\n                    this._pitch = -Math.PI / 2;\n                }\n\n            }\n            evt.stopPropagation();\n        });\n    }\n\n    async loadCanvas(player) {\n        this.currentZoom = 1;\n        this._videoPlayer = player;\n\n        player.element.style.width = \"100%\";\n        player.element.style.height = \"100%\";\n        player.element.style.position = \"absolute\";\n        player.element.style.top = \"0\";\n        player.element.style.left = \"0\";\n\n        this.element.style.overflow = \"hidden\";\n        this.element.style.position = \"relative\";\n\n        this._videoPlayer = player;\n        player.element.crossOrigin = \"\";\n        removeVideoElement.apply(this, [player.element, false])\n\n        this._webGLCanvas = new WebGLCanvas(this.element);\n        await this._webGLCanvas.init({ clearColor: [0.2, 0.3, 0.8, 1] });\n\n        const { gl } = this._webGLCanvas;\n\n        const videoTexture = new VideoTexture(gl, player.element);\n\n        const shader = new Shader(gl, { \n            vertex, fragment, \n            attribs: [ 'inVertexPos', 'inTexCoord' ], \n            uniforms: [ 'uView', 'uProj', 'uVideoTexture' ]\n        });\n\n        const sphereData = createSphere(30);\n        const sphere = new SceneObject(gl, sphereData.positions, sphereData.uvs, sphereData.triangles);\n        \n        const canvas = this.element;\n        const draw = () => {\n            const w = canvas.clientWidth;\n            const h = canvas.clientHeight;\n\n            const fov = 45 * this.currentZoom;\n            const aspectRatio = w / h;\n            const projection = Mat4.MakePerspective(fov, isNaN(aspectRatio) ? 16/9 : aspectRatio, 0.01, 10.0);\n            const view = Mat4.MakeIdentity();\n            const model = Mat4.MakeRotation(this._yaw, 0, 1, 0);\n            model.rotate(this._pitch, 1, 0, 0);\n\n            videoTexture.updateTexture();\n            canvas.width = w;\n            canvas.height = h;\n            gl.viewport(0, 0, w, h);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n    \n            shader.useProgram();\n            shader.enablePositionArray('inVertexPos', sphere);\n            shader.enableTexCoordArray('inTexCoord', sphere);\n            shader.bindMatrix4('uView', Mat4.Mult(model,view));\n            shader.bindMatrix4('uProj', projection);\n            shader.bindTexture('uVideoTexture', videoTexture.texture);\n            sphere.draw();\n            requestAnimationFrame(draw);    \n        }\n        draw();\n    }\n}\n\nexport default class Video360CanvasPlugin extends CanvasPlugin {\n    getPluginModuleInstance() {\n        return WebGLPluginsModule.Get();\n    }\n\n    get name() {\n        return super.name || \"es.upv.paella.video360Canvas\";\n    }\n\n    get canvasType() { return \"video360\"; }\n\n    isCompatible(stream) {\n        if (stream.canvas?.find(c => c == this.canvasType)) {\n            return true;\n        }\n        \n        return super.isCompatible(stream);\n    }\n\n    getCanvasInstance(videoContainer) {\n        return new Video360Canvas(this.player, videoContainer, this.config);\n    }\n}\n","\nimport Video360Canvas from './plugins/es.upv.paella.video360Canvas';\n\nexport const webglPlugins = [\n    {\n        plugin: Video360Canvas,\n        config: {\n            enabled: false\n        }\n    }\n];\n\nexport const Video360CanvasPlugin = Video360Canvas;\n"],"names":["dt","n","ht","e","t","d","T","I","i","be","de","Ut","s","a","r","L","R","G","he","Ue","ri","oi","D","WebGLCanvas","canvas","clearColor","gl","defaultVertex","defaultFragment","loadShader","type","source","shader","Shader","vertex","fragment","attribs","uniforms","vShader","fShader","shaderProgram","attrib","uniform","attribName","vertexBuffer","numComponents","uniformName","texture","value","createVertexBuffer","vertexData","result","createIndexBuffer","indexData","SceneObject","position","texCoord","index","VideoTexture","video","pixel","TWO_PI","QUARTER_TURN","latLngToCartesian","radius","lat","lng","inverseLerp","start","end","createSphere","density","radsPerUnit","sliceVertCount","positions","uvs","latitude","v","longitude","vertLength","j","colors","triangles","ringStartP","ring","vertexBump","sliceVert","thisP","nextP","nextRingP","nextRingNextP","PI","EPSILON","NumericArray","checkZero","isZero","equals","b","checkEqualLength","v1","v2","Vec","m","src","x","y","z","w","h","g","hex","color","Mat3","rx","ry","rz","m3","m7","m6","r0","r1","r2","c0","c1","c2","q","Mat4","inMatrix","fovy","aspect","nearPlane","farPlane","fovy2","fovy2aspect","left","right","bottom","top","A","B","C","k","p_eye","p_center","p_up","alpha","pos","r3","c3","vec","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","axis","cosAlpha","acosAlpha","sinAlpha","origin","target","up","depth","mvMat","pMat","viewport","mvp","vin","scale","inverted","M","dir","direction","trx","g_pluginModule","WebGLPluginsModule","PluginModule","packageData","removeVideoElement","debug","Video360Canvas","Canvas","player","videoContainer","config","downPosition","drag","initialDownPosition","evt","newPos","diff","videoTexture","sphereData","sphere","draw","fov","aspectRatio","projection","view","model","CanvasPlugin","stream","_a","c","webglPlugins","Video360CanvasPlugin"],"mappings":"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","x_google_ignoreList":[0]}